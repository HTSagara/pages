"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-examples_container_accordion_app_mjs"],{

/***/ "./examples/container/accordion/MainContainer.mjs":
/*!********************************************************!*\
  !*** ./examples/container/accordion/MainContainer.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_container_Accordion_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/container/Accordion.mjs */ "./src/container/Accordion.mjs");
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_container_Base_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/container/Base.mjs */ "./src/container/Base.mjs");




/**
 * @class Neo.examples.button.base.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        className           : 'Neo.examples.button.base.MainContainer',
        configItemLabelWidth: 160,
        configItemWidth     : 280,
        layout              : {ntype: 'hbox', align: 'stretch'}
    }

    createConfigurationComponents() {
        return [{
            ntype: 'component',
            html : '<u><b>TOP ACCORDION</b></u>',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>maxExpandedItems:</b> 2',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>initialOpen:</b> [0, 1]',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<u><b>BOTTOM ACCORDION</b></u>',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>maxExpandedItems:</b> 1',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>initialOpen:</b> [0]',
            style: {marginTop: '10px'},
        }]
    }

    createExampleComponent() {
        return Neo.create({
            module: _src_container_Base_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
            items : [{
                module: _src_container_Accordion_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],

                title           : 'TOP',
                maxExpandedItems: 2,
                initialOpen     : [0, 1],

                height: 550,
                style : {
                    backgroundColor: 'grey',
                    padding        : '15px'
                },

                items: [{
                    iconCls: 'fa fa-dice-one',
                    title  : 'First Headerbar',
                    items  : [{
                        ntype: 'component',
                        html : 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna.'
                    }]
                }, {
                    iconCls: 'fa-dice-two',
                    title  : 'Second Headerbar',
                    items  : [{
                        html: 'Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.'
                    }]
                }, {
                    iconCls: 'fa-dice-three',
                    title  : 'Third Headerbar',
                    items  : [{
                        html: 'Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.'
                    }]
                }]
            }, {
                module: _src_container_Accordion_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],

                title           : 'bottom',
                maxExpandedItems: 1,
                initialOpen     : [0],

                height: 550,
                style : {
                    backgroundColor: 'darkgrey',
                    padding        : '15px'
                },

                items: [{
                    iconCls: 'fa fa-1',
                    title  : 'Define Content',
                    items  : [{
                        ntype: 'component',
                        html : 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna.'
                    }]
                }, {
                    iconCls: 'fa-2',
                    title  : 'Mark Best Fit',
                    items  : [{
                        html: 'Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.'
                    }]
                }, {
                    iconCls: 'fa-3',
                    title  : 'Create Invoice',
                    items  : [{
                        html: 'Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.'
                    }]
                }]
            }]
        })
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainer));


/***/ }),

/***/ "./examples/container/accordion/app.mjs":
/*!**********************************************!*\
  !*** ./examples/container/accordion/app.mjs ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/container/accordion/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Neo.examples.container.accordion'
});

/***/ }),

/***/ "./src/container/Accordion.mjs":
/*!*************************************!*\
  !*** ./src/container/Accordion.mjs ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _AccordionItem_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AccordionItem.mjs */ "./src/container/AccordionItem.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/Array.mjs */ "./src/util/Array.mjs");
/* harmony import */ var _Panel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Panel.mjs */ "./src/container/Panel.mjs");




/**
 * @class Neo.container.Accordion
 * @extends Neo.container.Panel
 */
class Accordion extends _Panel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.container.Accordion'
         * @protected
         */
        className: 'Neo.container.Accordion',
        /**
         * @member {String} ntype='accordion'
         * @protected
         */
        ntype: 'accordion',
        /**
         * @member {String[]} baseCls=['neo-accordion']
         */
        baseCls: ['neo-accordion'],
        /**
         * Add zero based numbers, which accordion items you want initially expanded
         * @member {Number[]} initialOpen=[]
         */
        initialOpen_: [],
        /**
         * @member {Object} itemDefaults={ntype:'accordionitem'}
         */
        itemDefaults: {ntype: 'accordionitem'},
        /**
         * @member {Object[]} items=[]
         */
        items: [],
        /**
         * Max number of accordion items, which can be expanded at the same time
         * @member {Number} maxExpandedItems=1
         */
        maxExpandedItems: 1,
        /**
         * Keep track of currently open items
         * @member {String[]} expandedItems=[]
         * @private
         */
        expandedItems_: [],
        /**
         * Creates a top header
         * @memeber {String|null} title=null
         */
        title_: null
    }

    /**
     * @param {Number[]} value
     * @param {Number[]} oldValue
     */
    afterSetInitialOpen(value, oldValue) {
        let me                     = this,
            {expandedItems, items} = me,
            id, item;

        value.forEach((itemNo) => {
            id   = Neo.getId(me.itemDefaults.ntype),
            item = items[itemNo];

            item.expanded = true;
            item.id       = id;
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].add(expandedItems, id)
        });

        me.expandedItems = expandedItems
    }

    /**
     * After changes to title config, we add a header
     * @param {String|null} value
     * @param {String|null} oldValue
     */
    afterSetTitle(value, oldValue) {
        let me      = this,
            titleEl = me.down({flag: 'titleEl'});

        if (value && !titleEl) {
            me.headers = [{
                baseCls: 'neo-accordion-title',
                cls    : ['neo-accordion-title'],
                dock   : 'top',
                text   : value
            }]
        }
    }

    /**
     * Called by accordion items.
     * Checks for maxExpandedItems
     * @param {Object}                      data
     * @param {Boolean}                     data.expanded newState
     * @param {Neo.container.AccordionItem} data.target   accordion item
     * @protected
     */
    childExpandChange(data) {
        let me                                = this,
            {expandedItems, maxExpandedItems} = me,
            {expanded, target}                = data,
            curNoOpenItems                    = expandedItems.length,
            targetId                          = target.id;

        if (expanded
            && maxExpandedItems !== 0
            && curNoOpenItems === maxExpandedItems
        ) {
            Neo.get(expandedItems[0]).expanded = false;
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].remove(expandedItems, expandedItems[0])
        }

        target.expanded = expanded;
        _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].toggle(expandedItems, targetId);

        me.expandedItems = expandedItems
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Accordion));


/***/ }),

/***/ "./src/container/AccordionItem.mjs":
/*!*****************************************!*\
  !*** ./src/container/AccordionItem.mjs ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.mjs */ "./src/container/Base.mjs");
/* harmony import */ var _toolbar_Base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../toolbar/Base.mjs */ "./src/toolbar/Base.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/Array.mjs */ "./src/util/Array.mjs");




/**
 * @class Neo.container.AccordionItem
 * @extends Neo.container.Base
 */
class AccordionContainer extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.container.AccordionItem'
         * @protected
         */
        className: 'Neo.container.AccordionItem',
        /**
         * @member {String} ntype='accordionitem'
         * @protected
         */
        ntype: 'accordionitem',
        /**
         * @member {String[]} baseCls=['neo-accordion-component']
         */
        baseCls: ['neo-accordion-item'],

        /**
         * Additional cls for the arrow, in case you need to customize it
         * @member {String[]|String|null} arrowCls=null
         */
        arrowCls: null,
        /**
         * Expand or collapse (true/false) this value
         * @member {Boolean} expanded=false
         */
        expanded_: false,
        /**
         * cls for the icon in front of the title
         * May be empty. 'fa' is preset,
         * so if you use fontawesome you do not have to add it.
         *
         * @member {String[]|String|null} iconCls=null
         */
        iconCls_: null,
        /**
         * Title for Headerbar
         * @member {String|null} title=null
         */
        title_: null
    }

    /**
     * Runs after afterSetTitle, so that the title component does not exist prior.
     * @protected
     */
    createItems() {
        let me       = this,
            arrowCls = me.arrowCls || 'fa-caret-down',
            iconCls  = me.iconCls  || ['no-icon'],
            {items, title} = me,
            header, content;

        if (!Neo.isArray(iconCls)) {
            iconCls = iconCls.split(' ')
        }

        if (!Neo.isArray(arrowCls)) {
            arrowCls = arrowCls.split(' ')
        }

        header = Neo.create({
            module: _toolbar_Base_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
            items : [{
                flag   : 'iconEl',
                ntype  : 'component',
                baseCls: ['neo-accordion-header-icon'],
                cls    : ['fa', ...iconCls],
            }, {
                flag   : 'titleEl',
                ntype  : 'component',
                baseCls: ['neo-accordion-header-title'],
                html   : title
            }, {
                ntype  : 'component',
                baseCls: ['neo-accordion-header-arrow'],
                cls    : ['fa', ...arrowCls]
            }]
        });

        content = {
            ntype  : 'container',
            flag   : 'content',
            baseCls: ['neo-accordion-content', 'neo-container'],
            items  : items
        };

        me.items = [header, content];

        super.createItems();

        me.addDomListeners([
            {click: me.onExpandClick, delegate: 'neo-accordion-header-arrow'}
        ])
    }

    /**
     * After changing expanded, we expand/collapse via CSS
     * @param {Boolean} isExpanded
     */
    afterSetExpanded(isExpanded) {
        let me    = this,
            {cls} = me,
            fn    = isExpanded ? 'add' : 'remove';

        _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"][fn](cls, 'neo-expanded');
        me.cls = cls;

        // Ensure scrollbars are not flipping in and out
        me.timeout(450).then(() => {
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"][fn](cls, 'neo-scrollable');
            me.cls = cls
        })
    }

    /**
     * The initial title is set before the component is created,
     * so we have to check if it exists.
     *
     * @param {String[]|String} newValue
     * @param {String[]} oldValue
     */
    afterSetIconCls(newValue, oldValue) {
        let iconEl = this.down({flag: 'iconEl'});

        if (iconEl) {
            let cls = iconEl.cls;

            if (!Neo.isArray(newValue)) {
                newValue = newValue.split(' ')
            }

            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].remove(cls, oldValue);
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].add(cls, newValue);
            iconEl.cls = cls
        }
    }

    /**
     * The initial title is set before the component is created,
     * so we have to check if it exists.
     *
     * @param {String} newValue
     */
    afterSetTitle(newValue) {
        let titleEl = this.down({flag: 'titleEl'});

        if (titleEl) {
            titleEl.html = newValue
        }
    }

    /**
     * If the parent is an AccordionContainer, we run the parent function.
     * Otherwise we set this.expanded to the new value.
     */
    onExpandClick() {
        let me           = this,
            currentState = me.expanded,
            parent       = me.up('accordion');

        if (parent.ntype === 'accordion') {
            parent.childExpandChange({
                expanded: !currentState,
                target  : me
            })
        } else {
            me.expanded = !currentState
        }
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(AccordionContainer));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWV4YW1wbGVzX2NvbnRhaW5lcl9hY2NvcmRpb25fYXBwX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQXlFO0FBQ0w7QUFDQTs7QUFFcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0VBQXFCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEMsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDLFNBQVM7QUFDVDtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEMsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLCtEQUFTO0FBQzdCO0FBQ0Esd0JBQXdCLG9FQUFTOztBQUVqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2Isd0JBQXdCLG9FQUFTOztBQUVqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pC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Q0E7QUFDQSxhQUFhLEtBQUs7QUFDbEI7O0FBRUEsUUFBUSx1REFBUTtBQUNoQjs7QUFFQTtBQUNBO0FBQ0EsWUFBWSx1REFBUTtBQUNwQjtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDLGVBQWUsVUFBVTtBQUN6QjtBQUNBO0FBQ0EsZ0NBQWdDLGVBQWU7O0FBRS9DO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFlBQVksdURBQVE7QUFDcEIsWUFBWSx1REFBUTtBQUNwQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBLGlDQUFpQyxnQkFBZ0I7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlFQUFlLGtDQUFrQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL2NvbnRhaW5lci9hY2NvcmRpb24vTWFpbkNvbnRhaW5lci5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL2NvbnRhaW5lci9hY2NvcmRpb24vYXBwLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2NvbnRhaW5lci9BY2NvcmRpb24ubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvY29udGFpbmVyL0FjY29yZGlvbkl0ZW0ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBY2NvcmRpb24gICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2NvbnRhaW5lci9BY2NvcmRpb24ubWpzJztcbmltcG9ydCBDb25maWd1cmF0aW9uVmlld3BvcnQgZnJvbSAnLi4vLi4vQ29uZmlndXJhdGlvblZpZXdwb3J0Lm1qcyc7XG5pbXBvcnQgQ29udGFpbmVyICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9jb250YWluZXIvQmFzZS5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8uZXhhbXBsZXMuYnV0dG9uLmJhc2UuTWFpbkNvbnRhaW5lclxuICogQGV4dGVuZHMgTmVvLmV4YW1wbGVzLkNvbmZpZ3VyYXRpb25WaWV3cG9ydFxuICovXG5jbGFzcyBNYWluQ29udGFpbmVyIGV4dGVuZHMgQ29uZmlndXJhdGlvblZpZXdwb3J0IHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICBjbGFzc05hbWUgICAgICAgICAgIDogJ05lby5leGFtcGxlcy5idXR0b24uYmFzZS5NYWluQ29udGFpbmVyJyxcbiAgICAgICAgY29uZmlnSXRlbUxhYmVsV2lkdGg6IDE2MCxcbiAgICAgICAgY29uZmlnSXRlbVdpZHRoICAgICA6IDI4MCxcbiAgICAgICAgbGF5b3V0ICAgICAgICAgICAgICA6IHtudHlwZTogJ2hib3gnLCBhbGlnbjogJ3N0cmV0Y2gnfVxuICAgIH1cblxuICAgIGNyZWF0ZUNvbmZpZ3VyYXRpb25Db21wb25lbnRzKCkge1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgIG50eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgIGh0bWwgOiAnPHU+PGI+VE9QIEFDQ09SRElPTjwvYj48L3U+JyxcbiAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luVG9wOiAnMTBweCd9LFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBudHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICBodG1sIDogJzxiPm1heEV4cGFuZGVkSXRlbXM6PC9iPiAyJyxcbiAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luVG9wOiAnMTBweCd9LFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBudHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICBodG1sIDogJzxiPmluaXRpYWxPcGVuOjwvYj4gWzAsIDFdJyxcbiAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luVG9wOiAnMTBweCd9LFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBudHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICBodG1sIDogJzx1PjxiPkJPVFRPTSBBQ0NPUkRJT048L2I+PC91PicsXG4gICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbnR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgaHRtbCA6ICc8Yj5tYXhFeHBhbmRlZEl0ZW1zOjwvYj4gMScsXG4gICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbnR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgaHRtbCA6ICc8Yj5pbml0aWFsT3Blbjo8L2I+IFswXScsXG4gICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgfV1cbiAgICB9XG5cbiAgICBjcmVhdGVFeGFtcGxlQ29tcG9uZW50KCkge1xuICAgICAgICByZXR1cm4gTmVvLmNyZWF0ZSh7XG4gICAgICAgICAgICBtb2R1bGU6IENvbnRhaW5lcixcbiAgICAgICAgICAgIGl0ZW1zIDogW3tcbiAgICAgICAgICAgICAgICBtb2R1bGU6IEFjY29yZGlvbixcblxuICAgICAgICAgICAgICAgIHRpdGxlICAgICAgICAgICA6ICdUT1AnLFxuICAgICAgICAgICAgICAgIG1heEV4cGFuZGVkSXRlbXM6IDIsXG4gICAgICAgICAgICAgICAgaW5pdGlhbE9wZW4gICAgIDogWzAsIDFdLFxuXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1NTAsXG4gICAgICAgICAgICAgICAgc3R5bGUgOiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ2dyZXknLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nICAgICAgICA6ICcxNXB4J1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBpdGVtczogW3tcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsczogJ2ZhIGZhLWRpY2Utb25lJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgIDogJ0ZpcnN0IEhlYWRlcmJhcicsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zICA6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBudHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sIDogJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ZXIgYWRpcGlzY2luZyBlbGl0LiBNYWVjZW5hcyBwb3J0dGl0b3IgY29uZ3VlIG1hc3NhLiBGdXNjZSBwb3N1ZXJlLCBtYWduYSBzZWQgcHVsdmluYXIgdWx0cmljaWVzLCBwdXJ1cyBsZWN0dXMgbWFsZXN1YWRhIGxpYmVybywgc2l0IGFtZXQgY29tbW9kbyBtYWduYSBlcm9zIHF1aXMgdXJuYS4nXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEtZGljZS10d28nLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSAgOiAnU2Vjb25kIEhlYWRlcmJhcicsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zICA6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sOiAnTnVuYyB2aXZlcnJhIGltcGVyZGlldCBlbmltLiBGdXNjZSBlc3QuIFZpdmFtdXMgYSB0ZWxsdXMuJ1xuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsczogJ2ZhLWRpY2UtdGhyZWUnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSAgOiAnVGhpcmQgSGVhZGVyYmFyJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgIDogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6ICdQZWxsZW50ZXNxdWUgaGFiaXRhbnQgbW9yYmkgdHJpc3RpcXVlIHNlbmVjdHVzIGV0IG5ldHVzIGV0IG1hbGVzdWFkYSBmYW1lcyBhYyB0dXJwaXMgZWdlc3Rhcy4gUHJvaW4gcGhhcmV0cmEgbm9udW1teSBwZWRlLiBNYXVyaXMgZXQgb3JjaS4nXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBtb2R1bGU6IEFjY29yZGlvbixcblxuICAgICAgICAgICAgICAgIHRpdGxlICAgICAgICAgICA6ICdib3R0b20nLFxuICAgICAgICAgICAgICAgIG1heEV4cGFuZGVkSXRlbXM6IDEsXG4gICAgICAgICAgICAgICAgaW5pdGlhbE9wZW4gICAgIDogWzBdLFxuXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1NTAsXG4gICAgICAgICAgICAgICAgc3R5bGUgOiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ2RhcmtncmV5JyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZyAgICAgICAgOiAnMTVweCdcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgaXRlbXM6IFt7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYSBmYS0xJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgIDogJ0RlZmluZSBDb250ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgIDogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIG50eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgOiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVlciBhZGlwaXNjaW5nIGVsaXQuIE1hZWNlbmFzIHBvcnR0aXRvciBjb25ndWUgbWFzc2EuIEZ1c2NlIHBvc3VlcmUsIG1hZ25hIHNlZCBwdWx2aW5hciB1bHRyaWNpZXMsIHB1cnVzIGxlY3R1cyBtYWxlc3VhZGEgbGliZXJvLCBzaXQgYW1ldCBjb21tb2RvIG1hZ25hIGVyb3MgcXVpcyB1cm5hLidcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYS0yJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgIDogJ01hcmsgQmVzdCBGaXQnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtcyAgOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogJ051bmMgdml2ZXJyYSBpbXBlcmRpZXQgZW5pbS4gRnVzY2UgZXN0LiBWaXZhbXVzIGEgdGVsbHVzLidcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYS0zJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgIDogJ0NyZWF0ZSBJbnZvaWNlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgIDogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6ICdQZWxsZW50ZXNxdWUgaGFiaXRhbnQgbW9yYmkgdHJpc3RpcXVlIHNlbmVjdHVzIGV0IG5ldHVzIGV0IG1hbGVzdWFkYSBmYW1lcyBhYyB0dXJwaXMgZWdlc3Rhcy4gUHJvaW4gcGhhcmV0cmEgbm9udW1teSBwZWRlLiBNYXVyaXMgZXQgb3JjaS4nXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhNYWluQ29udGFpbmVyKTtcbiIsImltcG9ydCBNYWluQ29udGFpbmVyIGZyb20gJy4vTWFpbkNvbnRhaW5lci5tanMnO1xuXG5leHBvcnQgY29uc3Qgb25TdGFydCA9ICgpID0+IE5lby5hcHAoe1xuICAgIG1haW5WaWV3OiBNYWluQ29udGFpbmVyLFxuICAgIG5hbWUgICAgOiAnTmVvLmV4YW1wbGVzLmNvbnRhaW5lci5hY2NvcmRpb24nXG59KTsiLCJpbXBvcnQgQWNjb3JkaW9uSXRlbSBmcm9tICcuL0FjY29yZGlvbkl0ZW0ubWpzJztcbmltcG9ydCBOZW9BcnJheSAgICAgIGZyb20gJy4uL3V0aWwvQXJyYXkubWpzJztcbmltcG9ydCBQYW5lbCAgICAgICAgIGZyb20gJy4vUGFuZWwubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmNvbnRhaW5lci5BY2NvcmRpb25cbiAqIEBleHRlbmRzIE5lby5jb250YWluZXIuUGFuZWxcbiAqL1xuY2xhc3MgQWNjb3JkaW9uIGV4dGVuZHMgUGFuZWwge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmNvbnRhaW5lci5BY2NvcmRpb24nXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5jb250YWluZXIuQWNjb3JkaW9uJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gbnR5cGU9J2FjY29yZGlvbidcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgbnR5cGU6ICdhY2NvcmRpb24nLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGJhc2VDbHM9WyduZW8tYWNjb3JkaW9uJ11cbiAgICAgICAgICovXG4gICAgICAgIGJhc2VDbHM6IFsnbmVvLWFjY29yZGlvbiddLFxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIHplcm8gYmFzZWQgbnVtYmVycywgd2hpY2ggYWNjb3JkaW9uIGl0ZW1zIHlvdSB3YW50IGluaXRpYWxseSBleHBhbmRlZFxuICAgICAgICAgKiBAbWVtYmVyIHtOdW1iZXJbXX0gaW5pdGlhbE9wZW49W11cbiAgICAgICAgICovXG4gICAgICAgIGluaXRpYWxPcGVuXzogW10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R9IGl0ZW1EZWZhdWx0cz17bnR5cGU6J2FjY29yZGlvbml0ZW0nfVxuICAgICAgICAgKi9cbiAgICAgICAgaXRlbURlZmF1bHRzOiB7bnR5cGU6ICdhY2NvcmRpb25pdGVtJ30sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3RbXX0gaXRlbXM9W11cbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1heCBudW1iZXIgb2YgYWNjb3JkaW9uIGl0ZW1zLCB3aGljaCBjYW4gYmUgZXhwYW5kZWQgYXQgdGhlIHNhbWUgdGltZVxuICAgICAgICAgKiBAbWVtYmVyIHtOdW1iZXJ9IG1heEV4cGFuZGVkSXRlbXM9MVxuICAgICAgICAgKi9cbiAgICAgICAgbWF4RXhwYW5kZWRJdGVtczogMSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXAgdHJhY2sgb2YgY3VycmVudGx5IG9wZW4gaXRlbXNcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGV4cGFuZGVkSXRlbXM9W11cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIGV4cGFuZGVkSXRlbXNfOiBbXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSB0b3AgaGVhZGVyXG4gICAgICAgICAqIEBtZW1lYmVyIHtTdHJpbmd8bnVsbH0gdGl0bGU9bnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgdGl0bGVfOiBudWxsXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtOdW1iZXJbXX0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge051bWJlcltdfSBvbGRWYWx1ZVxuICAgICAqL1xuICAgIGFmdGVyU2V0SW5pdGlhbE9wZW4odmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBtZSAgICAgICAgICAgICAgICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIHtleHBhbmRlZEl0ZW1zLCBpdGVtc30gPSBtZSxcbiAgICAgICAgICAgIGlkLCBpdGVtO1xuXG4gICAgICAgIHZhbHVlLmZvckVhY2goKGl0ZW1ObykgPT4ge1xuICAgICAgICAgICAgaWQgICA9IE5lby5nZXRJZChtZS5pdGVtRGVmYXVsdHMubnR5cGUpLFxuICAgICAgICAgICAgaXRlbSA9IGl0ZW1zW2l0ZW1Ob107XG5cbiAgICAgICAgICAgIGl0ZW0uZXhwYW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgaXRlbS5pZCAgICAgICA9IGlkO1xuICAgICAgICAgICAgTmVvQXJyYXkuYWRkKGV4cGFuZGVkSXRlbXMsIGlkKVxuICAgICAgICB9KTtcblxuICAgICAgICBtZS5leHBhbmRlZEl0ZW1zID0gZXhwYW5kZWRJdGVtc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFmdGVyIGNoYW5nZXMgdG8gdGl0bGUgY29uZmlnLCB3ZSBhZGQgYSBoZWFkZXJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfG51bGx9IG9sZFZhbHVlXG4gICAgICovXG4gICAgYWZ0ZXJTZXRUaXRsZSh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgbGV0IG1lICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgdGl0bGVFbCA9IG1lLmRvd24oe2ZsYWc6ICd0aXRsZUVsJ30pO1xuXG4gICAgICAgIGlmICh2YWx1ZSAmJiAhdGl0bGVFbCkge1xuICAgICAgICAgICAgbWUuaGVhZGVycyA9IFt7XG4gICAgICAgICAgICAgICAgYmFzZUNsczogJ25lby1hY2NvcmRpb24tdGl0bGUnLFxuICAgICAgICAgICAgICAgIGNscyAgICA6IFsnbmVvLWFjY29yZGlvbi10aXRsZSddLFxuICAgICAgICAgICAgICAgIGRvY2sgICA6ICd0b3AnLFxuICAgICAgICAgICAgICAgIHRleHQgICA6IHZhbHVlXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGJ5IGFjY29yZGlvbiBpdGVtcy5cbiAgICAgKiBDaGVja3MgZm9yIG1heEV4cGFuZGVkSXRlbXNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgZGF0YVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgICAgICBkYXRhLmV4cGFuZGVkIG5ld1N0YXRlXG4gICAgICogQHBhcmFtIHtOZW8uY29udGFpbmVyLkFjY29yZGlvbkl0ZW19IGRhdGEudGFyZ2V0ICAgYWNjb3JkaW9uIGl0ZW1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgY2hpbGRFeHBhbmRDaGFuZ2UoZGF0YSkge1xuICAgICAgICBsZXQgbWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIHtleHBhbmRlZEl0ZW1zLCBtYXhFeHBhbmRlZEl0ZW1zfSA9IG1lLFxuICAgICAgICAgICAge2V4cGFuZGVkLCB0YXJnZXR9ICAgICAgICAgICAgICAgID0gZGF0YSxcbiAgICAgICAgICAgIGN1ck5vT3Blbkl0ZW1zICAgICAgICAgICAgICAgICAgICA9IGV4cGFuZGVkSXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgdGFyZ2V0SWQgICAgICAgICAgICAgICAgICAgICAgICAgID0gdGFyZ2V0LmlkO1xuXG4gICAgICAgIGlmIChleHBhbmRlZFxuICAgICAgICAgICAgJiYgbWF4RXhwYW5kZWRJdGVtcyAhPT0gMFxuICAgICAgICAgICAgJiYgY3VyTm9PcGVuSXRlbXMgPT09IG1heEV4cGFuZGVkSXRlbXNcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBOZW8uZ2V0KGV4cGFuZGVkSXRlbXNbMF0pLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBOZW9BcnJheS5yZW1vdmUoZXhwYW5kZWRJdGVtcywgZXhwYW5kZWRJdGVtc1swXSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRhcmdldC5leHBhbmRlZCA9IGV4cGFuZGVkO1xuICAgICAgICBOZW9BcnJheS50b2dnbGUoZXhwYW5kZWRJdGVtcywgdGFyZ2V0SWQpO1xuXG4gICAgICAgIG1lLmV4cGFuZGVkSXRlbXMgPSBleHBhbmRlZEl0ZW1zXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhBY2NvcmRpb24pO1xuIiwiaW1wb3J0IEJhc2UgICAgIGZyb20gJy4vQmFzZS5tanMnO1xuaW1wb3J0IFRvb2xiYXIgIGZyb20gJy4uL3Rvb2xiYXIvQmFzZS5tanMnO1xuaW1wb3J0IE5lb0FycmF5IGZyb20gJy4uL3V0aWwvQXJyYXkubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmNvbnRhaW5lci5BY2NvcmRpb25JdGVtXG4gKiBAZXh0ZW5kcyBOZW8uY29udGFpbmVyLkJhc2VcbiAqL1xuY2xhc3MgQWNjb3JkaW9uQ29udGFpbmVyIGV4dGVuZHMgQmFzZSB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8uY29udGFpbmVyLkFjY29yZGlvbkl0ZW0nXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5jb250YWluZXIuQWNjb3JkaW9uSXRlbScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSdhY2NvcmRpb25pdGVtJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBudHlwZTogJ2FjY29yZGlvbml0ZW0nLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGJhc2VDbHM9WyduZW8tYWNjb3JkaW9uLWNvbXBvbmVudCddXG4gICAgICAgICAqL1xuICAgICAgICBiYXNlQ2xzOiBbJ25lby1hY2NvcmRpb24taXRlbSddLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRpdGlvbmFsIGNscyBmb3IgdGhlIGFycm93LCBpbiBjYXNlIHlvdSBuZWVkIHRvIGN1c3RvbWl6ZSBpdFxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXXxTdHJpbmd8bnVsbH0gYXJyb3dDbHM9bnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgYXJyb3dDbHM6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFeHBhbmQgb3IgY29sbGFwc2UgKHRydWUvZmFsc2UpIHRoaXMgdmFsdWVcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gZXhwYW5kZWQ9ZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIGV4cGFuZGVkXzogZmFsc2UsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjbHMgZm9yIHRoZSBpY29uIGluIGZyb250IG9mIHRoZSB0aXRsZVxuICAgICAgICAgKiBNYXkgYmUgZW1wdHkuICdmYScgaXMgcHJlc2V0LFxuICAgICAgICAgKiBzbyBpZiB5b3UgdXNlIGZvbnRhd2Vzb21lIHlvdSBkbyBub3QgaGF2ZSB0byBhZGQgaXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfFN0cmluZ3xudWxsfSBpY29uQ2xzPW51bGxcbiAgICAgICAgICovXG4gICAgICAgIGljb25DbHNfOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogVGl0bGUgZm9yIEhlYWRlcmJhclxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd8bnVsbH0gdGl0bGU9bnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgdGl0bGVfOiBudWxsXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUnVucyBhZnRlciBhZnRlclNldFRpdGxlLCBzbyB0aGF0IHRoZSB0aXRsZSBjb21wb25lbnQgZG9lcyBub3QgZXhpc3QgcHJpb3IuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGNyZWF0ZUl0ZW1zKCkge1xuICAgICAgICBsZXQgbWUgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgYXJyb3dDbHMgPSBtZS5hcnJvd0NscyB8fCAnZmEtY2FyZXQtZG93bicsXG4gICAgICAgICAgICBpY29uQ2xzICA9IG1lLmljb25DbHMgIHx8IFsnbm8taWNvbiddLFxuICAgICAgICAgICAge2l0ZW1zLCB0aXRsZX0gPSBtZSxcbiAgICAgICAgICAgIGhlYWRlciwgY29udGVudDtcblxuICAgICAgICBpZiAoIU5lby5pc0FycmF5KGljb25DbHMpKSB7XG4gICAgICAgICAgICBpY29uQ2xzID0gaWNvbkNscy5zcGxpdCgnICcpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIU5lby5pc0FycmF5KGFycm93Q2xzKSkge1xuICAgICAgICAgICAgYXJyb3dDbHMgPSBhcnJvd0Nscy5zcGxpdCgnICcpXG4gICAgICAgIH1cblxuICAgICAgICBoZWFkZXIgPSBOZW8uY3JlYXRlKHtcbiAgICAgICAgICAgIG1vZHVsZTogVG9vbGJhcixcbiAgICAgICAgICAgIGl0ZW1zIDogW3tcbiAgICAgICAgICAgICAgICBmbGFnICAgOiAnaWNvbkVsJyxcbiAgICAgICAgICAgICAgICBudHlwZSAgOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgICAgICBiYXNlQ2xzOiBbJ25lby1hY2NvcmRpb24taGVhZGVyLWljb24nXSxcbiAgICAgICAgICAgICAgICBjbHMgICAgOiBbJ2ZhJywgLi4uaWNvbkNsc10sXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZmxhZyAgIDogJ3RpdGxlRWwnLFxuICAgICAgICAgICAgICAgIG50eXBlICA6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgICAgIGJhc2VDbHM6IFsnbmVvLWFjY29yZGlvbi1oZWFkZXItdGl0bGUnXSxcbiAgICAgICAgICAgICAgICBodG1sICAgOiB0aXRsZVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG50eXBlICA6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgICAgIGJhc2VDbHM6IFsnbmVvLWFjY29yZGlvbi1oZWFkZXItYXJyb3cnXSxcbiAgICAgICAgICAgICAgICBjbHMgICAgOiBbJ2ZhJywgLi4uYXJyb3dDbHNdXG4gICAgICAgICAgICB9XVxuICAgICAgICB9KTtcblxuICAgICAgICBjb250ZW50ID0ge1xuICAgICAgICAgICAgbnR5cGUgIDogJ2NvbnRhaW5lcicsXG4gICAgICAgICAgICBmbGFnICAgOiAnY29udGVudCcsXG4gICAgICAgICAgICBiYXNlQ2xzOiBbJ25lby1hY2NvcmRpb24tY29udGVudCcsICduZW8tY29udGFpbmVyJ10sXG4gICAgICAgICAgICBpdGVtcyAgOiBpdGVtc1xuICAgICAgICB9O1xuXG4gICAgICAgIG1lLml0ZW1zID0gW2hlYWRlciwgY29udGVudF07XG5cbiAgICAgICAgc3VwZXIuY3JlYXRlSXRlbXMoKTtcblxuICAgICAgICBtZS5hZGREb21MaXN0ZW5lcnMoW1xuICAgICAgICAgICAge2NsaWNrOiBtZS5vbkV4cGFuZENsaWNrLCBkZWxlZ2F0ZTogJ25lby1hY2NvcmRpb24taGVhZGVyLWFycm93J31cbiAgICAgICAgXSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZnRlciBjaGFuZ2luZyBleHBhbmRlZCwgd2UgZXhwYW5kL2NvbGxhcHNlIHZpYSBDU1NcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzRXhwYW5kZWRcbiAgICAgKi9cbiAgICBhZnRlclNldEV4cGFuZGVkKGlzRXhwYW5kZWQpIHtcbiAgICAgICAgbGV0IG1lICAgID0gdGhpcyxcbiAgICAgICAgICAgIHtjbHN9ID0gbWUsXG4gICAgICAgICAgICBmbiAgICA9IGlzRXhwYW5kZWQgPyAnYWRkJyA6ICdyZW1vdmUnO1xuXG4gICAgICAgIE5lb0FycmF5W2ZuXShjbHMsICduZW8tZXhwYW5kZWQnKTtcbiAgICAgICAgbWUuY2xzID0gY2xzO1xuXG4gICAgICAgIC8vIEVuc3VyZSBzY3JvbGxiYXJzIGFyZSBub3QgZmxpcHBpbmcgaW4gYW5kIG91dFxuICAgICAgICBtZS50aW1lb3V0KDQ1MCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBOZW9BcnJheVtmbl0oY2xzLCAnbmVvLXNjcm9sbGFibGUnKTtcbiAgICAgICAgICAgIG1lLmNscyA9IGNsc1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIHRpdGxlIGlzIHNldCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBjcmVhdGVkLFxuICAgICAqIHNvIHdlIGhhdmUgdG8gY2hlY2sgaWYgaXQgZXhpc3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmdbXXxTdHJpbmd9IG5ld1ZhbHVlXG4gICAgICogQHBhcmFtIHtTdHJpbmdbXX0gb2xkVmFsdWVcbiAgICAgKi9cbiAgICBhZnRlclNldEljb25DbHMobmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBpY29uRWwgPSB0aGlzLmRvd24oe2ZsYWc6ICdpY29uRWwnfSk7XG5cbiAgICAgICAgaWYgKGljb25FbCkge1xuICAgICAgICAgICAgbGV0IGNscyA9IGljb25FbC5jbHM7XG5cbiAgICAgICAgICAgIGlmICghTmVvLmlzQXJyYXkobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBuZXdWYWx1ZS5zcGxpdCgnICcpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIE5lb0FycmF5LnJlbW92ZShjbHMsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIE5lb0FycmF5LmFkZChjbHMsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIGljb25FbC5jbHMgPSBjbHNcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIHRpdGxlIGlzIHNldCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBjcmVhdGVkLFxuICAgICAqIHNvIHdlIGhhdmUgdG8gY2hlY2sgaWYgaXQgZXhpc3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5ld1ZhbHVlXG4gICAgICovXG4gICAgYWZ0ZXJTZXRUaXRsZShuZXdWYWx1ZSkge1xuICAgICAgICBsZXQgdGl0bGVFbCA9IHRoaXMuZG93bih7ZmxhZzogJ3RpdGxlRWwnfSk7XG5cbiAgICAgICAgaWYgKHRpdGxlRWwpIHtcbiAgICAgICAgICAgIHRpdGxlRWwuaHRtbCA9IG5ld1ZhbHVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgcGFyZW50IGlzIGFuIEFjY29yZGlvbkNvbnRhaW5lciwgd2UgcnVuIHRoZSBwYXJlbnQgZnVuY3Rpb24uXG4gICAgICogT3RoZXJ3aXNlIHdlIHNldCB0aGlzLmV4cGFuZGVkIHRvIHRoZSBuZXcgdmFsdWUuXG4gICAgICovXG4gICAgb25FeHBhbmRDbGljaygpIHtcbiAgICAgICAgbGV0IG1lICAgICAgICAgICA9IHRoaXMsXG4gICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBtZS5leHBhbmRlZCxcbiAgICAgICAgICAgIHBhcmVudCAgICAgICA9IG1lLnVwKCdhY2NvcmRpb24nKTtcblxuICAgICAgICBpZiAocGFyZW50Lm50eXBlID09PSAnYWNjb3JkaW9uJykge1xuICAgICAgICAgICAgcGFyZW50LmNoaWxkRXhwYW5kQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICBleHBhbmRlZDogIWN1cnJlbnRTdGF0ZSxcbiAgICAgICAgICAgICAgICB0YXJnZXQgIDogbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZS5leHBhbmRlZCA9ICFjdXJyZW50U3RhdGVcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoQWNjb3JkaW9uQ29udGFpbmVyKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==