"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-examples_table_container_app_mjs"],{

/***/ "./examples/table/container/MainContainer.mjs":
/*!****************************************************!*\
  !*** ./examples/table/container/MainContainer.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/button/Base.mjs */ "./src/button/Base.mjs");
/* harmony import */ var _src_selection_table_CellColumnModel_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/selection/table/CellColumnModel.mjs */ "./src/selection/table/CellColumnModel.mjs");
/* harmony import */ var _src_selection_table_CellColumnRowModel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/selection/table/CellColumnRowModel.mjs */ "./src/selection/table/CellColumnRowModel.mjs");
/* harmony import */ var _src_selection_table_CellModel_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/selection/table/CellModel.mjs */ "./src/selection/table/CellModel.mjs");
/* harmony import */ var _src_selection_table_CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../src/selection/table/CellRowModel.mjs */ "./src/selection/table/CellRowModel.mjs");
/* harmony import */ var _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../src/form/field/CheckBox.mjs */ "./src/form/field/CheckBox.mjs");
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_selection_table_ColumnModel_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../src/selection/table/ColumnModel.mjs */ "./src/selection/table/ColumnModel.mjs");
/* harmony import */ var _MainStore_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MainStore.mjs */ "./examples/table/container/MainStore.mjs");
/* harmony import */ var _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../src/form/field/Number.mjs */ "./src/form/field/Number.mjs");
/* harmony import */ var _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../src/form/field/Radio.mjs */ "./src/form/field/Radio.mjs");
/* harmony import */ var _src_selection_table_RowModel_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../src/selection/table/RowModel.mjs */ "./src/selection/table/RowModel.mjs");
/* harmony import */ var _src_table_Container_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../src/table/Container.mjs */ "./src/table/Container.mjs");














/**
 * @class Neo.examples.table.container.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_6__["default"] {
    static config = {
        className           : 'Neo.examples.table.container.MainContainer',
        autoMount           : true,
        configItemLabelWidth: 130,
        configPanelFlex     : 1.5,
        exampleComponentFlex: 3,
        layout              : {ntype: 'hbox', align: 'stretch'}
    }

    createConfigurationComponents() {
        let me = this;

        const selectionModelRadioDefaults = {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_10__["default"],
            hideValueLabel: false,
            labelText     : '',
            name          : 'selectionModel',
            width         : 350
        };

        return [{
            module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_9__["default"],
            labelText: 'height',
            listeners: {change: me.onConfigChange.bind(me, 'height')},
            maxValue : 800,
            minValue : 225,
            stepSize : 5,
            value    : me.exampleComponent.height
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-cellmodel',
            labelText     : 'selectionModel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_CellModel_mjs__WEBPACK_IMPORTED_MODULE_3__["default"])},
            style         : {marginTop: '10px'},
            valueLabelText: 'Cell'
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-columnmodel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_ColumnModel_mjs__WEBPACK_IMPORTED_MODULE_7__["default"])},
            valueLabelText: 'Column'
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-rowmodel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_RowModel_mjs__WEBPACK_IMPORTED_MODULE_11__["default"])},
            valueLabelText: 'Row'
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-cellcolumnmodel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_CellColumnModel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"])},
            valueLabelText: 'Cell & Column'
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-cellrowmodel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_4__["default"])},
            valueLabelText: 'Cell & Row'
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-cellcolumnrowmodel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_CellColumnRowModel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"])},
            valueLabelText: 'Cell & Column & Row'
        }, {
            module   : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_5__["default"],
            checked  : me.exampleComponent.sortable,
            labelText: 'sortable',
            listeners: {change: me.onConfigChange.bind(me, 'sortable')},
            style    : {marginTop: '10px'}
        }, {
            module   : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_5__["default"],
            checked  : false,
            labelText: 'Fit width',
            listeners: {
                change({ value }) {
                    const { style } = me.exampleComponent;

                    if (value) {
                        style.width = '100%';
                        style.tableLayout = 'fixed';
                    } else {
                        style.width = '';
                        style.tableLayout = '';
                    }

                    me.exampleComponent.style = style;
                    me.exampleComponent.update();
                }
            },
            style: {marginTop: '10px'}
        }]
    }

    /**
     * @returns {Neo.table.Container}
     */
    createExampleComponent() {
        return Neo.create(_src_table_Container_mjs__WEBPACK_IMPORTED_MODULE_12__["default"], {
            id            : 'myTableStoreContainer',
            selectionModel: _src_selection_table_CellModel_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            store         : _MainStore_mjs__WEBPACK_IMPORTED_MODULE_8__["default"],

            columns: [
                {dataField: 'firstname', text: 'Firstname'},
                {dataField: 'lastname',  text: 'Lastname'},
                {dataField: 'githubId',  text: 'Github Id'},
                {dataField: 'country',   text: 'Country'},
                {
                    dataField: 'edit',
                    text     : 'Edit Action',
                    renderer: ({ column, index }) => {
                        const
                            widgetId = `${column.id}-widget-${index}`,
                            button = (column.widgetMap || (column.widgetMap = {}))[widgetId] || (column.widgetMap[widgetId] = Neo.create({
                                module  : _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
                                appName : this.appName,
                                handler : this.editButtonHandler,
                                parentId: 'myTableStoreContainer',
                                text    : 'Edit'
                            }));

                        return button.vdom
                    }
                },
                {
                    dataField: 'menu',
                    text     : 'Menu',
                    renderer({ column, record, index }) {
                        const
                            widgetId = `${column.id}-widget-${index}`,
                            button = (column.widgetMap || (column.widgetMap = {}))[widgetId] || (column.widgetMap[widgetId] = Neo.create('Neo.button.Base', {
                                ntype   : 'button',
                                appName : this.appName,
                                text    : '\u22ee',
                                menu    : {
                                    items : [{
                                        text : 'Menu option 1'
                                    }, {
                                        text : 'Menu option 2'
                                    }, {
                                        text : 'Menu option 3'
                                    }, {
                                        text : 'Menu option 4'
                                    }]
                                }
                            }));

                            return button.vdom
                    }
                }
            ]
        })
    }

    /**
     * @param {Object} data
     */
    editButtonHandler(data) {
        console.log(data)
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainer));


/***/ }),

/***/ "./examples/table/container/MainModel.mjs":
/*!************************************************!*\
  !*** ./examples/table/container/MainModel.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/data/Model.mjs */ "./src/data/Model.mjs");


/**
 * @class Neo.examples.table.container.MainModel
 * @extends Neo.data.Model
 */
class MainModel extends _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        className: 'Neo.examples.table.container.MainModel',

        fields: [{
            name: 'colspan',
            type: 'Object'
        }, {
            name: 'country',
            type: 'String'
        }, {
            name: 'firstname',
            type: 'String'
        }, {
            name: 'githubId',
            type: 'String'
        }, {
            name: 'lastname',
            type: 'String'
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainModel));


/***/ }),

/***/ "./examples/table/container/MainStore.mjs":
/*!************************************************!*\
  !*** ./examples/table/container/MainStore.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _MainModel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainModel.mjs */ "./examples/table/container/MainModel.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/data/Store.mjs */ "./src/data/Store.mjs");



/**
 * @class Neo.examples.table.container.MainStore
 * @extends Neo.data.Store
 */
class MainStore extends _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        className  : 'Neo.examples.table.container.MainStore',
        keyProperty: 'githubId',
        model      : _MainModel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],

        data: [{
            country  : 'Germany',
            firstname: 'Tobias',
            githubId : 'tobiu',
            lastname : 'Uhlig'
        }, {
            country  : 'USA',
            firstname: 'Rich',
            githubId : 'rwaters',
            lastname : 'Waters'
        }, {
            country  : 'Germany',
            firstname: 'Nils',
            githubId : 'mrsunshine',
            lastname : 'Dehl'
        }, {
            country  : 'USA',
            firstname: 'Gerard',
            githubId : 'camtnbikerrwc',
            lastname : 'Horan'
        }, {
            country  : 'Slovakia',
            firstname: 'Jozef',
            githubId : 'jsakalos',
            lastname : 'Sakalos'
        }, {
            country  : 'Germany',
            firstname: 'Bastian',
            githubId : 'bhaustein',
            lastname : 'Haustein'
        }, {
            colspan  : {firstname: 3},
            country  : 'Germany',
            firstname: 'Colspan 3',
            githubId : 'random'
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainStore));


/***/ }),

/***/ "./examples/table/container/app.mjs":
/*!******************************************!*\
  !*** ./examples/table/container/app.mjs ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/table/container/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Neo.examples.table.container'
});


/***/ }),

/***/ "./src/selection/table/CellColumnRowModel.mjs":
/*!****************************************************!*\
  !*** ./src/selection/table/CellColumnRowModel.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CellRowModel.mjs */ "./src/selection/table/CellRowModel.mjs");
/* harmony import */ var _ColumnModel_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ColumnModel.mjs */ "./src/selection/table/ColumnModel.mjs");
/* harmony import */ var _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../util/VDom.mjs */ "./src/util/VDom.mjs");




/**
 * @class Neo.selection.table.CellColumnRowModel
 * @extends Neo.selection.table.CellRowModel
 */
class CellColumnRowModel extends _CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.selection.table.CellColumnRowModel'
         * @protected
         */
        className: 'Neo.selection.table.CellColumnRowModel',
        /**
         * @member {String} ntype='selection-table-cellcolumnrowmodel'
         * @protected
         */
        ntype: 'selection-table-cellcolumnrowmodel',
        /**
         * @member {String} cls='neo-selection-cellcolumnrowmodel'
         * @protected
         */
        cls: 'neo-selection-cellcolumnrowmodel',
        /**
         * @member {String} selectedColumnCellCls='selected-column-cell'
         * @protected
         */
        selectedColumnCellCls: 'selected-column-cell',
        /**
         * @member {Array|null} selectedColumnCellIds=null
         * @protected
         */
        selectedColumnCellIds: null
    }

    /**
     * @param {Object} config
     */
    construct(config) {
        super.construct(config);

        this.selectedColumnCellIds = []
    }

    /**
     * @param {Boolean} [silent] true to prevent a vdom update
     */
    deselectAllCells(silent) {
        let me      = this,
            cellIds = [...me.selectedColumnCellIds],
            {view}  = me;

        cellIds.forEach(cellId => {
            me.deselect(cellId, true, me.selectedColumnCellIds, me.selectedColumnCellCls)
        });

        !silent && view.update()
    }

    /**
     * @param {Object} data
     */
    onCellClick(data) {
        let me = this,
            id = _ColumnModel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].getCellId(data.path),
            columnNodeIds, index, tbodyNode;

        if (id) {
            index         = _ColumnModel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].getColumnIndex(id, me.view.items[0].items);
            tbodyNode     = _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].findVdomChild(me.view.vdom, {tag: 'tbody'}).vdom;
            columnNodeIds = _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].getColumnNodesIds(tbodyNode, index);

            me.deselectAllCells(true);
            me.select(columnNodeIds, me.selectedColumnCellIds, me.selectedColumnCellCls)
        }

        super.onCellClick(data)
    }

    /**
     * @param {Object} data
     * @param {Number} step
     */
    onNavKeyColumn(data, step) {
        let me            = this,
            idArray       = _ColumnModel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].getCellId(data.path).split('__'),
            currentColumn = idArray[2],
            {view}        = me,
            dataFields    = view.columns.map(c => c.dataField),
            newIndex      = (dataFields.indexOf(currentColumn) + step) % dataFields.length,
            columnNodeIds, tbodyNode;

        while (newIndex < 0) {
            newIndex += dataFields.length
        }

        tbodyNode     = _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].findVdomChild(me.view.vdom, {tag: 'tbody'}).vdom;
        columnNodeIds = _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].getColumnNodesIds(tbodyNode, newIndex);

        me.deselectAllCells(true);
        me.select(columnNodeIds, me.selectedColumnCellIds, me.selectedColumnCellCls);

        super.onNavKeyColumn(data, step)
    }

    /**
     *
     */
    unregister() {
        this.deselectAllCells();
        super.unregister()
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(CellColumnRowModel));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWV4YW1wbGVzX3RhYmxlX2NvbnRhaW5lcl9hcHBfbWpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlFO0FBQ29CO0FBQ0c7QUFDVDtBQUNHO0FBQ1Q7QUFDTDtBQUNhO0FBQzdCO0FBQ21CO0FBQ0Q7QUFDUTtBQUNUOztBQUVyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrRUFBcUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9COztBQUVBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIsa0VBQUs7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1QixrRUFBVztBQUNsQztBQUNBLHdCQUF3Qiw2Q0FBNkM7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFvRCwwRUFBUyxFQUFFO0FBQzVGLDZCQUE2QixrQkFBa0I7QUFDL0M7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDZCQUE2QixvREFBb0QsNEVBQVcsRUFBRTtBQUM5RjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFvRCwwRUFBUSxFQUFFO0FBQzNGO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw2QkFBNkIsb0RBQW9ELGdGQUFlLEVBQUU7QUFDbEc7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDZCQUE2QixvREFBb0QsNkVBQVksRUFBRTtBQUMvRjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFvRCxtRkFBa0IsRUFBRTtBQUNyRztBQUNBLFNBQVM7QUFDVCx1QkFBdUIsb0VBQVE7QUFDL0I7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBK0M7QUFDdkUsd0JBQXdCO0FBQ3hCLFNBQVM7QUFDVCx1QkFBdUIsb0VBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLE9BQU87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OztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3REFBVztBQUM1Qjs7QUFFQTtBQUNBLDRCQUE0Qix3REFBVztBQUN2Qyw0QkFBNEIsc0RBQVEsOEJBQThCLGFBQWE7QUFDL0UsNEJBQTRCLHNEQUFROztBQUVwQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHdEQUFXO0FBQ3ZDO0FBQ0EsYUFBYSxhQUFhO0FBQzFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCLHNEQUFRLDhCQUE4QixhQUFhO0FBQzNFLHdCQUF3QixzREFBUTs7QUFFaEM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsa0NBQWtDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZW8ubWpzLy4vZXhhbXBsZXMvdGFibGUvY29udGFpbmVyL01haW5Db250YWluZXIubWpzIiwid2VicGFjazovL25lby5tanMvLi9leGFtcGxlcy90YWJsZS9jb250YWluZXIvTWFpbk1vZGVsLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vZXhhbXBsZXMvdGFibGUvY29udGFpbmVyL01haW5TdG9yZS5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL3RhYmxlL2NvbnRhaW5lci9hcHAubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvc2VsZWN0aW9uL3RhYmxlL0NlbGxDb2x1bW5Sb3dNb2RlbC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJ1dHRvbiAgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvYnV0dG9uL0Jhc2UubWpzJztcbmltcG9ydCBDZWxsQ29sdW1uTW9kZWwgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL3NlbGVjdGlvbi90YWJsZS9DZWxsQ29sdW1uTW9kZWwubWpzJztcbmltcG9ydCBDZWxsQ29sdW1uUm93TW9kZWwgICAgZnJvbSAnLi4vLi4vLi4vc3JjL3NlbGVjdGlvbi90YWJsZS9DZWxsQ29sdW1uUm93TW9kZWwubWpzJztcbmltcG9ydCBDZWxsTW9kZWwgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL3NlbGVjdGlvbi90YWJsZS9DZWxsTW9kZWwubWpzJztcbmltcG9ydCBDZWxsUm93TW9kZWwgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL3NlbGVjdGlvbi90YWJsZS9DZWxsUm93TW9kZWwubWpzJztcbmltcG9ydCBDaGVja2JveCAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvQ2hlY2tCb3gubWpzJztcbmltcG9ydCBDb25maWd1cmF0aW9uVmlld3BvcnQgZnJvbSAnLi4vLi4vQ29uZmlndXJhdGlvblZpZXdwb3J0Lm1qcyc7XG5pbXBvcnQgQ29sdW1uTW9kZWwgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9zZWxlY3Rpb24vdGFibGUvQ29sdW1uTW9kZWwubWpzJztcbmltcG9ydCBNYWluU3RvcmUgICAgICAgICAgICAgZnJvbSAnLi9NYWluU3RvcmUubWpzJztcbmltcG9ydCBOdW1iZXJGaWVsZCAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvTnVtYmVyLm1qcyc7XG5pbXBvcnQgUmFkaW8gICAgICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL1JhZGlvLm1qcyc7XG5pbXBvcnQgUm93TW9kZWwgICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9zZWxlY3Rpb24vdGFibGUvUm93TW9kZWwubWpzJztcbmltcG9ydCBUYWJsZUNvbnRhaW5lciAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL3RhYmxlL0NvbnRhaW5lci5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8uZXhhbXBsZXMudGFibGUuY29udGFpbmVyLk1haW5Db250YWluZXJcbiAqIEBleHRlbmRzIE5lby5leGFtcGxlcy5Db25maWd1cmF0aW9uVmlld3BvcnRcbiAqL1xuY2xhc3MgTWFpbkNvbnRhaW5lciBleHRlbmRzIENvbmZpZ3VyYXRpb25WaWV3cG9ydCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgY2xhc3NOYW1lICAgICAgICAgICA6ICdOZW8uZXhhbXBsZXMudGFibGUuY29udGFpbmVyLk1haW5Db250YWluZXInLFxuICAgICAgICBhdXRvTW91bnQgICAgICAgICAgIDogdHJ1ZSxcbiAgICAgICAgY29uZmlnSXRlbUxhYmVsV2lkdGg6IDEzMCxcbiAgICAgICAgY29uZmlnUGFuZWxGbGV4ICAgICA6IDEuNSxcbiAgICAgICAgZXhhbXBsZUNvbXBvbmVudEZsZXg6IDMsXG4gICAgICAgIGxheW91dCAgICAgICAgICAgICAgOiB7bnR5cGU6ICdoYm94JywgYWxpZ246ICdzdHJldGNoJ31cbiAgICB9XG5cbiAgICBjcmVhdGVDb25maWd1cmF0aW9uQ29tcG9uZW50cygpIHtcbiAgICAgICAgbGV0IG1lID0gdGhpcztcblxuICAgICAgICBjb25zdCBzZWxlY3Rpb25Nb2RlbFJhZGlvRGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgIDogUmFkaW8sXG4gICAgICAgICAgICBoaWRlVmFsdWVMYWJlbDogZmFsc2UsXG4gICAgICAgICAgICBsYWJlbFRleHQgICAgIDogJycsXG4gICAgICAgICAgICBuYW1lICAgICAgICAgIDogJ3NlbGVjdGlvbk1vZGVsJyxcbiAgICAgICAgICAgIHdpZHRoICAgICAgICAgOiAzNTBcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgIG1vZHVsZSAgIDogTnVtYmVyRmllbGQsXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICdoZWlnaHQnLFxuICAgICAgICAgICAgbGlzdGVuZXJzOiB7Y2hhbmdlOiBtZS5vbkNvbmZpZ0NoYW5nZS5iaW5kKG1lLCAnaGVpZ2h0Jyl9LFxuICAgICAgICAgICAgbWF4VmFsdWUgOiA4MDAsXG4gICAgICAgICAgICBtaW5WYWx1ZSA6IDIyNSxcbiAgICAgICAgICAgIHN0ZXBTaXplIDogNSxcbiAgICAgICAgICAgIHZhbHVlICAgIDogbWUuZXhhbXBsZUNvbXBvbmVudC5oZWlnaHRcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLi4uc2VsZWN0aW9uTW9kZWxSYWRpb0RlZmF1bHRzLFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IG1lLmV4YW1wbGVDb21wb25lbnQuc2VsZWN0aW9uTW9kZWwubnR5cGUgPT09ICdzZWxlY3Rpb24tdGFibGUtY2VsbG1vZGVsJyxcbiAgICAgICAgICAgIGxhYmVsVGV4dCAgICAgOiAnc2VsZWN0aW9uTW9kZWwnLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uUmFkaW9DaGFuZ2UuYmluZChtZSwgJ3NlbGVjdGlvbk1vZGVsJywgQ2VsbE1vZGVsKX0sXG4gICAgICAgICAgICBzdHlsZSAgICAgICAgIDoge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgICAgIHZhbHVlTGFiZWxUZXh0OiAnQ2VsbCdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLi4uc2VsZWN0aW9uTW9kZWxSYWRpb0RlZmF1bHRzLFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IG1lLmV4YW1wbGVDb21wb25lbnQuc2VsZWN0aW9uTW9kZWwubnR5cGUgPT09ICdzZWxlY3Rpb24tdGFibGUtY29sdW1ubW9kZWwnLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uUmFkaW9DaGFuZ2UuYmluZChtZSwgJ3NlbGVjdGlvbk1vZGVsJywgQ29sdW1uTW9kZWwpfSxcbiAgICAgICAgICAgIHZhbHVlTGFiZWxUZXh0OiAnQ29sdW1uJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICAuLi5zZWxlY3Rpb25Nb2RlbFJhZGlvRGVmYXVsdHMsXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogbWUuZXhhbXBsZUNvbXBvbmVudC5zZWxlY3Rpb25Nb2RlbC5udHlwZSA9PT0gJ3NlbGVjdGlvbi10YWJsZS1yb3dtb2RlbCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25SYWRpb0NoYW5nZS5iaW5kKG1lLCAnc2VsZWN0aW9uTW9kZWwnLCBSb3dNb2RlbCl9LFxuICAgICAgICAgICAgdmFsdWVMYWJlbFRleHQ6ICdSb3cnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIC4uLnNlbGVjdGlvbk1vZGVsUmFkaW9EZWZhdWx0cyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBtZS5leGFtcGxlQ29tcG9uZW50LnNlbGVjdGlvbk1vZGVsLm50eXBlID09PSAnc2VsZWN0aW9uLXRhYmxlLWNlbGxjb2x1bW5tb2RlbCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25SYWRpb0NoYW5nZS5iaW5kKG1lLCAnc2VsZWN0aW9uTW9kZWwnLCBDZWxsQ29sdW1uTW9kZWwpfSxcbiAgICAgICAgICAgIHZhbHVlTGFiZWxUZXh0OiAnQ2VsbCAmIENvbHVtbidcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLi4uc2VsZWN0aW9uTW9kZWxSYWRpb0RlZmF1bHRzLFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IG1lLmV4YW1wbGVDb21wb25lbnQuc2VsZWN0aW9uTW9kZWwubnR5cGUgPT09ICdzZWxlY3Rpb24tdGFibGUtY2VsbHJvd21vZGVsJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vblJhZGlvQ2hhbmdlLmJpbmQobWUsICdzZWxlY3Rpb25Nb2RlbCcsIENlbGxSb3dNb2RlbCl9LFxuICAgICAgICAgICAgdmFsdWVMYWJlbFRleHQ6ICdDZWxsICYgUm93J1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICAuLi5zZWxlY3Rpb25Nb2RlbFJhZGlvRGVmYXVsdHMsXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogbWUuZXhhbXBsZUNvbXBvbmVudC5zZWxlY3Rpb25Nb2RlbC5udHlwZSA9PT0gJ3NlbGVjdGlvbi10YWJsZS1jZWxsY29sdW1ucm93bW9kZWwnLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uUmFkaW9DaGFuZ2UuYmluZChtZSwgJ3NlbGVjdGlvbk1vZGVsJywgQ2VsbENvbHVtblJvd01vZGVsKX0sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ0NlbGwgJiBDb2x1bW4gJiBSb3cnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgIDogQ2hlY2tib3gsXG4gICAgICAgICAgICBjaGVja2VkICA6IG1lLmV4YW1wbGVDb21wb25lbnQuc29ydGFibGUsXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICdzb3J0YWJsZScsXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtjaGFuZ2U6IG1lLm9uQ29uZmlnQ2hhbmdlLmJpbmQobWUsICdzb3J0YWJsZScpfSxcbiAgICAgICAgICAgIHN0eWxlICAgIDoge21hcmdpblRvcDogJzEwcHgnfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICA6IENoZWNrYm94LFxuICAgICAgICAgICAgY2hlY2tlZCAgOiBmYWxzZSxcbiAgICAgICAgICAgIGxhYmVsVGV4dDogJ0ZpdCB3aWR0aCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgICAgICBjaGFuZ2UoeyB2YWx1ZSB9KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc3R5bGUgfSA9IG1lLmV4YW1wbGVDb21wb25lbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLnRhYmxlTGF5b3V0ID0gJ2ZpeGVkJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS50YWJsZUxheW91dCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbWUuZXhhbXBsZUNvbXBvbmVudC5zdHlsZSA9IHN0eWxlO1xuICAgICAgICAgICAgICAgICAgICBtZS5leGFtcGxlQ29tcG9uZW50LnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDogJzEwcHgnfVxuICAgICAgICB9XVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtOZW8udGFibGUuQ29udGFpbmVyfVxuICAgICAqL1xuICAgIGNyZWF0ZUV4YW1wbGVDb21wb25lbnQoKSB7XG4gICAgICAgIHJldHVybiBOZW8uY3JlYXRlKFRhYmxlQ29udGFpbmVyLCB7XG4gICAgICAgICAgICBpZCAgICAgICAgICAgIDogJ215VGFibGVTdG9yZUNvbnRhaW5lcicsXG4gICAgICAgICAgICBzZWxlY3Rpb25Nb2RlbDogQ2VsbE1vZGVsLFxuICAgICAgICAgICAgc3RvcmUgICAgICAgICA6IE1haW5TdG9yZSxcblxuICAgICAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgICAgICAgIHtkYXRhRmllbGQ6ICdmaXJzdG5hbWUnLCB0ZXh0OiAnRmlyc3RuYW1lJ30sXG4gICAgICAgICAgICAgICAge2RhdGFGaWVsZDogJ2xhc3RuYW1lJywgIHRleHQ6ICdMYXN0bmFtZSd9LFxuICAgICAgICAgICAgICAgIHtkYXRhRmllbGQ6ICdnaXRodWJJZCcsICB0ZXh0OiAnR2l0aHViIElkJ30sXG4gICAgICAgICAgICAgICAge2RhdGFGaWVsZDogJ2NvdW50cnknLCAgIHRleHQ6ICdDb3VudHJ5J30sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRhRmllbGQ6ICdlZGl0JyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dCAgICAgOiAnRWRpdCBBY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlcjogKHsgY29sdW1uLCBpbmRleCB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkID0gYCR7Y29sdW1uLmlkfS13aWRnZXQtJHtpbmRleH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbiA9IChjb2x1bW4ud2lkZ2V0TWFwIHx8IChjb2x1bW4ud2lkZ2V0TWFwID0ge30pKVt3aWRnZXRJZF0gfHwgKGNvbHVtbi53aWRnZXRNYXBbd2lkZ2V0SWRdID0gTmVvLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZSAgOiBCdXR0b24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcE5hbWUgOiB0aGlzLmFwcE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIgOiB0aGlzLmVkaXRCdXR0b25IYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJZDogJ215VGFibGVTdG9yZUNvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgICAgOiAnRWRpdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBidXR0b24udmRvbVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ21lbnUnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0ICAgICA6ICdNZW51JyxcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIoeyBjb2x1bW4sIHJlY29yZCwgaW5kZXggfSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZCA9IGAke2NvbHVtbi5pZH0td2lkZ2V0LSR7aW5kZXh9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24gPSAoY29sdW1uLndpZGdldE1hcCB8fCAoY29sdW1uLndpZGdldE1hcCA9IHt9KSlbd2lkZ2V0SWRdIHx8IChjb2x1bW4ud2lkZ2V0TWFwW3dpZGdldElkXSA9IE5lby5jcmVhdGUoJ05lby5idXR0b24uQmFzZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnR5cGUgICA6ICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBOYW1lIDogdGhpcy5hcHBOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICAgIDogJ1xcdTIyZWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51ICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMgOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgOiAnTWVudSBvcHRpb24gMSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0IDogJ01lbnUgb3B0aW9uIDInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA6ICdNZW51IG9wdGlvbiAzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgOiAnTWVudSBvcHRpb24gNCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYnV0dG9uLnZkb21cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqL1xuICAgIGVkaXRCdXR0b25IYW5kbGVyKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKE1haW5Db250YWluZXIpO1xuIiwiaW1wb3J0IE1vZGVsIGZyb20gJy4uLy4uLy4uL3NyYy9kYXRhL01vZGVsLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5leGFtcGxlcy50YWJsZS5jb250YWluZXIuTWFpbk1vZGVsXG4gKiBAZXh0ZW5kcyBOZW8uZGF0YS5Nb2RlbFxuICovXG5jbGFzcyBNYWluTW9kZWwgZXh0ZW5kcyBNb2RlbCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmV4YW1wbGVzLnRhYmxlLmNvbnRhaW5lci5NYWluTW9kZWwnLFxuXG4gICAgICAgIGZpZWxkczogW3tcbiAgICAgICAgICAgIG5hbWU6ICdjb2xzcGFuJyxcbiAgICAgICAgICAgIHR5cGU6ICdPYmplY3QnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdjb3VudHJ5JyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdmaXJzdG5hbWUnLFxuICAgICAgICAgICAgdHlwZTogJ1N0cmluZydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ2dpdGh1YklkJyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdsYXN0bmFtZScsXG4gICAgICAgICAgICB0eXBlOiAnU3RyaW5nJ1xuICAgICAgICB9XVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoTWFpbk1vZGVsKTtcbiIsImltcG9ydCBNb2RlbCBmcm9tICcuL01haW5Nb2RlbC5tanMnO1xuaW1wb3J0IFN0b3JlIGZyb20gJy4uLy4uLy4uL3NyYy9kYXRhL1N0b3JlLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5leGFtcGxlcy50YWJsZS5jb250YWluZXIuTWFpblN0b3JlXG4gKiBAZXh0ZW5kcyBOZW8uZGF0YS5TdG9yZVxuICovXG5jbGFzcyBNYWluU3RvcmUgZXh0ZW5kcyBTdG9yZSB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgY2xhc3NOYW1lICA6ICdOZW8uZXhhbXBsZXMudGFibGUuY29udGFpbmVyLk1haW5TdG9yZScsXG4gICAgICAgIGtleVByb3BlcnR5OiAnZ2l0aHViSWQnLFxuICAgICAgICBtb2RlbCAgICAgIDogTW9kZWwsXG5cbiAgICAgICAgZGF0YTogW3tcbiAgICAgICAgICAgIGNvdW50cnkgIDogJ0dlcm1hbnknLFxuICAgICAgICAgICAgZmlyc3RuYW1lOiAnVG9iaWFzJyxcbiAgICAgICAgICAgIGdpdGh1YklkIDogJ3RvYml1JyxcbiAgICAgICAgICAgIGxhc3RuYW1lIDogJ1VobGlnJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBjb3VudHJ5ICA6ICdVU0EnLFxuICAgICAgICAgICAgZmlyc3RuYW1lOiAnUmljaCcsXG4gICAgICAgICAgICBnaXRodWJJZCA6ICdyd2F0ZXJzJyxcbiAgICAgICAgICAgIGxhc3RuYW1lIDogJ1dhdGVycydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY291bnRyeSAgOiAnR2VybWFueScsXG4gICAgICAgICAgICBmaXJzdG5hbWU6ICdOaWxzJyxcbiAgICAgICAgICAgIGdpdGh1YklkIDogJ21yc3Vuc2hpbmUnLFxuICAgICAgICAgICAgbGFzdG5hbWUgOiAnRGVobCdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY291bnRyeSAgOiAnVVNBJyxcbiAgICAgICAgICAgIGZpcnN0bmFtZTogJ0dlcmFyZCcsXG4gICAgICAgICAgICBnaXRodWJJZCA6ICdjYW10bmJpa2VycndjJyxcbiAgICAgICAgICAgIGxhc3RuYW1lIDogJ0hvcmFuJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBjb3VudHJ5ICA6ICdTbG92YWtpYScsXG4gICAgICAgICAgICBmaXJzdG5hbWU6ICdKb3plZicsXG4gICAgICAgICAgICBnaXRodWJJZCA6ICdqc2FrYWxvcycsXG4gICAgICAgICAgICBsYXN0bmFtZSA6ICdTYWthbG9zJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBjb3VudHJ5ICA6ICdHZXJtYW55JyxcbiAgICAgICAgICAgIGZpcnN0bmFtZTogJ0Jhc3RpYW4nLFxuICAgICAgICAgICAgZ2l0aHViSWQgOiAnYmhhdXN0ZWluJyxcbiAgICAgICAgICAgIGxhc3RuYW1lIDogJ0hhdXN0ZWluJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBjb2xzcGFuICA6IHtmaXJzdG5hbWU6IDN9LFxuICAgICAgICAgICAgY291bnRyeSAgOiAnR2VybWFueScsXG4gICAgICAgICAgICBmaXJzdG5hbWU6ICdDb2xzcGFuIDMnLFxuICAgICAgICAgICAgZ2l0aHViSWQgOiAncmFuZG9tJ1xuICAgICAgICB9XVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoTWFpblN0b3JlKTtcbiIsImltcG9ydCBNYWluQ29udGFpbmVyIGZyb20gJy4vTWFpbkNvbnRhaW5lci5tanMnO1xuXG5leHBvcnQgY29uc3Qgb25TdGFydCA9ICgpID0+IE5lby5hcHAoe1xuICAgIG1haW5WaWV3OiBNYWluQ29udGFpbmVyLFxuICAgIG5hbWUgICAgOiAnTmVvLmV4YW1wbGVzLnRhYmxlLmNvbnRhaW5lcidcbn0pO1xuIiwiaW1wb3J0IENlbGxSb3dNb2RlbCBmcm9tICcuL0NlbGxSb3dNb2RlbC5tanMnO1xuaW1wb3J0IENvbHVtbk1vZGVsICBmcm9tICcuL0NvbHVtbk1vZGVsLm1qcyc7XG5pbXBvcnQgVkRvbVV0aWwgICAgIGZyb20gJy4uLy4uL3V0aWwvVkRvbS5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8uc2VsZWN0aW9uLnRhYmxlLkNlbGxDb2x1bW5Sb3dNb2RlbFxuICogQGV4dGVuZHMgTmVvLnNlbGVjdGlvbi50YWJsZS5DZWxsUm93TW9kZWxcbiAqL1xuY2xhc3MgQ2VsbENvbHVtblJvd01vZGVsIGV4dGVuZHMgQ2VsbFJvd01vZGVsIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5zZWxlY3Rpb24udGFibGUuQ2VsbENvbHVtblJvd01vZGVsJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdOZW8uc2VsZWN0aW9uLnRhYmxlLkNlbGxDb2x1bW5Sb3dNb2RlbCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSdzZWxlY3Rpb24tdGFibGUtY2VsbGNvbHVtbnJvd21vZGVsJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBudHlwZTogJ3NlbGVjdGlvbi10YWJsZS1jZWxsY29sdW1ucm93bW9kZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbHM9J25lby1zZWxlY3Rpb24tY2VsbGNvbHVtbnJvd21vZGVsJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbHM6ICduZW8tc2VsZWN0aW9uLWNlbGxjb2x1bW5yb3dtb2RlbCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IHNlbGVjdGVkQ29sdW1uQ2VsbENscz0nc2VsZWN0ZWQtY29sdW1uLWNlbGwnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHNlbGVjdGVkQ29sdW1uQ2VsbENsczogJ3NlbGVjdGVkLWNvbHVtbi1jZWxsJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge0FycmF5fG51bGx9IHNlbGVjdGVkQ29sdW1uQ2VsbElkcz1udWxsXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHNlbGVjdGVkQ29sdW1uQ2VsbElkczogbnVsbFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3QoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyLmNvbnN0cnVjdChjb25maWcpO1xuXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDb2x1bW5DZWxsSWRzID0gW11cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtzaWxlbnRdIHRydWUgdG8gcHJldmVudCBhIHZkb20gdXBkYXRlXG4gICAgICovXG4gICAgZGVzZWxlY3RBbGxDZWxscyhzaWxlbnQpIHtcbiAgICAgICAgbGV0IG1lICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgY2VsbElkcyA9IFsuLi5tZS5zZWxlY3RlZENvbHVtbkNlbGxJZHNdLFxuICAgICAgICAgICAge3ZpZXd9ICA9IG1lO1xuXG4gICAgICAgIGNlbGxJZHMuZm9yRWFjaChjZWxsSWQgPT4ge1xuICAgICAgICAgICAgbWUuZGVzZWxlY3QoY2VsbElkLCB0cnVlLCBtZS5zZWxlY3RlZENvbHVtbkNlbGxJZHMsIG1lLnNlbGVjdGVkQ29sdW1uQ2VsbENscylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgIXNpbGVudCAmJiB2aWV3LnVwZGF0ZSgpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKi9cbiAgICBvbkNlbGxDbGljayhkYXRhKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXMsXG4gICAgICAgICAgICBpZCA9IENvbHVtbk1vZGVsLmdldENlbGxJZChkYXRhLnBhdGgpLFxuICAgICAgICAgICAgY29sdW1uTm9kZUlkcywgaW5kZXgsIHRib2R5Tm9kZTtcblxuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIGluZGV4ICAgICAgICAgPSBDb2x1bW5Nb2RlbC5nZXRDb2x1bW5JbmRleChpZCwgbWUudmlldy5pdGVtc1swXS5pdGVtcyk7XG4gICAgICAgICAgICB0Ym9keU5vZGUgICAgID0gVkRvbVV0aWwuZmluZFZkb21DaGlsZChtZS52aWV3LnZkb20sIHt0YWc6ICd0Ym9keSd9KS52ZG9tO1xuICAgICAgICAgICAgY29sdW1uTm9kZUlkcyA9IFZEb21VdGlsLmdldENvbHVtbk5vZGVzSWRzKHRib2R5Tm9kZSwgaW5kZXgpO1xuXG4gICAgICAgICAgICBtZS5kZXNlbGVjdEFsbENlbGxzKHRydWUpO1xuICAgICAgICAgICAgbWUuc2VsZWN0KGNvbHVtbk5vZGVJZHMsIG1lLnNlbGVjdGVkQ29sdW1uQ2VsbElkcywgbWUuc2VsZWN0ZWRDb2x1bW5DZWxsQ2xzKVxuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIub25DZWxsQ2xpY2soZGF0YSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGVwXG4gICAgICovXG4gICAgb25OYXZLZXlDb2x1bW4oZGF0YSwgc3RlcCkge1xuICAgICAgICBsZXQgbWUgICAgICAgICAgICA9IHRoaXMsXG4gICAgICAgICAgICBpZEFycmF5ICAgICAgID0gQ29sdW1uTW9kZWwuZ2V0Q2VsbElkKGRhdGEucGF0aCkuc3BsaXQoJ19fJyksXG4gICAgICAgICAgICBjdXJyZW50Q29sdW1uID0gaWRBcnJheVsyXSxcbiAgICAgICAgICAgIHt2aWV3fSAgICAgICAgPSBtZSxcbiAgICAgICAgICAgIGRhdGFGaWVsZHMgICAgPSB2aWV3LmNvbHVtbnMubWFwKGMgPT4gYy5kYXRhRmllbGQpLFxuICAgICAgICAgICAgbmV3SW5kZXggICAgICA9IChkYXRhRmllbGRzLmluZGV4T2YoY3VycmVudENvbHVtbikgKyBzdGVwKSAlIGRhdGFGaWVsZHMubGVuZ3RoLFxuICAgICAgICAgICAgY29sdW1uTm9kZUlkcywgdGJvZHlOb2RlO1xuXG4gICAgICAgIHdoaWxlIChuZXdJbmRleCA8IDApIHtcbiAgICAgICAgICAgIG5ld0luZGV4ICs9IGRhdGFGaWVsZHMubGVuZ3RoXG4gICAgICAgIH1cblxuICAgICAgICB0Ym9keU5vZGUgICAgID0gVkRvbVV0aWwuZmluZFZkb21DaGlsZChtZS52aWV3LnZkb20sIHt0YWc6ICd0Ym9keSd9KS52ZG9tO1xuICAgICAgICBjb2x1bW5Ob2RlSWRzID0gVkRvbVV0aWwuZ2V0Q29sdW1uTm9kZXNJZHModGJvZHlOb2RlLCBuZXdJbmRleCk7XG5cbiAgICAgICAgbWUuZGVzZWxlY3RBbGxDZWxscyh0cnVlKTtcbiAgICAgICAgbWUuc2VsZWN0KGNvbHVtbk5vZGVJZHMsIG1lLnNlbGVjdGVkQ29sdW1uQ2VsbElkcywgbWUuc2VsZWN0ZWRDb2x1bW5DZWxsQ2xzKTtcblxuICAgICAgICBzdXBlci5vbk5hdktleUNvbHVtbihkYXRhLCBzdGVwKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgdW5yZWdpc3RlcigpIHtcbiAgICAgICAgdGhpcy5kZXNlbGVjdEFsbENlbGxzKCk7XG4gICAgICAgIHN1cGVyLnVucmVnaXN0ZXIoKVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoQ2VsbENvbHVtblJvd01vZGVsKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==