"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["src_calendar_view_SettingsContainer_mjs"],{

/***/ "./src/calendar/view/SettingsContainer.mjs":
/*!*************************************************!*\
  !*** ./src/calendar/view/SettingsContainer.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _container_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../container/Base.mjs */ "./src/container/Base.mjs");
/* harmony import */ var _tab_Container_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../tab/Container.mjs */ "./src/tab/Container.mjs");



/**
 * @class Neo.calendar.view.SettingsContainer
 * @extends Neo.container.Base
 */
class SettingsContainer extends _container_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.calendar.view.SettingsContainer'
         * @protected
         */
        className: 'Neo.calendar.view.SettingsContainer',
        /**
         * @member {String[]} baseCls=['neo-calendar-settingscontainer', 'neo-container']
         */
        baseCls: ['neo-calendar-settingscontainer', 'neo-container'],
        /**
         * Read only
         * @member {Boolean} collapsed=false
         */
        collapsed: false,
        /**
         * @member {Object} layout={ntype:'vbox',align:'stretch'}
         * @protected
         */
        layout: {ntype: 'vbox', align: 'stretch'},
        /**
         * True to only keep the active view inside the DOM
         * @member {Boolean} removeInactiveCards=true
         */
        removeInactiveCards: true
    }

    /**
     * @param {Object} config
     */
    construct(config) {
        super.construct(config);

        let me = this;

        if (me.collapsed) {
            me.vdom.removeDom = true
        }
    }

    /**
     * @param {Number} width
     */
    collapse(width) {
        let me    = this,
            style = me.style || {};

        style.marginRight = `-${width}px`;
        me._style      = style; // silent update
        me._vdom.style = style; // silent update

        me.parent.promiseUpdate().then(() => {
            setTimeout(() => {
                me.collapsed = true;

                me.vdom.removeDom = true;
                me.update();

                me.mounted = false;
            }, 400)
        })
    }

    /**
     *
     */
    createItems() {
        let me = this;

        me.items = [{
            ntype : 'component',
            cls   : ['neo-header'],
            height: 48,
            html  : '<i class="fa fa-cog"></i>Settings'
        }, {
            module             : _tab_Container_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
            removeInactiveCards: me.removeInactiveCards,

            items: [{
                module: () => Promise.all(/*! import() */[__webpack_require__.e("vendors-src_form_field_Number_mjs"), __webpack_require__.e("vendors-src_calendar_view_settings_GeneralContainer_mjs")]).then(__webpack_require__.bind(__webpack_require__, /*! ./settings/GeneralContainer.mjs */ "./src/calendar/view/settings/GeneralContainer.mjs")),
                flag  : 'general',
                style : {padding: '20px'},

                tabButtonConfig: {
                    text: 'General'
                }
            }, {
                ntype: 'component',
                flag : 'day',
                html : 'Day',
                style: {padding: '20px'},

                tabButtonConfig: {
                    text: 'Day'
                }
            }, {
                module: () => Promise.all(/*! import() */[__webpack_require__.e("vendors-src_form_field_Number_mjs"), __webpack_require__.e("src_calendar_view_settings_WeekContainer_mjs")]).then(__webpack_require__.bind(__webpack_require__, /*! ./settings/WeekContainer.mjs */ "./src/calendar/view/settings/WeekContainer.mjs")),
                flag  : 'week',
                style : {padding: '20px'},

                tabButtonConfig: {
                    text: 'Week'
                }
            }, {
                module: () => __webpack_require__.e(/*! import() */ "src_calendar_view_settings_MonthContainer_mjs").then(__webpack_require__.bind(__webpack_require__, /*! ./settings/MonthContainer.mjs */ "./src/calendar/view/settings/MonthContainer.mjs")),
                flag  : 'month',
                style : {padding: '20px'},

                tabButtonConfig: {
                    text: 'Month'
                }
            }, {
                module: () => Promise.all(/*! import() */[__webpack_require__.e("vendors-src_form_field_Number_mjs"), __webpack_require__.e("src_calendar_view_settings_YearContainer_mjs")]).then(__webpack_require__.bind(__webpack_require__, /*! ./settings/YearContainer.mjs */ "./src/calendar/view/settings/YearContainer.mjs")),
                flag  : 'year',
                style : {padding: '20px'},

                tabButtonConfig: {
                    text: 'Year'
                }
            }],

            listeners: {
                activeIndexChange: me.onCardIndexChange,
                scope            : me
            }
        }];

        super.createItems()
    }

    /**
     *
     */
    expand() {
        let me = this,
            style;

        delete me.vdom.removeDom;

        me.parent.promiseUpdate().then(() => {
            me.collapsed = false;
            me.mounted   = true;

            setTimeout(() => {
                style = me.style || {}
                style.marginRight = '0px';
                me.style = style;
            }, 50)
        })
    }

    /**
     * @returns {Neo.calendar.view.MainContainer}
     */
    getMainContainer() {
        return this.up('calendar-maincontainer')
    }

    /**
     * @param {Object} data
     */
    onCardIndexChange(data) {
        let me            = this,
            container     = data.item,
            mainContainer = me.getMainContainer(),
            listenerId;

        if (mainContainer) {
            if (Neo.isFunction(container.createContent) && container.items.length < 1) {
                if (Neo.typeOf(mainContainer[`${container.flag}Component`]) !== 'NeoInstance') {
                    listenerId = mainContainer.on('cardLoaded', () => {
                        mainContainer.un('cardLoaded', listenerId);
                        setTimeout(() => {container.createContent();}, 30)
                    })
                } else {
                    setTimeout(() => {container.createContent();}, 30)
                }
            }

            if (container.flag !== 'general') {
                mainContainer.activeView = container.flag
            }
        }
    }
}

Neo.setupClass(SettingsContainer);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SettingsContainer);


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC9zcmNfY2FsZW5kYXJfdmlld19TZXR0aW5nc0NvbnRhaW5lcl9tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQW9EO0FBQ0Q7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDJEQUFTO0FBQ3pDO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVEsUUFBUTtBQUNwQztBQUNBO0FBQ0EsaUJBQWlCLGdDQUFnQztBQUNqRDtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQ0FBZ0MsTUFBTTtBQUN0QyxnQ0FBZ0M7QUFDaEMsZ0NBQWdDOztBQUVoQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGlDQUFpQywwREFBWTtBQUM3Qzs7QUFFQTtBQUNBLDhCQUE4QiwwVEFBeUM7QUFDdkU7QUFDQSx5QkFBeUIsZ0JBQWdCOztBQUV6QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjs7QUFFeEM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLDhCQUE4Qix5U0FBc0M7QUFDcEU7QUFDQSx5QkFBeUIsZ0JBQWdCOztBQUV6QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsOEJBQThCLGtPQUF1QztBQUNyRTtBQUNBLHlCQUF5QixnQkFBZ0I7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYiw4QkFBOEIseVNBQXNDO0FBQ3BFO0FBQ0EseUJBQXlCLGdCQUFnQjs7QUFFekM7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdEQUFnRCxlQUFlO0FBQy9EO0FBQ0E7QUFDQSwwQ0FBMEMsMkJBQTJCO0FBQ3JFLHFCQUFxQjtBQUNyQixrQkFBa0I7QUFDbEIsc0NBQXNDLDJCQUEyQjtBQUNqRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxpRUFBZSxpQkFBaUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9zcmMvY2FsZW5kYXIvdmlldy9TZXR0aW5nc0NvbnRhaW5lci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbnRhaW5lciAgICBmcm9tICcuLi8uLi9jb250YWluZXIvQmFzZS5tanMnO1xuaW1wb3J0IFRhYkNvbnRhaW5lciBmcm9tICcuLi8uLi90YWIvQ29udGFpbmVyLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5jYWxlbmRhci52aWV3LlNldHRpbmdzQ29udGFpbmVyXG4gKiBAZXh0ZW5kcyBOZW8uY29udGFpbmVyLkJhc2VcbiAqL1xuY2xhc3MgU2V0dGluZ3NDb250YWluZXIgZXh0ZW5kcyBDb250YWluZXIge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmNhbGVuZGFyLnZpZXcuU2V0dGluZ3NDb250YWluZXInXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5jYWxlbmRhci52aWV3LlNldHRpbmdzQ29udGFpbmVyJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBiYXNlQ2xzPVsnbmVvLWNhbGVuZGFyLXNldHRpbmdzY29udGFpbmVyJywgJ25lby1jb250YWluZXInXVxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUNsczogWyduZW8tY2FsZW5kYXItc2V0dGluZ3Njb250YWluZXInLCAnbmVvLWNvbnRhaW5lciddLFxuICAgICAgICAvKipcbiAgICAgICAgICogUmVhZCBvbmx5XG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IGNvbGxhcHNlZD1mYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgY29sbGFwc2VkOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gbGF5b3V0PXtudHlwZTondmJveCcsYWxpZ246J3N0cmV0Y2gnfVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBsYXlvdXQ6IHtudHlwZTogJ3Zib3gnLCBhbGlnbjogJ3N0cmV0Y2gnfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRydWUgdG8gb25seSBrZWVwIHRoZSBhY3RpdmUgdmlldyBpbnNpZGUgdGhlIERPTVxuICAgICAgICAgKiBAbWVtYmVyIHtCb29sZWFufSByZW1vdmVJbmFjdGl2ZUNhcmRzPXRydWVcbiAgICAgICAgICovXG4gICAgICAgIHJlbW92ZUluYWN0aXZlQ2FyZHM6IHRydWVcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAgICovXG4gICAgY29uc3RydWN0KGNvbmZpZykge1xuICAgICAgICBzdXBlci5jb25zdHJ1Y3QoY29uZmlnKTtcblxuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIGlmIChtZS5jb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIG1lLnZkb20ucmVtb3ZlRG9tID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoXG4gICAgICovXG4gICAgY29sbGFwc2Uod2lkdGgpIHtcbiAgICAgICAgbGV0IG1lICAgID0gdGhpcyxcbiAgICAgICAgICAgIHN0eWxlID0gbWUuc3R5bGUgfHwge307XG5cbiAgICAgICAgc3R5bGUubWFyZ2luUmlnaHQgPSBgLSR7d2lkdGh9cHhgO1xuICAgICAgICBtZS5fc3R5bGUgICAgICA9IHN0eWxlOyAvLyBzaWxlbnQgdXBkYXRlXG4gICAgICAgIG1lLl92ZG9tLnN0eWxlID0gc3R5bGU7IC8vIHNpbGVudCB1cGRhdGVcblxuICAgICAgICBtZS5wYXJlbnQucHJvbWlzZVVwZGF0ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbWUuY29sbGFwc2VkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIG1lLnZkb20ucmVtb3ZlRG9tID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBtZS51cGRhdGUoKTtcblxuICAgICAgICAgICAgICAgIG1lLm1vdW50ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sIDQwMClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIGNyZWF0ZUl0ZW1zKCkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIG1lLml0ZW1zID0gW3tcbiAgICAgICAgICAgIG50eXBlIDogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICBjbHMgICA6IFsnbmVvLWhlYWRlciddLFxuICAgICAgICAgICAgaGVpZ2h0OiA0OCxcbiAgICAgICAgICAgIGh0bWwgIDogJzxpIGNsYXNzPVwiZmEgZmEtY29nXCI+PC9pPlNldHRpbmdzJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgICAgICAgOiBUYWJDb250YWluZXIsXG4gICAgICAgICAgICByZW1vdmVJbmFjdGl2ZUNhcmRzOiBtZS5yZW1vdmVJbmFjdGl2ZUNhcmRzLFxuXG4gICAgICAgICAgICBpdGVtczogW3tcbiAgICAgICAgICAgICAgICBtb2R1bGU6ICgpID0+IGltcG9ydCgnLi9zZXR0aW5ncy9HZW5lcmFsQ29udGFpbmVyLm1qcycpLFxuICAgICAgICAgICAgICAgIGZsYWcgIDogJ2dlbmVyYWwnLFxuICAgICAgICAgICAgICAgIHN0eWxlIDoge3BhZGRpbmc6ICcyMHB4J30sXG5cbiAgICAgICAgICAgICAgICB0YWJCdXR0b25Db25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0dlbmVyYWwnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG50eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgICAgICBmbGFnIDogJ2RheScsXG4gICAgICAgICAgICAgICAgaHRtbCA6ICdEYXknLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZzogJzIwcHgnfSxcblxuICAgICAgICAgICAgICAgIHRhYkJ1dHRvbkNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnRGF5J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBtb2R1bGU6ICgpID0+IGltcG9ydCgnLi9zZXR0aW5ncy9XZWVrQ29udGFpbmVyLm1qcycpLFxuICAgICAgICAgICAgICAgIGZsYWcgIDogJ3dlZWsnLFxuICAgICAgICAgICAgICAgIHN0eWxlIDoge3BhZGRpbmc6ICcyMHB4J30sXG5cbiAgICAgICAgICAgICAgICB0YWJCdXR0b25Db25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1dlZWsnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZTogKCkgPT4gaW1wb3J0KCcuL3NldHRpbmdzL01vbnRoQ29udGFpbmVyLm1qcycpLFxuICAgICAgICAgICAgICAgIGZsYWcgIDogJ21vbnRoJyxcbiAgICAgICAgICAgICAgICBzdHlsZSA6IHtwYWRkaW5nOiAnMjBweCd9LFxuXG4gICAgICAgICAgICAgICAgdGFiQnV0dG9uQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdNb250aCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlOiAoKSA9PiBpbXBvcnQoJy4vc2V0dGluZ3MvWWVhckNvbnRhaW5lci5tanMnKSxcbiAgICAgICAgICAgICAgICBmbGFnICA6ICd5ZWFyJyxcbiAgICAgICAgICAgICAgICBzdHlsZSA6IHtwYWRkaW5nOiAnMjBweCd9LFxuXG4gICAgICAgICAgICAgICAgdGFiQnV0dG9uQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdZZWFyJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dLFxuXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVJbmRleENoYW5nZTogbWUub25DYXJkSW5kZXhDaGFuZ2UsXG4gICAgICAgICAgICAgICAgc2NvcGUgICAgICAgICAgICA6IG1lXG4gICAgICAgICAgICB9XG4gICAgICAgIH1dO1xuXG4gICAgICAgIHN1cGVyLmNyZWF0ZUl0ZW1zKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIGV4cGFuZCgpIHtcbiAgICAgICAgbGV0IG1lID0gdGhpcyxcbiAgICAgICAgICAgIHN0eWxlO1xuXG4gICAgICAgIGRlbGV0ZSBtZS52ZG9tLnJlbW92ZURvbTtcblxuICAgICAgICBtZS5wYXJlbnQucHJvbWlzZVVwZGF0ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgbWUuY29sbGFwc2VkID0gZmFsc2U7XG4gICAgICAgICAgICBtZS5tb3VudGVkICAgPSB0cnVlO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBzdHlsZSA9IG1lLnN0eWxlIHx8IHt9XG4gICAgICAgICAgICAgICAgc3R5bGUubWFyZ2luUmlnaHQgPSAnMHB4JztcbiAgICAgICAgICAgICAgICBtZS5zdHlsZSA9IHN0eWxlO1xuICAgICAgICAgICAgfSwgNTApXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge05lby5jYWxlbmRhci52aWV3Lk1haW5Db250YWluZXJ9XG4gICAgICovXG4gICAgZ2V0TWFpbkNvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXAoJ2NhbGVuZGFyLW1haW5jb250YWluZXInKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgb25DYXJkSW5kZXhDaGFuZ2UoZGF0YSkge1xuICAgICAgICBsZXQgbWUgICAgICAgICAgICA9IHRoaXMsXG4gICAgICAgICAgICBjb250YWluZXIgICAgID0gZGF0YS5pdGVtLFxuICAgICAgICAgICAgbWFpbkNvbnRhaW5lciA9IG1lLmdldE1haW5Db250YWluZXIoKSxcbiAgICAgICAgICAgIGxpc3RlbmVySWQ7XG5cbiAgICAgICAgaWYgKG1haW5Db250YWluZXIpIHtcbiAgICAgICAgICAgIGlmIChOZW8uaXNGdW5jdGlvbihjb250YWluZXIuY3JlYXRlQ29udGVudCkgJiYgY29udGFpbmVyLml0ZW1zLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoTmVvLnR5cGVPZihtYWluQ29udGFpbmVyW2Ake2NvbnRhaW5lci5mbGFnfUNvbXBvbmVudGBdKSAhPT0gJ05lb0luc3RhbmNlJykge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcklkID0gbWFpbkNvbnRhaW5lci5vbignY2FyZExvYWRlZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5Db250YWluZXIudW4oJ2NhcmRMb2FkZWQnLCBsaXN0ZW5lcklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge2NvbnRhaW5lci5jcmVhdGVDb250ZW50KCk7fSwgMzApXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7Y29udGFpbmVyLmNyZWF0ZUNvbnRlbnQoKTt9LCAzMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjb250YWluZXIuZmxhZyAhPT0gJ2dlbmVyYWwnKSB7XG4gICAgICAgICAgICAgICAgbWFpbkNvbnRhaW5lci5hY3RpdmVWaWV3ID0gY29udGFpbmVyLmZsYWdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuTmVvLnNldHVwQ2xhc3MoU2V0dGluZ3NDb250YWluZXIpO1xuXG5leHBvcnQgZGVmYXVsdCBTZXR0aW5nc0NvbnRhaW5lcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==