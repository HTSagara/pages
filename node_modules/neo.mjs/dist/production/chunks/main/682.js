"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[682,96],{96:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});var s=o(162);class i extends s.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0}}Neo.setupClass(i);const n=i},682:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});var s=o(96);class i extends s.default{static config={className:"Neo.main.addon.WindowPosition",adjustWindowPositions:!1,intervalId:null,intervalTime:20,observeResize_:!1,remote:{app:["registerWindow","setConfigs","setDock","unregisterWindow"]},screenLeft:null,screenTop:null,windows:{}};resizeListener=null;construct(e){super.construct(e);let t=this,o=window;t.screenLeft=o.screenLeft,t.screenTop=o.screenTop,o.addEventListener("mouseout",t.onMouseOut.bind(t))}afterSetObserveResize(e,t){let o=this;o.resizeListener||(o.resizeListener=o.onResize.bind(o)),window[e?"addEventListener":"removeEventListener"]("resize",o.resizeListener)}adjustPositions(){let e;Object.entries(this.windows).forEach((([t,o])=>{e=this.getPosition(o),Neo.Main.windowMoveTo({windowName:t,x:e.left,y:e.top})}))}checkMovement(){let e,t=this,o=Neo.worker.Manager,s=window,i=s.screenLeft,n=s.screenTop;t.screenLeft===i&&t.screenTop===n||(e=Neo.Main.getWindowData(),t.adjustWindowPositions&&t.adjustPositions(),o.sendMessage("app",{action:"windowPositionChange",data:{appName:o.appName,...e}}),t.screenLeft=i,t.screenTop=n)}dockDirectionChange(e,t){return!(("bottom"!==e&&"top"!==e||"left"!==t&&"right"!==t)&&("bottom"!==t&&"top"!==t||"left"!==e&&"right"!==e))}getPosition(e){let t,o,s=window;switch(e.dock){case"bottom":t=s.screenLeft,o=s.outerHeight+s.screenTop-50;break;case"left":t=s.screenLeft-e.size,o=s.screenTop+28;break;case"right":t=s.outerWidth+s.screenLeft,o=s.screenTop+28;break;case"top":t=s.screenLeft,o=s.screenTop-e.size+78}return{left:t,top:o}}onMouseOut(e){let t=this;e.toElement?t.intervalId&&(clearInterval(t.intervalId),t.intervalId=null):t.intervalId||(t.intervalId=setInterval(t.checkMovement.bind(t),t.intervalTime))}onResize(e){console.log("onResize");let t,o,s=this,i=window;Object.entries(s.windows).forEach((([e,n])=>{switch(n.dock){case"bottom":case"top":o=i.outerWidth;break;case"left":case"right":t=i.outerHeight-28}s.adjustWindowPositions&&(Neo.Main.windowResizeTo({height:t,width:o,windowName:e}),s.adjustPositions())}))}registerWindow(e){this.windows[e.name]=e}setConfigs(e){delete e.appName,this.set(e)}setDock(e){let t,o,s=this,i=e.dock,n=e.name,r=s.windows[n];r&&(t=s.dockDirectionChange(i,r.dock),r.dock=i,o=s.getPosition(r),t&&Neo.Main.windowResizeTo({height:"bottom"===i||"top"===i?r.size:window.outerHeight-28,width:"left"===i||"right"===i?r.size:window.outerWidth,windowName:n}),Neo.Main.windowMoveTo({windowName:n,x:o.left,y:o.top}))}unregisterWindow(e){delete this.windows[e.name]}}Neo.setupClass(i);const n=i}}]);