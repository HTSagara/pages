"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[274],{274:(e,s,r)=>{r.r(s),r.d(s,{default:()=>i});var n=r(162),o=r(126);class a extends n.A{static config={className:"Neo.main.addon.ServiceWorker",singleton:!0};construct(e){if("serviceWorker"in navigator){let e=this,s=Neo.config,r="development"===s.environment,n=r?"ServiceWorker.mjs":"serviceworker.js",a=window.location.pathname.includes("/examples/")?"examples/":"apps/",i=r?{type:"module"}:{},t=(r?s.basePath:s.workerBasePath)+(r?a:"")+n,c=navigator.serviceWorker;window.addEventListener("beforeunload",e.onBeforeUnload.bind(e)),c.register(t,i).then((e=>{c.ready.then((()=>{c.onmessage=o.A.onWorkerMessage.bind(o.A),o.A.getWorker("service")||(o.A.serviceWorker=e.active),o.A.sendMessage("service",{action:"registerNeoConfig",data:s})}))}))}}onBeforeUnload(){o.A.sendMessage("service",{action:"unregisterPort"})}}const i=Neo.applyClassConfig(a)}}]);