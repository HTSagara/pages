"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[17],{17:(e,t,o)=>{o.r(t),o.d(t,{default:()=>s});var i=o(696);class n extends i.Z{static config={className:"Neo.main.addon.WindowPosition",adjustWindowPositions:!1,intervalId:null,intervalTime:20,observeResize_:!1,remote:{app:["registerWindow","setConfigs","setDock","unregisterWindow"]},screenLeft:null,screenTop:null,singleton:!0,windows:{}};resizeListener=null;construct(e){super.construct(e);let t=this,o=window;t.screenLeft=o.screenLeft,t.screenTop=o.screenTop,o.addEventListener("mouseout",t.onMouseOut.bind(t))}afterSetObserveResize(e,t){let o=this;o.resizeListener||(o.resizeListener=o.onResize.bind(o)),window[e?"addEventListener":"removeEventListener"]("resize",o.resizeListener)}adjustPositions(){let e;Object.entries(this.windows).forEach((([t,o])=>{e=this.getPosition(o),Neo.Main.windowMoveTo({windowName:t,x:e.left,y:e.top})}))}checkMovement(){let e,t=this,o=Neo.worker.Manager,i=window,n=i.screenLeft,s=i.screenTop;t.screenLeft===n&&t.screenTop===s||(e=Neo.Main.getWindowData(),t.adjustWindowPositions&&t.adjustPositions(),o.sendMessage("app",{action:"windowPositionChange",data:{appName:o.appName,...e}}),t.screenLeft=n,t.screenTop=s)}dockDirectionChange(e,t){return!(("bottom"!==e&&"top"!==e||"left"!==t&&"right"!==t)&&("bottom"!==t&&"top"!==t||"left"!==e&&"right"!==e))}getPosition(e){let t,o,i=window;switch(e.dock){case"bottom":t=i.screenLeft,o=i.outerHeight+i.screenTop-50;break;case"left":t=i.screenLeft-e.size,o=i.screenTop+28;break;case"right":t=i.outerWidth+i.screenLeft,o=i.screenTop+28;break;case"top":t=i.screenLeft,o=i.screenTop-e.size+78}return{left:t,top:o}}onMouseOut(e){let t=this;e.toElement?t.intervalId&&(clearInterval(t.intervalId),t.intervalId=null):t.intervalId||(t.intervalId=setInterval(t.checkMovement.bind(t),t.intervalTime))}onResize(e){console.log("onResize");let t,o,i=this,n=window;Object.entries(i.windows).forEach((([e,s])=>{switch(s.dock){case"bottom":case"top":o=n.outerWidth;break;case"left":case"right":t=n.outerHeight-28}i.adjustWindowPositions&&(Neo.Main.windowResizeTo({height:t,width:o,windowName:e}),i.adjustPositions())}))}registerWindow(e){this.windows[e.name]=e}setConfigs(e){delete e.appName,this.set(e)}setDock(e){let t,o,i=this,n=e.dock,s=e.name,r=i.windows[s];r&&(t=i.dockDirectionChange(n,r.dock),r.dock=n,o=i.getPosition(r),t&&Neo.Main.windowResizeTo({height:"bottom"===n||"top"===n?r.size:window.outerHeight-28,width:"left"===n||"right"===n?r.size:window.outerWidth,windowName:s}),Neo.Main.windowMoveTo({windowName:s,x:o.left,y:o.top}))}unregisterWindow(e){delete this.windows[e.name]}}const s=Neo.applyClassConfig(n)}}]);