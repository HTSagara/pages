"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[6523],{6523:(e,t,o)=>{o.r(t),o.d(t,{onStart:()=>Z}),Neo.overwrites={Neo:{form:{field:{CheckBox:{useAlertState_:!0},Text:{labelPosition_:"inline",showOptionalText_:!0,useAlertState_:!0}}}}},Neo.overwrites;var n=o(1345),a=o(9147),r=o(9119),s=o(3846);class l extends s.Z{static config={className:"Form.view.FormContainerController"};onComponentConstructed(){super.onComponentConstructed(),this.component.on({fieldChange:e=>console.log("fieldChange",e),fieldFocusLeave:e=>console.log("fieldFocusLeave",e),fieldUserChange:e=>console.log("fieldUserChange",e)})}onNextPageButtonClick(e){this.getModel().data.activeIndex++}onPrevPageButtonClick(e){this.getModel().data.activeIndex--}async onSaveButtonClick(e){let t=this.getReference("main-form"),o=await t.getValues();Neo.main.addon.LocalStorage.updateLocalStorageItem({appName:this.component.appName,key:"neo-form",value:JSON.stringify(o)})}}Neo.applyClassConfig(l);const i=l;var c=o(5163),d=o(5031);class m extends a.Z{static config={className:"Form.view.FormContainer",baseCls:["form-form-container","neo-container"],controller:i,items:[{module:d.Z,cls:["form-header"],flex:"none",items:[{module:c.Z,bind:{text:e=>e.activeTitle},cls:["form-header-label"],flex:"none"},"->",{iconCls:["fas","fa-file"],handler:"onValidatePageButtonClick",text:"Validate page"},{iconCls:["fas","fa-layer-group"],handler:"onValidateAllPagesButtonClick",style:{marginLeft:"1em"},text:"Validate all pages"},{iconCls:["fas","fa-floppy-disk"],handler:"onSaveButtonClick",style:{marginLeft:"1em"},text:"Save"}]},{module:r.Z,reference:"pages-container",layout:{ntype:"card",bind:{activeIndex:e=>e.activeIndex}},items:[{module:()=>Promise.all([o.e(2577),o.e(2416)]).then(o.bind(o,2416))},{module:()=>Promise.all([o.e(2577),o.e(5886),o.e(5921)]).then(o.bind(o,5921))},{module:()=>Promise.all([o.e(2577),o.e(2587)]).then(o.bind(o,2587))},{module:()=>o.e(2329).then(o.bind(o,2329))},{module:()=>o.e(1389).then(o.bind(o,1389))},{module:()=>Promise.all([o.e(2577),o.e(4609)]).then(o.bind(o,2770))},{module:()=>Promise.all([o.e(2577),o.e(8133)]).then(o.bind(o,8133))},{module:()=>Promise.all([o.e(2577),o.e(3961)]).then(o.bind(o,3961))},{module:()=>o.e(6173).then(o.bind(o,6173))},{module:()=>Promise.all([o.e(2577),o.e(5108),o.e(8075)]).then(o.bind(o,8075))},{module:()=>Promise.all([o.e(2577),o.e(5108),o.e(9479)]).then(o.bind(o,9479))},{module:()=>Promise.all([o.e(2577),o.e(7128)]).then(o.bind(o,7128))},{module:()=>Promise.all([o.e(2577),o.e(4727)]).then(o.bind(o,4727))},{module:()=>Promise.all([o.e(2577),o.e(7013)]).then(o.bind(o,7013))},{module:()=>Promise.all([o.e(2577),o.e(8966)]).then(o.bind(o,8966))}]},{module:d.Z,cls:["form-footer"],flex:"none",items:[{bind:{disabled:e=>0===e.activeIndex},handler:"onPrevPageButtonClick",iconCls:"fas fa-chevron-left",text:"Back"},"->",{bind:{disabled:e=>e.activeIndex===e.maxIndex},handler:"onNextPageButtonClick",iconCls:"fas fa-chevron-right",iconPosition:"right",style:{marginLeft:"1em"},text:"Next page"}]}]}}Neo.applyClassConfig(m);const f=m;var p=o(9585);class g extends p.Z{static config={className:"Form.view.SideNavList",baseCls:["form-side-nav-list","neo-list"],useHeaders:!0};createItemContent(e,t){let o=e[this.displayField];return e.isHeader?o:[{tag:"i",cls:this.getIconCls(e)},{html:o}]}getIconCls(e){let t=["neo-list-icon"];return"valid"===e.formState?[...t,"neo-color-green","far","fa-circle-check"]:"invalid"===e.formState?[...t,"neo-color-red","far","fa-circle-xmark"]:"inProgress"===e.formState?[...t,"neo-color-blue","fas","fa-circle-half-stroke"]:[...t,"neo-color-blue","far","fa-circle"]}onSelect(e){let t=this,o=t.store.get(t.getItemRecordId(e[0]));t.getModel().setData({activeIndex:o.cardIndex,activeTitle:o.name})}onStoreLoad(){let e=-1;this.store.items.forEach((t=>{t.isHeader||e++})),this.getModel().data.maxIndex=e,super.onStoreLoad()}}Neo.applyClassConfig(g);const u=g;class h extends s.Z{static config={className:"Form.view.ViewportController"};async onValidateAllPagesButtonClick(e){let t=this.getReference("main-form"),o=await t.getFormState(),n=await t.getValues();console.log("All pages",{formState:o,formValues:n}),await this.updateRecordValidityState()}async onValidatePageButtonClick(e){let t=this,o=t.getModel().data.activeIndex,n=t.getReference("pages-container").items[o],a=await n.getValues();await t.updateRecordValidityState(o),console.log(`Current page: ${o+1}`,a)}async updateRecordValidityState(e=null){let t,o,n,a=this,r=a.getModel(),s=a.getReference("pages-container"),l=a.getReference("side-nav"),i=r.getStore("sideNav"),c=0,d=s.items.length;for(Neo.isNumber(e)&&(c=e,d=e+1);c<d;c++)n=s.items[c],o=l.getActiveIndex(c),t=await n.getFormState(),i.getAt(o).formState=t}}Neo.applyClassConfig(h);const C=h;var v=o(1758),N=o(2281);class y extends N.Z{static config={className:"Form.model.SideNav",fields:[{name:"cardIndex",type:"Integer"},{name:"formState",type:"String"},{name:"id",type:"String"},{name:"isHeader",type:"Boolean"},{name:"name",type:"String"}]}}Neo.applyClassConfig(y);const x=y;var S=o(5959);class b extends S.Z{static config={className:"Form.store.SideNav",model:x}}Neo.applyClassConfig(b);const w=b;class P extends v.Z{static config={className:"Form.view.ViewportModel",data:{activeIndex:0,activeTitle:"",maxIndex:0},stores:{sideNav:{module:w,autoLoad:!0,url:"../../resources/examples/data/formSideNav.json"}}};formData=null;construct(e){super.construct(e),Neo.main.addon.LocalStorage.readLocalStorageItem({appName:this.component.appName,key:"neo-form"}).then((e=>{this.formData=JSON.parse(e.value)}))}onDataPropertyChange(e,t,o){super.onDataPropertyChange(e,t,o);let n=this;if(n.formData&&"activeIndex"===e){let a=n.getController().getReference("pages-container").items[t];a instanceof Neo.core.Base?a.setValues(n.formData,!0):setTimeout((()=>{n.onDataPropertyChange(e,t,o)}),30)}}}Neo.applyClassConfig(P);const k=P;class I extends n.Z{static config={className:"Form.view.Viewport",controller:C,items:[{ntype:"container",style:{margin:"0 1em"},width:"300",items:[{flex:"none",vdom:{tag:"h1",innerHTML:"Nested Forms"}},{module:u,reference:"side-nav",bind:{headerlessActiveIndex:e=>e.activeIndex,store:"stores.sideNav"}}]},{module:f,reference:"main-form",style:{margin:"20px"}}],layout:{ntype:"hbox",align:"stretch"},model:k}}Neo.applyClassConfig(I);const V=I,Z=()=>Neo.app({mainView:V,name:"Form"})},1345:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(9119);class a extends n.Z{static config={className:"Neo.container.Viewport",ntype:"viewport",applyBodyCls:!0,autoMount:!0,baseCls:["neo-viewport"]};onConstructed(){super.onConstructed(),this.applyBodyCls&&Neo.main.DomAccess.applyBodyCls({appName:this.appName,cls:["neo-body-viewport"]})}}Neo.applyClassConfig(a);const r=a},3846:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(3106),a=o(8041);class r extends n.Z{static config={className:"Neo.controller.Component",ntype:"component-controller",component:null,parent_:null,references:null};construct(e){super.construct(e);let t,o=this,n=o.component;o.references={},n.isConstructed?o.onComponentConstructed():t=n.on("constructed",(()=>{n.un("constructed",t),o.onComponentConstructed()}))}beforeSetParent(e,t){return e||this.getParent()}getHandlerScope(e,t){let o=this,n=o.parent;return!(!t||!t.resolveCallback(e,t).fn)||(Neo.isFunction(o[e])?o:n?n.getHandlerScope(e):null)}getModel(e=!1){let t=this.component;return e?t.model:t.getModel()}getParent(){let e=this;return e.parent?e.parent:e.component.parent?.getController()||null}getReference(e){let t=this,o=t.references[e];return o||(o=t.component.down({reference:e}),o&&(t.references[e]=o)),o||null}getStore(e){return this.getModel().getStore(e)}onComponentConstructed(){}parseConfig(e=this.component){let t,o,n=this,r=e.handler,s=e.listeners,l=e.reference,i=e.validator;r&&"string"==typeof r&&(o=n.getHandlerScope(r,e),!0!==o&&(e.handler=o[r].bind(e.handlerScope||o))),s&&Object.entries(s).forEach((([r,l])=>{"scope"!==r&&"delegate"!==r&&(Neo.isString(l)?(t=l,o=n.getHandlerScope(t,e),o?!0!==o&&(s[r]={},s[r].fn=o[t].bind(o)):a.Z.logError("Unknown event handler for",t,e)):l.forEach((a=>{Neo.isObject(a)&&a.hasOwnProperty("fn")&&Neo.isString(a.fn)&&(t=a.fn,o=n.getHandlerScope(t,e),o?!0!==o&&(a.fn=o[t].bind(o)):console.error("Unknown event handler for",t,e))})))})),Neo.isString(i)&&(o=n.getHandlerScope(i),o?e.validator=o[i].bind(o):a.Z.logError("Unknown validator for",e.id,e)),l&&(n.references[l]=e)}parseDomListeners(e=this.component){let t,o,n=this,r=e.domListeners;r&&r.forEach((r=>{Object.entries(r).forEach((([s,l])=>{t=null,"scope"!==s&&"delegate"!==s&&(Neo.isString(l)?t=l:Neo.isObject(l)&&l.hasOwnProperty("fn")&&Neo.isString(l.fn)&&(t=l.fn),t&&(o=n.getHandlerScope(t),o?r[s]=o[t].bind(o):a.Z.logError("Unknown domEvent handler for",t,e)))}))}))}removeReference(e){let t,o=this.references;for(t in o)if(e===o[t]){delete o[t];break}this.getParent()?.removeReference(e)}}Neo.applyClassConfig(r);const s=r}}]);