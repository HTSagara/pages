"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[6523],{6523:(e,t,o)=>{o.r(t),o.d(t,{onStart:()=>V}),Neo.overwrites={Neo:{form:{field:{Text:{labelPosition_:"inline",showOptionalText_:!0}}}}},Neo.overwrites;var n=o(1345),a=o(9147),s=o(930),l=o(3846);class r extends l.Z{static config={className:"Form.view.FormContainerController"};onNextPageButtonClick(e){this.getModel().data.activeIndex++}onPrevPageButtonClick(e){this.getModel().data.activeIndex--}async onSaveButtonClick(e){let t=this.getReference("main-form"),o=await t.getValues();Neo.main.addon.LocalStorage.updateLocalStorageItem({appName:this.component.appName,key:"neo-form",value:JSON.stringify(o)})}}Neo.applyClassConfig(r);const i=r;var c=o(5163),d=o(5031);class m extends a.Z{static config={className:"Form.view.FormContainer",baseCls:["form-form-container","neo-container"],controller:i,items:[{module:d.Z,cls:["form-header"],flex:"none",items:[{module:c.Z,bind:{text:e=>e.activeTitle},cls:["form-header-label"],flex:"none"},"->",{iconCls:["fas","fa-file"],handler:"onValidatePageButtonClick",text:"Validate page"},{iconCls:["fas","fa-layer-group"],handler:"onValidateAllPagesButtonClick",style:{marginLeft:"1em"},text:"Validate all pages"},{iconCls:["fas","fa-floppy-disk"],handler:"onSaveButtonClick",style:{marginLeft:"1em"},text:"Save"}]},{module:s.Z,reference:"pages-container",layout:{ntype:"card",bind:{activeIndex:e=>e.activeIndex}},items:[{module:()=>Promise.all([o.e(2577),o.e(2416)]).then(o.bind(o,2416))},{module:()=>Promise.all([o.e(2577),o.e(5886),o.e(5921)]).then(o.bind(o,5921))},{module:()=>Promise.all([o.e(2577),o.e(2587)]).then(o.bind(o,2587))},{module:()=>o.e(2329).then(o.bind(o,2329))},{module:()=>o.e(1389).then(o.bind(o,1389))},{module:()=>Promise.all([o.e(2577),o.e(4609)]).then(o.bind(o,2770))},{module:()=>Promise.all([o.e(2577),o.e(8133)]).then(o.bind(o,8133))},{module:()=>Promise.all([o.e(2577),o.e(3961)]).then(o.bind(o,3961))},{module:()=>Promise.all([o.e(2577),o.e(9026)]).then(o.bind(o,9026))},{module:()=>Promise.all([o.e(2577),o.e(8075)]).then(o.bind(o,8075))},{module:()=>Promise.all([o.e(2577),o.e(3131)]).then(o.bind(o,3131))},{module:()=>Promise.all([o.e(2577),o.e(3080)]).then(o.bind(o,3080))},{module:()=>Promise.all([o.e(2577),o.e(4727)]).then(o.bind(o,4727))},{module:()=>Promise.all([o.e(2577),o.e(4924)]).then(o.bind(o,4924))}]},{module:d.Z,cls:["form-footer"],flex:"none",items:[{bind:{disabled:e=>0===e.activeIndex},handler:"onPrevPageButtonClick",iconCls:"fas fa-chevron-left",text:"Back"},"->",{bind:{disabled:e=>e.activeIndex===e.maxIndex},handler:"onNextPageButtonClick",iconCls:"fas fa-chevron-right",iconPosition:"right",style:{marginLeft:"1em"},text:"Next page"}]}]}}Neo.applyClassConfig(m);const f=m;var p=o(9585);class g extends p.Z{static config={className:"Form.view.SideNavList",baseCls:["form-side-nav-list","neo-list"],useHeaders:!0};createItemContent(e,t){let o=e[this.displayField];return e.isHeader?o:[{tag:"i",cls:this.getIconCls(e)},{html:o}]}getIconCls(e){let t=["neo-list-icon"];return!0===e.isValid?[...t,"neo-color-green","far","fa-circle-check"]:!1===e.isValid?[...t,"neo-color-red","far","fa-circle-xmark"]:[...t,"neo-color-blue","far","fa-circle"]}onSelect(e){let t=this,o=t.store.get(t.getItemRecordId(e[0]));t.getModel().setData({activeIndex:o.cardIndex,activeTitle:o.name})}onStoreLoad(){let e=-1;this.store.items.forEach((t=>{t.isHeader||e++})),this.getModel().data.maxIndex=e,super.onStoreLoad()}}Neo.applyClassConfig(g);const u=g;class h extends l.Z{static config={className:"Form.view.ViewportController"};async onValidateAllPagesButtonClick(e){let t=this.getReference("main-form"),o=await t.validate(),n=await t.getValues();console.log("All pages",{isValid:o,formValues:n}),await this.updateRecordValidityState()}async onValidatePageButtonClick(e){let t=this,o=t.getModel().data.activeIndex,n=t.getReference("pages-container").items[o],a=await n.getValues();await n.validate(),await t.updateRecordValidityState(o),console.log(`Current page: ${o+1}`,a)}async updateRecordValidityState(e=null){let t,o,n,a=this,s=a.getModel(),l=a.getReference("pages-container"),r=a.getReference("side-nav"),i=s.getStore("sideNav"),c=0,d=l.items.length;for(Neo.isNumber(e)&&(c=e,d=e+1);c<d;c++)n=l.items[c],o=r.getActiveIndex(c),t=await n.isValid(),i.getAt(o).isValid=t}}Neo.applyClassConfig(h);const C=h;var v=o(1758),N=o(2281);class b extends N.Z{static config={className:"Form.model.SideNav",fields:[{name:"cardIndex",type:"Integer"},{name:"id",type:"String"},{name:"isHeader",type:"Boolean"},{name:"isValid",type:"Boolean"},{name:"name",type:"String"}]}}Neo.applyClassConfig(b);const y=b;var x=o(5959);class S extends x.Z{static config={className:"Form.store.SideNav",model:y}}Neo.applyClassConfig(S);const k=S;class P extends v.Z{static config={className:"Form.view.ViewportModel",data:{activeIndex:0,activeTitle:"",maxIndex:0},stores:{sideNav:{module:k,autoLoad:!0,url:"../../resources/examples/data/formSideNav.json"}}};formData=null;construct(e){super.construct(e),Neo.main.addon.LocalStorage.readLocalStorageItem({appName:this.component.appName,key:"neo-form"}).then((e=>{this.formData=JSON.parse(e.value)}))}onDataPropertyChange(e,t,o){super.onDataPropertyChange(e,t,o);let n=this;n.formData&&"activeIndex"===e&&setTimeout((()=>{let o=n.getController().getReference("pages-container").items[t];console.log(e,t,o),o.setValues(n.formData)}),50)}}Neo.applyClassConfig(P);const w=P;class Z extends n.Z{static config={className:"Form.view.Viewport",controller:C,items:[{ntype:"container",style:{margin:"0 1em"},width:"300",items:[{flex:"none",vdom:{tag:"h1",innerHTML:"Nested Forms"}},{module:u,reference:"side-nav",bind:{headerlessActiveIndex:e=>e.activeIndex,store:"stores.sideNav"}}]},{module:f,reference:"main-form",style:{margin:"20px"}}],layout:{ntype:"hbox",align:"stretch"},model:w}}Neo.applyClassConfig(Z);const I=Z,V=()=>Neo.app({mainView:I,name:"Form"})},5163:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(4022);class a extends n.Z{static config={className:"Neo.component.Label",ntype:"label",baseCls:["neo-label"],text_:"",_vdom:{tag:"label",draggable:!1}};afterSetText(e,t){this.vdom.html=e,this.update()}}Neo.applyClassConfig(a);const s=a},3846:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(3106),a=(o(6717),o(2718),o(8041));class s extends n.Z{static config={className:"Neo.controller.Component",ntype:"component-controller",component:null,parent_:null,references:null};construct(e){super.construct(e);let t,o=this,n=o.component;o.references={},n.isConstructed?o.onComponentConstructed():t=n.on("constructed",(()=>{n.un("constructed",t),o.onComponentConstructed()}))}beforeSetParent(e,t){return e||this.getParent()}getHandlerScope(e){let t=this,o=t.parent;return Neo.isFunction(t[e])?t:o?o.getHandlerScope(e):null}getModel(e=!1){let t=this.component;return e?t.model:t.getModel()}getParent(){let e,t,o=this;return o.parent?o.parent:(t=o.component.parentId,e=t&&Neo.getComponent(t),e?.getController()||null)}getReference(e){let t=this,o=t.references[e];return o||(o=t.component.down({reference:e}),o&&(t.references[e]=o)),o||null}onComponentConstructed(){}parseConfig(e=this.component){let t,o,n=this,s=e.listeners,l=e.reference,r=e.validator;s&&Object.entries(s).forEach((([l,r])=>{"scope"!==l&&"delegate"!==l&&(Neo.isString(r)?(t=r,o=n.getHandlerScope(t),o?(s[l]={},s[l].fn=o[t].bind(o)):a.Z.logError("Unknown event handler for",t,e)):r.forEach((s=>{Neo.isObject(s)&&s.hasOwnProperty("fn")&&Neo.isString(s.fn)&&(t=s.fn,o=n.getHandlerScope(t),o?s.fn=o[t].bind(o):a.Z.logError("Unknown event handler for",t,e))})))})),Neo.isString(r)&&(o=n.getHandlerScope(r),o?e.validator=o[r].bind(o):a.Z.logError("Unknown validator for",e.id,e)),l&&(n.references[l]=e)}parseDomListeners(e=this.component){let t,o,n=this,s=e.domListeners;s&&s.forEach((s=>{Object.entries(s).forEach((([l,r])=>{t=null,"scope"!==l&&"delegate"!==l&&(Neo.isString(r)?t=r:Neo.isObject(r)&&r.hasOwnProperty("fn")&&Neo.isString(r.fn)&&(t=r.fn),t&&(o=n.getHandlerScope(t),o?s[l]=o[t].bind(o):a.Z.logError("Unknown domEvent handler for",t,e)))}))}))}removeReference(e){let t,o=this.references;for(t in o)if(e===o[t]){delete o[t];break}this.getParent()?.removeReference(e)}}Neo.applyClassConfig(s);const l=s},5031:(e,t,o)=>{o.d(t,{Z:()=>r}),o(1509);var n=o(4022),a=o(930),s=(o(5163),o(5328));class l extends a.Z{static dockPositions=["top","right","bottom","left",null];static config={className:"Neo.toolbar.Base",ntype:"toolbar",baseCls:["neo-toolbar"],dock_:null,itemDefaults:{ntype:"button"},layout:{ntype:"hbox",align:"center",pack:"start"},sortable_:!1,sortZone:null,sortZoneConfig:null};afterSetAppName(e,t){super.afterSetAppName(e,t),this.sortZone&&(this.sortZone.appName=e)}afterSetDock(e,t){let o=this,n=o.cls;o.getStaticConfig("dockPositions").forEach((t=>{null!==t&&s.Z[t===e?"add":"remove"](n,"neo-dock-"+t)})),o.cls=n,o.layout=o.getLayoutConfig()}afterSetSortable(e,t){let n=this;e&&!n.sortZone&&o.e(1538).then(o.bind(o,1538)).then((e=>{n.sortZone=Neo.create({module:e.default,appName:n.appName,boundaryContainerId:n.id,owner:n,...n.sortZoneConfig})}))}beforeSetDock(e,t){return this.beforeSetEnumValue(e,t,"dock","dockPositions")}createItems(){let e=this._items;return Array.isArray(e)&&e.forEach(((t,o)=>{"->"===t&&(e[o]=Neo.create({module:n.Z,flex:1}))})),super.createItems()}getLayoutConfig(){let e,t=this;if(t.dock)switch(t.dock){case"bottom":case"top":e={ntype:"hbox",align:"center",pack:"start"};break;case"left":e={ntype:"vbox",align:"center",direction:"column-reverse",pack:"start"};break;case"right":e={ntype:"vbox",align:"center",direction:"column",pack:"start"}}return e||t.layout}}Neo.applyClassConfig(l);const r=l}}]);