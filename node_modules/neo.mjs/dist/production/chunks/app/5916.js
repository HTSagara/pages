"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[5916],{2930:(e,t,o)=>{o.d(t,{A:()=>i});var s=o(3079);class r extends s.A{static config={className:"Neo.container.Viewport",ntype:"viewport",applyBodyCls:!0,autoMount:!0,baseCls:["neo-viewport"],monitorSize_:!1};afterSetMounted(e,t){super.afterSetMounted(e,t);let o=this;e&&o.monitorSize&&o.addDomListeners([{resize:o.onDomResize,scope:o}])}onConstructed(){super.onConstructed();let{appName:e,windowId:t}=this;this.applyBodyCls&&Neo.main.DomAccess.applyBodyCls({appName:e,cls:["neo-body-viewport"],windowId:t})}onDomResize(e){this.fire("resize",e)}}Neo.setupClass(r);const i=r},2393:(e,t,o)=>{o.d(t,{A:()=>C});var s=o(3079),r=o(2778),i=o(1315),n=o(3303),l=o(5608),d=o(825);class c extends l.A{static config={className:"Neo.grid.View",ntype:"grid-view",baseCls:["neo-grid-view"]};createViewData(e){let t,o,s,r,i,n,l,d,c,a,h,u,g,m,p=this,w=e.length,f=p.parent,C=f.items[0].items,v=C.length,S=[],y=0,{vdom:A}=p;for(p.recordVnodeMap={},"selection-grid-rowmodel"===f.selectionModel?.ntype&&(g=f.selectionModel.items||[]);y<w;y++){for(h=e[y],l=p.getRowId(h,y),p.recordVnodeMap[l]=y,m=p.getTrClass(h,y),g?.includes(l)&&(m.push("neo-selected"),Neo.getComponent(p.containerId).fire("select",{record:h})),S.push({id:l,cls:m,cn:[],tabIndex:"-1"}),i=0,n=0,c=0;c<v;c++)r=C[c],u=h[r.field],void 0===u&&(u=""),a=r.renderer.call(r.rendererScope||f,{column:r,field:r.field,index:y,record:h,value:u}),t=a?.cls||["neo-grid-cell"],"left"!==r.align&&t.push("neo-"+r.align),Neo.isObject(a)||(a={cls:t,html:a?.toString()}),o=a.style||{},r.width&&(o.minWidth=`${r.width}px`),s={id:p.getCellId(h,r.field),cls:t,innerHTML:a.html||"",style:o,tabIndex:"-1"},r.dock&&(s.cls=["neo-locked",...s.cls||[]],"left"===r.dock&&(s.style.left=i+"px",i+=r.width)),r.flex&&(s.style.width="100%"),S[y].cn.push(s);for(c=0;c<v;c++)d=v-c-1,r=C[d],"right"===r.dock&&(S[y].cn[d].style.right=n+"px",n+=r.width+1)}A.cn=S,f.dockLeftMargin=i,f.dockRightMargin=n,p.promiseUpdate().then((()=>{g?.length>0&&Neo.main.DomAccess.scrollToTableRow({appName:p.appName,id:g[0]})}))}destroy(e,t){this.store=null,super.destroy(e,t)}getCellId(e,t){return this.id+"__"+e[this.store.keyProperty]+"__"+t}getRecord(e){let t,o,s=this,r=s.getRecordByRowId(e);if(r)return r;for(t of(o=d.A.getParentNodes(s.vdom,e),o))if(r=s.getRecordByRowId(t.id),r)return r;return null}getRecordByRowId(e){return this.store.getAt(this.recordVnodeMap[e])}getRowId(e,t){return`${this.id}__tr__${e[this.store.keyProperty]}`}getTrClass(e,t){return["neo-grid-row"]}onStoreRecordChange(e){let t,o,s=this,r=[];e.fields.forEach((i=>{t=s.getCellId(e.record,i.name),o=s.getVdomChild(t),o.innerHTML=i.value,r.push({id:t,innerHTML:i.value})})),r.length>0&&Neo.applyDeltas(s.appName,r)}}Neo.setupClass(c);const a=c;var h=o(4912),u=o(6270);class g extends h.A{static cellAlignValues=["left","center","right"];static config={className:"Neo.grid.header.Button",ntype:"grid-header-button",baseCls:["neo-grid-header-button"],cellAlign_:"left",iconCls:"fa fa-arrow-circle-up",iconPosition:"right",isSorted_:null};defaultSortDirection="ASC";field=null;construct(e){super.construct(e);let t=this;t.addDomListeners({click:t.onButtonClick,scope:t})}afterSetIsSorted(e,t){let o=this,{cls:s}=o;switch(e){case null:u.A.add(s,"neo-sort-hidden");break;case"ASC":u.A.remove(s,"neo-sort-desc"),u.A.remove(s,"neo-sort-hidden"),u.A.add(s,"neo-sort-asc");break;case"DESC":u.A.remove(s,"neo-sort-asc"),u.A.remove(s,"neo-sort-hidden"),u.A.add(s,"neo-sort-desc")}o.cls=s,o.mounted&&o.fire("sort",{direction:e,property:o.field})}beforeSetCellAlign(e,t){return this.beforeSetEnumValue(e,t,"cellAlign","cellAlignValues")}onButtonClick(){let e,t=this;e="DESC"===t.defaultSortDirection?{ASC:null,DESC:"ASC",null:"DESC"}:{ASC:"DESC",DESC:null,null:"ASC"},t.isSorted=e[t.isSorted+""]}removeSortingCss(){let e=this,{cls:t}=e;u.A.add(t,"neo-sort-hidden"),e.cls=t,e._isSorted=null}renderer(e){return e.value}}Neo.setupClass(g);var m=o(3627);class p extends m.A{static config={className:"Neo.grid.header.Toolbar",ntype:"grid-header-toolbar",baseCls:["neo-grid-header-toolbar","neo-toolbar"],itemDefaults:{ntype:"grid-header-button"}};createItems(){let e=this;e.itemDefaults.showHeaderFilter=e.showHeaderFilters,super.createItems();let t,o=0,s=0,r=e.items,i=r.length;r.forEach(((e,n)=>{t=e.wrapperStyle,e.maxWidth&&(t.maxWidth=e.maxWidth+"px"),e.minWidth&&(t.minWidth=e.minWidth+"px"),e.width&&(t.width=e.width+"px"),e.dock&&(e.vdom.cls.push("neo-locked"),"left"===e.dock&&(t.left=o+"px"),o+=e.width+1),e.wrapperStyle=t,"right"===(e=r[i-n-1]).dock&&(t=e.wrapperStyle,t.right=s+"px",e.wrapperStyle=t,s+=e.width+1)})),e.update()}}Neo.setupClass(p);const w=p;class f extends s.A{static config={className:"Neo.grid.Container",ntype:"grid-container",baseCls:["neo-grid-container"],columns_:[],keys:{},layout:"base",selectionModel_:null,store_:null,_vdom:{cls:["neo-grid-wrapper"],cn:[{cn:[]}]}};headerToolbarConfig=null;headerToolbarId=null;viewConfig=null;viewId=null;construct(e){super.construct(e);let t=this;t.headerToolbarId=Neo.getId("grid-header-toolbar"),t.viewId=Neo.getId("grid-view"),t.items=[{module:w,id:t.headerToolbarId,showHeaderFilters:t.showHeaderFilters,...t.headerToolbarConfig},{module:a,containerId:t.id,id:t.viewId,store:t.store,...t.viewConfig}],t.vdom.id=t.id+"wrapper",t.createColumns(t.columns)}afterSetSelectionModel(e,t){this.rendered&&e.register(this)}beforeSetColumns(e,t){return this.configsApplied?this.createColumns(e):e}beforeSetSelectionModel(e,t){return t?.destroy(),r.A.beforeSetInstance(e,i.A)}beforeSetStore(e,t){if(t?.destroy(),e){let t=this,o={filter:t.onStoreFilter,load:t.onStoreLoad,recordChange:t.onStoreRecordChange,scope:t};e instanceof n.A?(e.on(o),e.getCount()>0&&t.onStoreLoad(e.items)):e=r.A.beforeSetInstance(e,n.A,{listeners:o}),t.view&&(t.view.store=e)}return e}createColumns(e){let t,o=this,{columnDefaults:s}=o,r=o.store?.sorters;return e&&e.length||Neo.logError("Attempting to create a grid.Container without defined columns",o.id),e.forEach((e=>{t=e.renderer,s&&Neo.assignDefaults(e,s),e.dock&&!e.width&&Neo.logError("Attempting to create a docked column without a defined width",e,o.id),t&&Neo.isString(t)&&o[t]&&(e.renderer=o[t]),r?.[0]&&e.field===r[0].property&&(e.isSorted=r[0].direction),e.listeners={sort:o.onSortColumn,scope:o}})),o.items[0].items=e,e}createViewData(e){this.getView().createViewData(e)}getVdomRoot(){return this.vdom.cn[0]}getVdomItemsRoot(){return this.vdom.cn[0]}getView(){return Neo.getComponent(this.viewId)||Neo.get(this.viewId)}getVnodeRoot(){return this.vnode.childNodes[0]}onConstructed(){super.onConstructed(),this.selectionModel?.register(this)}onSortColumn(e){let t=this;t.store.sort(e),t.removeSortingCss(e.property),t.onStoreLoad(t.store.items)}onStoreFilter(){this.onStoreLoad(this.store.items)}onStoreLoad(e){let t,o=this;o.rendered?(o.createViewData(e),o.store.sorters.length<1&&o.removeSortingCss()):t=o.on("rendered",(()=>{o.un("rendered",t),setTimeout((()=>{o.createViewData(e)}),50)}))}onStoreRecordChange(e){this.getView().onStoreRecordChange(e)}removeSortingCss(e){this.items[0].items.forEach((t=>{t.field!==e&&t.removeSortingCss()}))}}Neo.setupClass(f);const C=f},6556:(e,t,o)=>{o.d(t,{A:()=>n});var s=o(2583),r=o(6270);o(5691);class i extends s.A{static observable=!0;static config={className:"Neo.selection.Model",ntype:"selection-model",cls:null,items_:null,selectedCls:"neo-selected",singleSelect:!0,view_:null};beforeGetItems(e){return e||(this._items=e=[]),e}beforeGetView(e){return Neo.getComponent(this._view)}beforeSetView(e){return e&&e.id}addDomListener(){}deselect(e,t,o=this.items,s){if(e=e.isRecord?view.getItemId(e):Neo.isObject(e)?e.id:e,o.includes(e)){let i=this,{view:n}=i,l=n.getVdomChild(e);l&&(l.cls=r.A.remove(l.cls||[],s||i.selectedCls),l["aria-selected"]=!1),r.A.remove(o,e),t||(n.update(),i.fire("selectionChange",{selection:o}))}else t||this.fire("noChange")}deselectAll(e){let t=this,o=[...t.items],{view:s}=t;o.length?(o.forEach((e=>{t.deselect(e,!0)})),!e&&o.length>0&&s.update(),t.fire("selectionChange",{selection:this.items})):e||t.fire("noChange")}destroy(...e){this.unregister(),super.destroy(...e)}getSelection(){return this.items}hasSelection(){return this.items.length>0}isSelected(e){return this.items.includes(e)}register(e){let t=this,o=e.cls||[];t.cls&&!o.includes(t.cls)&&(o.push(t.cls),e.cls=o),t.view=e,t.addDomListener()}removeDomListeners(){let e=this,t=e.view,o=[...t.domListeners];t.domListeners.forEach((t=>{t.scope===e&&r.A.remove(o,t)})),t.domListeners=o}select(e,t=this.items,o){let s=this,{view:i}=s;e=(e=Array.isArray(e)?e:[e]).map((e=>e.isRecord?i.getItemId(e):Neo.isObject(e)?e.id:e)),Neo.isEqual(t,e)?s.fire("noChange"):(s.singleSelect&&s.deselectAll(!0),e.forEach(((e,t)=>{(e=i.getVdomChild(e))&&(e.cls=r.A.add(e.cls||[],o||s.selectedCls),e["aria-selected"]=!0)})),r.A.add(t,e),!i.silentSelect&&i.update(),i.onSelect?.(e),s.fire("selectionChange",{selection:t}))}toggleSelection(e){let t=this;t.isSelected(e)?t.deselect(e):t.select(e)}unregister(){let e=this,t=e.view.cls||[];e.cls&&t.includes(e.cls)&&(r.A.remove(t,e.cls),e.view.cls=t),e.deselectAll(),e.removeDomListeners()}}Neo.setupClass(i);const n=i},1315:(e,t,o)=>{o.d(t,{A:()=>n});var s=o(6556),r=o(825);class i extends s.A{static config={className:"Neo.selection.grid.RowModel",ntype:"selection-grid-rowmodel",cls:"neo-selection-rowmodel"};addDomListener(){let e=this,{view:t}=e;t.addDomListeners({click:e.onRowClick,delegate:".neo-grid-row",scope:e})}getRowId(e){return e<0||this.view.store.getCount()<e?null:this.view.vdom.cn[0].cn[1].cn[e].id}static getRowNode(e){let t=0,o=e.length,s=null;for(;t<o;t++)e[t].cls.includes("neo-grid-row")&&(s=e[t]);return s}onKeyDownDown(e){this.onNavKeyRow(e,1)}onKeyDownUp(e){this.onNavKeyRow(e,-1)}onNavKeyRow(e,t){let o,s=i.getRowNode(e.path),{view:n}=this,{store:l}=n,d=r.A.findVdomChild(n.vdom,s.id),c=(d.index+t)%l.getCount(),{parentNode:a}=d;for(;c<0;)c+=l.getCount();o=a.cn[c].id,o&&(this.select(o),n.focus(o),n.fire("select",{record:l.getAt(c)}))}onRowClick(e){let t,o,s=this,n=i.getRowNode(e.path),l=n?.id,{view:d}=s;l&&(s.toggleSelection(l),t=s.isSelected(l),o=d.store.getAt(r.A.findVdomChild(d.vdom,l).index),!t&&d.onDeselect?.(o),d.fire(t?"select":"deselect",{record:o}))}register(e){super.register(e);let{id:t,view:o}=this;o.keys?._keys.push({fn:"onKeyDownDown",key:"Down",scope:t},{fn:"onKeyDownUp",key:"Up",scope:t})}unregister(){let{id:e,view:t}=this;t.keys?.removeKeys([{fn:"onKeyDownDown",key:"Down",scope:e},{fn:"onKeyDownUp",key:"Up",scope:e}]),super.unregister()}}Neo.setupClass(i);const n=i}}]);