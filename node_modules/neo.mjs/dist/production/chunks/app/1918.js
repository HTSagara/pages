"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[1918],{1918:(e,t,o)=>{o.r(t),o.d(t,{onStart:()=>F}),Neo.overwrites={Neo:{form:{field:{CheckBox:{useAlertState_:!0},Text:{labelPosition_:"inline",showOptionalText_:!0,useAlertState_:!0}}}}},Neo.overwrites;var n=o(2930),a=o(2714),s=o(232),r=o(5800);class l extends r.A{static config={className:"Form.view.FormContainerController"};onComponentConstructed(){super.onComponentConstructed(),this.component.on({fieldChange:e=>console.log("fieldChange",e),fieldFocusLeave:e=>console.log("fieldFocusLeave",e),fieldUserChange:e=>console.log("fieldUserChange",e)})}onNextPageButtonClick(e){this.getModel().data.activeIndex++}onPrevPageButtonClick(e){this.getModel().data.activeIndex--}async onSaveButtonClick(e){let t=this.getReference("main-form"),o=await t.getValues();Neo.main.addon.LocalStorage.updateLocalStorageItem({appName:this.component.appName,key:"neo-form",value:JSON.stringify(o)})}}Neo.setupClass(l);const i=l;var c=o(414),d=o(3627);class m extends a.A{static config={className:"Form.view.FormContainer",baseCls:["form-form-container","neo-container"],controller:i,items:[{module:d.A,cls:["form-header"],flex:"none",items:[{module:c.A,bind:{text:e=>e.activeTitle},cls:["form-header-label"],flex:"none"},"->",{iconCls:["fas","fa-file"],handler:"onValidatePageButtonClick",text:"Validate page"},{iconCls:["fas","fa-layer-group"],handler:"onValidateAllPagesButtonClick",style:{marginLeft:"1em"},text:"Validate all pages"},{iconCls:["fas","fa-floppy-disk"],handler:"onSaveButtonClick",style:{marginLeft:"1em"},text:"Save"}]},{module:s.A,reference:"pages-container",layout:{ntype:"card",bind:{activeIndex:e=>e.activeIndex}},items:[{module:()=>Promise.all([o.e(3599),o.e(7868)]).then(o.bind(o,7868))},{module:()=>Promise.all([o.e(3599),o.e(6869),o.e(1879)]).then(o.bind(o,1879))},{module:()=>Promise.all([o.e(3599),o.e(6318)]).then(o.bind(o,6318))},{module:()=>o.e(5153).then(o.bind(o,5153))},{module:()=>o.e(7712).then(o.bind(o,7712))},{module:()=>Promise.all([o.e(3599),o.e(7931)]).then(o.bind(o,7931))},{module:()=>Promise.all([o.e(3599),o.e(1794)]).then(o.bind(o,1794))},{module:()=>Promise.all([o.e(3599),o.e(7701)]).then(o.bind(o,7701))},{module:()=>o.e(6251).then(o.bind(o,6251))},{module:()=>Promise.all([o.e(3599),o.e(3322),o.e(2560)]).then(o.bind(o,2560))},{module:()=>Promise.all([o.e(3599),o.e(3322),o.e(4088)]).then(o.bind(o,4088))},{module:()=>Promise.all([o.e(3599),o.e(1490)]).then(o.bind(o,1490))},{module:()=>Promise.all([o.e(3599),o.e(667)]).then(o.bind(o,667))},{module:()=>Promise.all([o.e(3599),o.e(1515)]).then(o.bind(o,1515))},{module:()=>Promise.all([o.e(3599),o.e(4454)]).then(o.bind(o,4454))}]},{module:d.A,cls:["form-footer"],flex:"none",items:[{bind:{disabled:e=>0===e.activeIndex},handler:"onPrevPageButtonClick",iconCls:"fas fa-chevron-left",text:"Back"},"->",{bind:{disabled:e=>e.activeIndex===e.maxIndex},handler:"onNextPageButtonClick",iconCls:"fas fa-chevron-right",iconPosition:"right",style:{marginLeft:"1em"},text:"Next page"}]}]}}Neo.setupClass(m);const f=m;var p=o(5156);class g extends p.A{static config={className:"Form.view.SideNavList",baseCls:["form-side-nav-list","neo-list"],itemsFocusable:!0,useHeaders:!0};createItemContent(e,t){let o=e[this.displayField];return e.isHeader?o:[{tag:"i",cls:this.getIconCls(e)},{html:o}]}getIconCls(e){let t=["neo-list-icon"];return"valid"===e.formState?[...t,"neo-color-green","far","fa-circle-check"]:"invalid"===e.formState?[...t,"neo-color-red","far","fa-circle-xmark"]:"inProgress"===e.formState?[...t,"neo-color-blue","fas","fa-circle-half-stroke"]:[...t,"neo-color-blue","far","fa-circle"]}onSelect(e){let t=this,o=t.store.get(t.getItemRecordId(e[0]));t.getModel().setData({activeIndex:o.cardIndex,activeTitle:o.name})}onStoreLoad(){let e=-1;this.store.items.forEach((t=>{t.isHeader||e++})),this.getModel().data.maxIndex=e,super.onStoreLoad()}}Neo.setupClass(g);const u=g;class h extends r.A{static config={className:"Form.view.ViewportController"};async onValidateAllPagesButtonClick(e){let t=this.getReference("main-form"),o=await t.getFormState(),n=await t.getValues();console.log("All pages",{formState:o,formValues:n}),await this.updateRecordValidityState()}async onValidatePageButtonClick(e){let t=this,o=t.getModel().data.activeIndex,n=t.getReference("pages-container").items[o],a=await n.getValues();await t.updateRecordValidityState(o),console.log(`Current page: ${o+1}`,a)}async updateRecordValidityState(e=null){let t,o,n,a=this,s=a.getModel(),r=a.getReference("pages-container"),l=a.getReference("side-nav"),i=s.getStore("sideNav"),c=0,d=r.items.length;for(Neo.isNumber(e)&&(c=e,d=e+1);c<d;c++)n=r.items[c],o=l.getActiveIndex(c),t=await n.getFormState(),i.getAt(o).formState=t}}Neo.setupClass(h);const C=h;var v=o(635),N=o(8202);class x extends N.A{static config={className:"Form.model.SideNav",fields:[{name:"cardIndex",type:"Integer"},{name:"formState",type:"String"},{name:"id",type:"String"},{name:"isHeader",type:"Boolean"},{name:"name",type:"String"}]}}Neo.setupClass(x);const S=x;var b=o(3303);class y extends b.A{static config={className:"Form.store.SideNav",model:S}}Neo.setupClass(y);const w=y;class P extends v.A{static config={className:"Form.view.ViewportModel",data:{activeIndex:0,activeTitle:"",maxIndex:0},stores:{sideNav:{module:w,autoLoad:!0,url:"../../resources/examples/data/formSideNav.json"}}};formData=null;construct(e){super.construct(e),Neo.main.addon.LocalStorage.readLocalStorageItem({appName:this.component.appName,key:"neo-form"}).then((e=>{this.formData=JSON.parse(e.value)}))}onDataPropertyChange(e,t,o){super.onDataPropertyChange(e,t,o);let n=this;if(n.formData&&"activeIndex"===e){let a=n.getController().getReference("pages-container").items[t];a instanceof Neo.core.Base?a.setValues(n.formData,!0):setTimeout((()=>{n.onDataPropertyChange(e,t,o)}),30)}}}Neo.setupClass(P);const k=P;class A extends n.A{static config={className:"Form.view.Viewport",controller:C,items:[{ntype:"container",style:{margin:"0 1em"},width:"300",items:[{flex:"none",vdom:{tag:"h1",innerHTML:"Nested Forms"}},{module:u,reference:"side-nav",bind:{headerlessSelectedIndex:e=>e.activeIndex,store:"stores.sideNav"}}]},{module:f,reference:"main-form",style:{margin:"20px"}}],layout:{ntype:"hbox",align:"stretch"},model:k}}Neo.setupClass(A);const I=A,F=()=>Neo.app({mainView:I,name:"Form"})},2930:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(232);class a extends n.A{static config={className:"Neo.container.Viewport",ntype:"viewport",applyBodyCls:!0,autoMount:!0,baseCls:["neo-viewport"]};onConstructed(){super.onConstructed(),this.applyBodyCls&&Neo.main.DomAccess.applyBodyCls({appName:this.appName,cls:["neo-body-viewport"]})}}Neo.setupClass(a);const s=a},5800:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(2432),a=o(599);class s extends n.A{static config={className:"Neo.controller.Component",ntype:"component-controller",component:null,parent_:null,references:null};construct(e){super.construct(e);let t,o=this,n=o.component;o.references={},n.isConstructed?o.onComponentConstructed():t=n.on("constructed",(()=>{n.un("constructed",t),o.onComponentConstructed()}))}beforeSetParent(e,t){return e||this.getParent()}getHandlerScope(e,t){let o=this,n=o.parent;return!(!t||!t.resolveCallback(e,t).fn)||(Neo.isFunction(o[e])?o:n?n.getHandlerScope(e):null)}getModel(e=!1){let t=this.component;return e?t.model:t.getModel()}getParent(){let e=this;return e.parent?e.parent:e.component.parent?.getController()||null}getReference(e){let t=this,o=t.references[e];return o||(o=t.component.down({reference:e}),o&&(t.references[e]=o)),o||null}getStore(e){return this.getModel().getStore(e)}onComponentConstructed(){}parseConfig(e=this.component){let t,o,n=this,s=e.handler,r=e.listeners,l=e.reference,i=e.validator;s&&"string"==typeof s&&(o=n.getHandlerScope(s,e),!0!==o&&(e.handler=o[s].bind(e.handlerScope||o))),r&&Object.entries(r).forEach((([s,l])=>{"scope"!==s&&"delegate"!==s&&(Neo.isString(l)?(t=l,o=n.getHandlerScope(t,e),o?!0!==o&&(r[s]={},r[s].fn=o[t].bind(o)):a.A.logError("Unknown event handler for",t,e)):l.forEach((a=>{Neo.isObject(a)&&a.hasOwnProperty("fn")&&Neo.isString(a.fn)&&(t=a.fn,o=n.getHandlerScope(t,e),o?!0!==o&&(a.fn=o[t].bind(o)):console.error("Unknown event handler for",t,e))})))})),Neo.isString(i)&&(o=n.getHandlerScope(i),o?e.validator=o[i].bind(o):a.A.logError("Unknown validator for",e.id,e)),l&&(n.references[l]=e)}parseDomListeners(e=this.component){let t,o,n=this,s=e.domListeners;s&&s.forEach((s=>{Object.entries(s).forEach((([r,l])=>{t=null,"scope"!==r&&"delegate"!==r&&(Neo.isString(l)?t=l:Neo.isObject(l)&&l.hasOwnProperty("fn")&&Neo.isString(l.fn)&&(t=l.fn),t&&(o=n.getHandlerScope(t),o?s[r]=o[t].bind(o):a.A.logError("Unknown domEvent handler for",t,e)))}))}))}removeReference(e){let t,o=this.references;for(t in o)if(e===o[t]){delete o[t];break}this.getParent()?.removeReference(e)}}Neo.setupClass(s);const r=s}}]);