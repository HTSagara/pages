"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[1918],{1918:(e,t,n)=>{n.r(t),n.d(t,{onStart:()=>F}),Neo.overwrites={Neo:{form:{field:{CheckBox:{useAlertState_:!0},Text:{labelPosition_:"inline",showOptionalText_:!0,useAlertState_:!0}}}}},Neo.overwrites;var o=n(2930),a=n(2714),r=n(3079),s=n(5800);class l extends s.A{static config={className:"Form.view.FormContainerController"};onComponentConstructed(){super.onComponentConstructed(),this.component.on({fieldChange:e=>console.log("fieldChange",e),fieldFocusLeave:e=>console.log("fieldFocusLeave",e),fieldUserChange:e=>console.log("fieldUserChange",e)})}onNextPageButtonClick(e){this.getModel().data.activeIndex++}onPrevPageButtonClick(e){this.getModel().data.activeIndex--}async onSaveButtonClick(e){let t=this.getReference("main-form"),n=await t.getSubmitValues();Neo.main.addon.LocalStorage.updateLocalStorageItem({appName:this.component.appName,key:"neo-form",value:JSON.stringify(n)})}}const i=Neo.setupClass(l);var c=n(414),d=n(3627);class m extends a.A{static config={className:"Form.view.FormContainer",baseCls:["form-form-container","neo-container"],controller:i,items:[{module:d.A,cls:["form-header"],flex:"none",items:[{module:c.A,bind:{text:e=>e.activeTitle},cls:["form-header-label"],flex:"none"},"->",{iconCls:["fas","fa-file"],handler:"onValidatePageButtonClick",text:"Validate page"},{iconCls:["fas","fa-layer-group"],handler:"onValidateAllPagesButtonClick",style:{marginLeft:"1em"},text:"Validate all pages"},{iconCls:["fas","fa-floppy-disk"],handler:"onSaveButtonClick",style:{marginLeft:"1em"},text:"Save"}]},{module:r.A,reference:"pages-container",layout:{ntype:"card",bind:{activeIndex:e=>e.activeIndex}},items:[{module:()=>Promise.all([n.e(3599),n.e(7868)]).then(n.bind(n,7868))},{module:()=>Promise.all([n.e(3599),n.e(479),n.e(1879)]).then(n.bind(n,1879))},{module:()=>Promise.all([n.e(3599),n.e(6318)]).then(n.bind(n,6318))},{module:()=>n.e(5153).then(n.bind(n,5153))},{module:()=>n.e(7712).then(n.bind(n,7712))},{module:()=>Promise.all([n.e(3599),n.e(7931)]).then(n.bind(n,7931))},{module:()=>Promise.all([n.e(3599),n.e(1794)]).then(n.bind(n,1794))},{module:()=>Promise.all([n.e(3599),n.e(7701)]).then(n.bind(n,7701))},{module:()=>n.e(6251).then(n.bind(n,6251))},{module:()=>Promise.all([n.e(3599),n.e(6827),n.e(2560)]).then(n.bind(n,2560))},{module:()=>Promise.all([n.e(3599),n.e(6827),n.e(4088)]).then(n.bind(n,4088))},{module:()=>Promise.all([n.e(3599),n.e(1490)]).then(n.bind(n,1490))},{module:()=>Promise.all([n.e(3599),n.e(667)]).then(n.bind(n,667))},{module:()=>Promise.all([n.e(3599),n.e(1515)]).then(n.bind(n,1515))},{module:()=>Promise.all([n.e(3599),n.e(4454)]).then(n.bind(n,4454))}]},{module:d.A,cls:["form-footer"],flex:"none",items:[{bind:{disabled:e=>0===e.activeIndex},handler:"onPrevPageButtonClick",iconCls:"fas fa-chevron-left",text:"Back"},"->",{bind:{disabled:e=>e.activeIndex===e.maxIndex},handler:"onNextPageButtonClick",iconCls:"fas fa-chevron-right",iconPosition:"right",style:{marginLeft:"1em"},text:"Next page"}]}]}}const f=Neo.setupClass(m);var g=n(5156);class u extends g.A{static config={className:"Form.view.SideNavList",baseCls:["form-side-nav-list","neo-list"],itemsFocusable:!0,useHeaders:!0};createItemContent(e,t){let n=e[this.displayField];return e.isHeader?n:[{tag:"i",cls:this.getIconCls(e)},{html:n}]}getIconCls(e){let t=["neo-list-icon"];return"valid"===e.formState?[...t,"neo-color-green","far","fa-circle-check"]:"invalid"===e.formState?[...t,"neo-color-red","far","fa-circle-xmark"]:"inProgress"===e.formState?[...t,"neo-color-blue","fas","fa-circle-half-stroke"]:[...t,"neo-color-blue","far","fa-circle"]}onSelect(e){let t=this,n=t.store.get(t.getItemRecordId(e[0]));t.getModel().setData({activeIndex:n.cardIndex,activeTitle:n.name})}onStoreLoad(){let e=-1;this.store.items.forEach((t=>{t.isHeader||e++})),this.getModel().data.maxIndex=e,super.onStoreLoad()}}const p=Neo.setupClass(u);class h extends s.A{static config={className:"Form.view.ViewportController"};async onValidateAllPagesButtonClick(e){let t=this.getReference("main-form"),n=await t.getFormState(),o=await t.getSubmitValues();console.log("All pages",{formState:n,formValues:o}),await this.updateRecordValidityState()}async onValidatePageButtonClick(e){let t=this,n=t.getModel().data.activeIndex,o=t.getReference("pages-container").items[n],a=await o.getSubmitValues();await t.updateRecordValidityState(n),console.log(`Current page: ${n+1}`,a)}async updateRecordValidityState(e=null){let t,n,o,a=this,r=a.getModel(),s=a.getReference("pages-container"),l=a.getReference("side-nav"),i=r.getStore("sideNav"),c=0,d=s.items.length;for(Neo.isNumber(e)&&(c=e,d=e+1);c<d;c++)o=s.items[c],n=l.getActiveIndex(c),t=await o.getFormState(),i.getAt(n).formState=t}}const v=Neo.setupClass(h);var C=n(635),S=n(8202);class N extends S.A{static config={className:"Form.model.SideNav",fields:[{name:"cardIndex",type:"Integer"},{name:"formState",type:"String"},{name:"id",type:"String"},{name:"isHeader",type:"Boolean"},{name:"name",type:"String"}]}}const x=Neo.setupClass(N);var b=n(3303);class y extends b.A{static config={className:"Form.store.SideNav",model:x}}const P=Neo.setupClass(y);class w extends C.A{static config={className:"Form.view.ViewportModel",data:{activeIndex:0,activeTitle:"",maxIndex:0},stores:{sideNav:{module:P,autoLoad:!0,url:"../../resources/examples/data/formSideNav.json"}}};formData=null;construct(e){super.construct(e),Neo.main.addon.LocalStorage.readLocalStorageItem({appName:this.component.appName,key:"neo-form"}).then((e=>{this.formData=JSON.parse(e.value)}))}onDataPropertyChange(e,t,n){super.onDataPropertyChange(e,t,n);let o=this;if(o.formData&&"activeIndex"===e){let a=o.getController().getReference("pages-container").items[t];a instanceof Neo.core.Base?a.setValues(o.formData,!0):o.timeout(30).then((()=>{o.onDataPropertyChange(e,t,n)}))}}}const I=Neo.setupClass(w);class k extends o.A{static config={className:"Form.view.Viewport",controller:v,items:[{ntype:"container",style:{margin:"0 1em"},width:"300",items:[{flex:"none",vdom:{tag:"h1",innerHTML:"Nested Forms"}},{module:p,reference:"side-nav",bind:{headerlessSelectedIndex:e=>e.activeIndex,store:"stores.sideNav"}}]},{module:f,reference:"main-form",style:{margin:"20px"}}],layout:{ntype:"hbox",align:"stretch"},model:I}}const A=Neo.setupClass(k),F=()=>Neo.app({mainView:A,name:"Form"})},5800:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(2432),a=n(3439),r=n(599);class s extends o.A{static config={className:"Neo.controller.Component",ntype:"component-controller",component:null,parent_:null,references:null,windowId:null};construct(e){super.construct(e);let t,n=this,{component:o}=n;n.references={},o.isConstructed?n.onComponentConstructed():t=o.on("constructed",(()=>{o.un("constructed",t),n.onComponentConstructed()}))}beforeSetParent(e,t){return e||this.getParent()}getHandlerScope(e,t){let n=this,{parent:o}=n;return!(!t||!(0,a.Ap)(e,t).fn)||(Neo.isFunction(n[e])?n:o?.getHandlerScope(e)||null)}getModel(e=!1){let{component:t}=this;return e?t.model:t.getModel()}getParent(){let{parent:e}=this;return e||this.component.parent?.getController()||null}getReference(e){let t=this,n=t.references[e];return n||(n=t.component.down({reference:e}),n&&(t.references[e]=n)),n||null}getStore(e){return this.getModel().getStore(e)}onComponentConstructed(){}parseConfig(e=this.component){let t,n,o=this,{handler:a,listeners:s,reference:l,validator:i}=e;a&&"string"==typeof a&&(n=o.getHandlerScope(a,e),!0!==n&&(e.handler=n[a].bind(e.handlerScope||n))),s&&Object.entries(s).forEach((([a,l])=>{"scope"!==a&&"delegate"!==a&&(Neo.isString(l)?(t=l,n=o.getHandlerScope(t,e),n?!0!==n&&(s[a]={},s[a].fn=n[t].bind(n)):r.A.logError("Unknown event handler for",t,e)):l.forEach((a=>{Neo.isObject(a)&&a.hasOwnProperty("fn")&&Neo.isString(a.fn)&&(t=a.fn,n=o.getHandlerScope(t,e),n?!0!==n&&(a.fn=n[t].bind(n)):console.error("Unknown event handler for",t,e))})))})),Neo.isString(i)&&(n=o.getHandlerScope(i),n?e.validator=n[i].bind(n):r.A.logError("Unknown validator for",e.id,e)),l&&(o.references[l]=e)}parseDomListeners(e=this.component){let t,n,o=this,{domListeners:a}=e;a?.forEach((e=>{Object.entries(e).forEach((([a,r])=>{t=null,"scope"!==a&&"delegate"!==a&&(Neo.isString(r)?t=r:Neo.isObject(r)&&r.hasOwnProperty("fn")&&Neo.isString(r.fn)&&(t=r.fn),t&&(n=o.getHandlerScope(t),n&&(e[a]=n[t].bind(n))))}))}))}removeReference(e){let t,{references:n}=this;for(t in n)if(e===n[t]){delete n[t];break}this.getParent()?.removeReference(e)}}const l=Neo.setupClass(s)}}]);