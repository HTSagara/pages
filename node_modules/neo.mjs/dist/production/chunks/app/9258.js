"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[9258],{9258:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var o=n(9585),s=n(4356);class i extends s.Z{static config={className:"Neo.selection.menu.ListModel",ntype:"selection-menu-listmodel"};onKeyDownEscape(e){this.view.onKeyDownEscape(e)}onKeyDownLeft(e){let t=this.view,n=t.parentMenu;n&&(t.hideSubMenu(),t.selectionModel.deselectAll(),n.selectionModel.selectAt(t.parentIndex))}onKeyDownRight(e){let t=this.view.activeSubMenu;t&&t.selectionModel.selectAt(0)}}Neo.applyClassConfig(i);const u=i;var l=n(5328),a=n(4325);class r extends o.Z{static config={className:"Neo.menu.List",ntype:"menu-list",activeSubMenu:null,baseCls:["neo-menu-list","neo-list"],floating_:!1,focusTimeoutId:null,hideOnLeafItemClick:!0,items_:null,menuFocus_:!1,isRoot:!0,parentIndex:0,parentMenu:null,selectionModel:u,store:a.Z,subMenuGap:0,subMenuMap:null,zIndex_:100,_vdom:{tag:"ul",tabIndex:-1,cn:[]}};parentComponent=null;afterSetFloating(e,t){let n=this.cls;l.Z[e?"add":"remove"](n,"neo-floating"),this.cls=n}afterSetItems(e,t){let n=this.store;t&&n.remove(t),e&&n.add(e)}afterSetMenuFocus(e,t){if(void 0!==t){let t=this;t.isRoot?e?(clearTimeout(t.focusTimeoutId),t.focusTimeoutId=null):t.focusTimeoutId=setTimeout((()=>{t[t.floating?"unmount":"hideSubMenu"]()}),20):t.parentMenu.menuFocus=e}}afterSetMounted(e,t){super.afterSetMounted(e,t);let n=this,o=n.id,s=n.parentComponent?.id;s&&(e?(Neo.main.addon.ScrollSync.register({sourceId:s,targetId:o}),!n.parentMenu&&n.getDomRect([o,s]).then((e=>{let t=n.style||{};t.left=e[1].right-e[0].width+"px",t.top=`${e[1].bottom+1}px`,n.style=t}))):void 0!==t&&Neo.main.addon.ScrollSync.unregister({sourceId:s,targetId:o}))}afterSetZIndex(e,t){this.style={...this.style,zIndex:e}}createItemContent(e,t){let n=this,o=e.iconCls,s=e[n.store.keyProperty],i=[{tag:"span",cls:["neo-content"],html:e[n.displayField]}];return o&&""!==o&&i.unshift({tag:"i",cls:["neo-menu-icon","neo-icon",o],id:n.getIconId(s)}),n.hasChildren(e)&&i.push({tag:"i",cls:["neo-arrow-icon","neo-icon","fas fa-chevron-right"],id:n.getArrowIconId(s)}),i}destroy(...e){let t=this,n=t.activeSubMenu,o=t.subMenuMap;t.store.destroy(),n?.unmount(),Object.entries(o).forEach((([e,t])=>{t.destroy(),o[e]=null})),super.destroy(...e)}getArrowIconId(e){return`${this.id}__arrow_icon__${e}`}getIconId(e){return`${this.id}__icon__${e}`}getMenuMapId(e){return`menu__${e}`}hasChildren(e){return Array.isArray(e.items)&&e.items.length>0}hideSubMenu(){let e=this.activeSubMenu;e&&(e.unmount(),this.activeSubMenu=null)}onFocusEnter(e){this.menuFocus=!0}onFocusLeave(e){let t,n=!1,o=this.parentComponent?.id;if(o)for(t of e.oldPath)if(t.id===o){n=!0;break}n||(this.menuFocus=!1)}onItemClick(e,t){super.onItemClick(e,t);let n=this,o=t.record;o.handler?.call(n,o),n.hideOnLeafItemClick&&!o.items&&n.unmount()}onKeyDownEnter(e){if(e){let t,n=this,o=n.getItemRecordId(e),s=n.store.get(o);s.handler?.call(n,s),n.hideOnLeafItemClick&&!s.items&&n.unmount(),s.items&&(t=n.subMenuMap[n.getMenuMapId(o)],t&&n.toggleSubMenu(e,s))}}onKeyDownEscape(e){this.floating&&this.unmount()}onSelect(e){let t=this,n=e[0],o=t.getItemRecordId(n),s=t.store.get(o);t.activeSubMenu!==t.subMenuMap?.[t.getMenuMapId(o)]&&(t.hideSubMenu(),t.hasChildren(s)&&t.showSubMenu(n,s))}showSubMenu(e,t){let n,o,s=this,i=s.store,u=t[i.keyProperty],l=s.subMenuMap||{},a=s.getMenuMapId(u),d=l[a];s.getDomRect(e).then((e=>{o={left:`${e.right+s.subMenuGap}px`,top:e.top-1+"px"},d?(n=d.style,Object.assign(n,o),d.setSilent({style:n})):l[a]=d=Neo.create({module:r,appName:s.appName,displayField:s.displayField,floating:!0,items:t.items,isRoot:!1,parentComponent:s.parentComponent,parentId:Neo.apps[s.appName].mainView.id,parentIndex:i.indexOf(t),parentMenu:s,style:o,zIndex:s.zIndex+1}),s.activeSubMenu=d,s.subMenuMap=l,d.render(!0)}))}toggleSubMenu(e,t){let n=this,o=t[n.getKeyProperty()],s=n.subMenuMap[n.getMenuMapId(o)];s?.mounted?n.hideSubMenu():n.showSubMenu(e,t)}unmount(){this.selectionModel.deselectAll(!0),this.hideSubMenu(),super.unmount()}}Neo.applyClassConfig(r);const d=r},4325:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(2281);class s extends o.Z{static config={className:"Neo.menu.Model",keyProperty:"id",fields:[{name:"handler",type:"Function"},{name:"iconCls",type:"String"},{name:"id",type:"Integer"},{name:"items",type:"Array"},{name:"text",type:"String"}]}}Neo.applyClassConfig(s);const i=s;var u=n(5959);class l extends u.Z{static config={className:"Neo.menu.Store",model:i}}Neo.applyClassConfig(l);const a=l}}]);