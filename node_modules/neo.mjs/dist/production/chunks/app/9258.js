"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[9258],{9258:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var s=n(9585),o=n(4356);class i extends o.Z{static config={className:"Neo.selection.menu.ListModel",ntype:"selection-menu-listmodel"};onKeyDownLeft(e){let t=this.view,n=t.parentMenu;n&&(t.hideSubMenu(),t.selectionModel.deselectAll(),n.selectionModel.selectAt(t.parentIndex))}onKeyDownRight(e){let t=this.view.activeSubMenu;t&&t.selectionModel.selectAt(0)}}Neo.applyClassConfig(i);const l=i;var u=n(5328),a=n(4325);class r extends s.Z{static config={className:"Neo.menu.List",ntype:"menu-list",activeSubMenu:null,baseCls:["neo-menu-list","neo-list"],floating_:!1,focusTimeoutId:null,hideOnLeafItemClick:!0,items_:null,menuFocus_:!1,isRoot:!0,parentIndex:0,parentMenu:null,selectionModel:l,store:a.Z,subMenuGap:0,subMenuMap:null,zIndex_:100,_vdom:{tag:"ul",tabIndex:-1,cn:[]}};parentComponent=null;afterSetFloating(e,t){let n=this.cls;u.Z[e?"add":"remove"](n,"neo-floating"),this.cls=n}afterSetItems(e,t){let n=this.store;t&&n.remove(t),e&&n.add(e)}afterSetMenuFocus(e,t){if(void 0!==t){let t=this;t.isRoot?e?(clearTimeout(t.focusTimeoutId),t.focusTimeoutId=null):t.focusTimeoutId=setTimeout((()=>{t[t.floating?"unmount":"hideSubMenu"]()}),20):t.parentMenu.menuFocus=e}}afterSetMounted(e,t){super.afterSetMounted(e,t);let n=this,s=n.id,o=n.parentComponent?.id;o&&(e?(Neo.main.addon.ScrollSync.register({sourceId:o,targetId:s}),n.getDomRect([s,o]).then((e=>{let t=n.style||{};t.left=e[1].right-e[0].width+"px",t.top=`${e[1].bottom+1}px`,n.style=t}))):void 0!==t&&Neo.main.addon.ScrollSync.unregister({sourceId:o,targetId:s}))}afterSetZIndex(e,t){this.style={...this.style,zIndex:e}}createItemContent(e,t){let n=this,s=e.iconCls,o=e[n.store.keyProperty],i=[{tag:"span",cls:["neo-content"],html:e[n.displayField]}];return s&&""!==s&&i.unshift({tag:"i",cls:["neo-menu-icon","neo-icon",s],id:n.getIconId(o)}),n.hasChildren(e)&&i.push({tag:"i",cls:["neo-arrow-icon","neo-icon","fas fa-chevron-right"],id:n.getArrowIconId(o)}),i}destroy(...e){let t=this,n=t.activeSubMenu,s=t.subMenuMap;t.store.destroy(),n?.unmount(),Object.entries(s).forEach((([e,t])=>{t.destroy(),s[e]=null})),super.destroy(...e)}getArrowIconId(e){return`${this.id}__arrow_icon__${e}`}getIconId(e){return`${this.id}__icon__${e}`}getMenuMapId(e){return`menu__${e}`}hasChildren(e){return Array.isArray(e.items)&&e.items.length>0}hideSubMenu(){let e=this.activeSubMenu;e&&(e.unmount(),this.activeSubMenu=null)}onFocusEnter(e){this.menuFocus=!0}onFocusLeave(e){let t,n=!1,s=this.parentComponent?.id;if(s)for(t of e.oldPath)if(t.id===s){n=!0;break}n||(this.menuFocus=!1)}onItemClick(e,t){super.onItemClick(e,t);let n=this;t.record.handler?.call(n,t),n.hideOnLeafItemClick&&!t.record.items&&n.unmount()}onSelect(e){let t=this,n=e[0],s=t.getItemRecordId(n),o=t.store.get(s);t.activeSubMenu!==t.subMenuMap?.[t.getMenuMapId(s)]&&(t.hideSubMenu(),t.hasChildren(o)&&t.showSubMenu(n,o))}showSubMenu(e,t){let n,s,o=this,i=o.store,l=t[i.keyProperty],u=o.subMenuMap||{},a=o.getMenuMapId(l),d=u[a];o.getDomRect(e).then((e=>{s={left:`${e.right+o.subMenuGap}px`,top:e.top-1+"px"},d?(n=d.style,Object.assign(n,s),d.setSilent({style:n})):u[a]=d=Neo.create({module:r,appName:o.appName,displayField:o.displayField,floating:!0,items:t.items,isRoot:!1,parentId:Neo.apps[o.appName].mainView.id,parentIndex:i.indexOf(t),parentMenu:o,style:s,zIndex:o.zIndex+1}),o.activeSubMenu=d,o.subMenuMap=u,d.render(!0)}))}unmount(){this.selectionModel.deselectAll(!0),this.hideSubMenu(),super.unmount()}}Neo.applyClassConfig(r);const d=r},4325:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(2281);class o extends s.Z{static config={className:"Neo.menu.Model",keyProperty:"id",fields:[{name:"handler",type:"Function"},{name:"iconCls",type:"String"},{name:"id",type:"Integer"},{name:"items",type:"Array"},{name:"text",type:"String"}]}}Neo.applyClassConfig(o);const i=o;var l=n(5959);class u extends l.Z{static config={className:"Neo.menu.Store",model:i}}Neo.applyClassConfig(u);const a=u}}]);