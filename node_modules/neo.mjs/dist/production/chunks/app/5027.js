"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[5027],{5027:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var o=n(5608),a=n(8987),r=n(6270);const s=new Date,l=s.getDate(),c=s.getMonth(),h=s.getFullYear();class d extends o.A{static config={className:"Neo.calendar.view.YearComponent",baseCls:["neo-calendar-yearcomponent"],bind:{calendarStore:"stores.calendars",currentDate:e=>e.currentDate,eventStore:"stores.events",locale:e=>e.locale,scrollNewYearFromTop:e=>e.scrollNewYearFromTop,showWeekends:e=>e.showWeekends,weekStartDay:e=>e.weekStartDay},cachedUpdate:null,calendarStore_:null,currentDate_:null,dayNameFormat_:"narrow",eventIndicatorHigh_:3,eventIndicatorLow_:1,eventIndicatorMedium_:2,eventStore_:null,intlFormat_day:null,intlFormat_month:null,isUpdating_:!1,locale_:Neo.config.locale,monthNameFormat_:"long",needsEventUpdate:!1,owner:null,scrollNewYearFromTop:!1,showCellBorders_:!1,showDisabledDays_:!0,showWeekends_:!0,showWeekNumbers_:!0,sixWeeksPerMonth_:!1,useAnimations:!0,vdom:{cn:[{cls:["neo-content-wrapper"],cn:[{cls:["neo-year-header"],cn:[{},{cls:["neo-nav-button","neo-prev-button"]},{cls:["neo-nav-button","neo-next-button"]}]},{cls:["neo-months-container"]}]}]},weekStartDay_:0};construct(e){super.construct(e);let t=this;t.addDomListeners([{click:t.onNavButtonClick,delegate:".neo-nav-button",scope:t},{wheel:t.onWheel,scope:t}]),t.calendarStore.getCount()>0&&t.eventStore.getCount()>0&&t.createMonths(!0),t.updateHeaderYear()}afterSetCalendarStore(e,t){let n=this,o={load:n.onCalendarStoreLoad,recordChange:n.onCalendarStoreRecordChange,scope:n};t?.un(o),e?.on(o)}afterSetCurrentDate(e,t){if(this.isConstructed){let n=t.getFullYear(),o=e.getFullYear();o!==n?this.changeYear(o-n):console.log("## select a new day",e.getMonth(),e.getDate())}}afterSetDayNameFormat(e,t){this.updateDayNamesRows(e,t)}afterSetEventIndicatorHigh(e,t){void 0!==t&&this.createMonths()}afterSetEventIndicatorLow(e,t){void 0!==t&&this.createMonths()}afterSetEventIndicatorMedium(e,t){void 0!==t&&this.createMonths()}afterSetEventStore(e,t){let n=this,o={load:n.onEventStoreLoad,recordChange:n.onEventStoreRecordChange,scope:n};t?.un(o),e?.on(o)}afterSetLocale(e,t){if(void 0!==t){let e=this;e.updateDayNamesRows(e.dayNameFormat,"",!0),e.updateMonthNameFormat(e.monthNameFormat,"")}}afterSetMonthNameFormat(e,t){this.updateMonthNameFormat(e,t)}afterSetMounted(e,t){super.afterSetMounted(e,t);let n=this;e&&n.needsEventUpdate&&(n.createMonths(),n.needsEventUpdate=!1)}afterSetShowCellBorders(e,t){let n=this.cls;r.A[e?"add":"remove"](n,"neo-show-cell-borders"),this.cls=n}afterSetShowWeekends(e,t){if(void 0!==t){let t,n,o,a,r,s=this,l=s.vdom,c=0;for(;c<12;c++)for(n=l.cn[0].cn[1].cn[c].cn,r=n.length,o=1;o<r;o++)for(a=1;a<8;a++)t=n[o].cn[a],t.cls.includes("neo-weekend")&&(e?delete t.removeDom:t.removeDom=!0);s.updateDayNamesRows(s.dayNameFormat,"")}}afterSetShowWeekNumbers(e,t){if(void 0!==t){let t,n,o,a=this,r=0;for(;r<12;r++)for(t=a.vdom.cn[0].cn[1].cn[r].cn,o=t.length,n=1;n<o;n++)t[n].cn[0].removeDom=!e;a.update()}}afterSetSixWeeksPerMonth(e,t){if(void 0!==t){let t=this,n=t.currentDate,o=0;for(n.setMonth(0),n.setDate(1);o<12;o++)t.vdom.cn[0].cn[1].cn[o].cn[7].removeDom=5===a.A.getWeeksOfMonth(n,t.weekStartDay)&&!e,n.setMonth(n.getMonth()+1);t.update()}}afterSetWeekStartDay(e,t){void 0!==t&&this.createMonths()}beforeSetDayNameFormat(e,t){return this.beforeSetEnumValue(e,t,"dayNameFormat",a.A.prototype.dayNameFormats)}beforeSetMonthNameFormat(e,t){return this.beforeSetEnumValue(e,t,"monthNameFormat",a.A.prototype.monthNameFormats)}cacheUpdate(e=this.currentDate){this.cachedUpdate=e}changeYear(e){let t,n,o,a=this;a.useAnimations&&(a.isUpdating||(a.isUpdating=!0,a.getDomRect().then((r=>{t=a.scrollNewYearFromTop&&e<0||!a.scrollNewYearFromTop&&e>0,n=a.vdom,o=t?0:-r.height,n.cn.push({cls:["neo-relative"],cn:[{cls:["neo-animation-wrapper"],cn:[{cls:["neo-content-wrapper"],cn:[{cls:["neo-year-header"],cn:[{html:a.currentDate.getFullYear()},{cls:["neo-nav-button","neo-prev-button"]},{cls:["neo-nav-button","neo-next-button"]}]},{cls:["neo-months-container"]}]}],style:{height:2*r.height+"px",transform:`translateY(${o}px)`,width:`${r.width}px`}}]}),a.createMonths(!0,n.cn[1].cn[0].cn[0].cn[1]),n.cn[1].cn[0].cn[t?"unshift":"push"](n.cn[0]),n.cn.splice(0,1),a.promiseUpdate(n).then((()=>{o=t?-r.height:0,n.cn[0].cn[0].style.transform=`translateY(${o}px)`,a.update(),setTimeout((()=>{n.cn[0]=n.cn[0].cn[0].cn[t?1:0],a.triggerVdomUpdate()}),300)}))}))))}createDayNamesRow(){let e,t,n=this,o=n.currentDate,a=0,r={cls:["neo-calendar-week"],cn:[{cls:["neo-cell","neo-top-left-spacer"]}]};for(o.setDate(n.currentDate.getDate()-n.currentDate.getDay()+n.weekStartDay);a<7;a++)t={cls:["neo-cell","neo-weekday-cell"],html:n.intlFormat_day.format(o)},e=o.getDay(),n.showWeekends||0!==e&&6!==e||(t.removeDom=!0),r.cn.push(t),o.setDate(o.getDate()+1);return r}createMonthContent(e,t){let n,o,r,s,d,m,i,u,D,g,p=this,v=p.calendarStore,f=t.getDate(),w=t.getMonth(),S=t.getFullYear(),y=a.A.clone(t),F=p.eventStore,M=p.currentDate,k=M.getMonth(),N=M.getFullYear(),_=a.A.getDaysInMonth(t),C=a.A.getFirstDayOffset(t,p.weekStartDay),b=0,Y=a.A.clone(t);for(g=(_+C)/7>5?6:5,d=1-C,y.setDate(d),Y.setDate(d+7);b<6;b++){for(D={cls:["neo-calendar-week"],removeDom:b===g&&!p.sixWeeksPerMonth,cn:[{cls:["neo-cell","neo-weeknumber-cell"],html:a.A.getWeekOfYear(Y),removeDom:!p.showWeekNumbers}]},Y.setDate(Y.getDate()+7),u=0;u<7;u++)i=d>0&&d<=_,n=p.getCellId(S,w+1,d),s=y.getDay(),o={id:n,cls:i?["neo-cell"]:["neo-cell","neo-disabled"],tabIndex:i?-1:null,cn:[{cls:["neo-cell-content"],html:i?d:p.showDisabledDays?y.getDate():""}]},r=o.cls,0!==s&&6!==s||(r.push("neo-weekend"),p.showWeekends||(o.removeDom=!0)),h===S&&c===w&&l===d&&o.cn[0].cls.push("neo-today"),N===S&&k===w&&d===f&&r.push("neo-selected"),o.removeDom||(m=F.getDayRecords(y),m=m.filter((e=>v.get(e.calendarId).active)),m.length>=p.eventIndicatorHigh?r.push("neo-events-high"):m.length>=p.eventIndicatorMedium?r.push("neo-events-medium"):m.length>=p.eventIndicatorLow&&r.push("neo-events-low")),D.cn.push(o),y.setDate(y.getDate()+1),d++;e.cn.push(D)}return e}createMonths(e=!1,t){let n=this;if(n.mounted){let o,r=n.currentDate,s=n.vdom,l=t||s.cn[0].cn[1],c=0;for(l.cn=[];c<12;c++)r.setMonth(c),r.setDate(1),o={cls:["neo-month"],cn:[{cls:["neo-month-name"],html:n.intlFormat_month.format(r)},n.createDayNamesRow()]},o=n.createMonthContent(o,a.A.clone(r)),l.cn.push(o);n[e?"_vdom":"vdom"]=s}else n.needsEventUpdate=!0}getCellId(e,t,n){return(n=n.toString()).length<2&&(n="0"+n),(t=t.toString()).length<2&&(t="0"+t),this.id+"__"+e+"-"+t+"-"+n}onCalendarStoreLoad(e){this.eventStore.getCount()>0&&this.createMonths()}onCalendarStoreRecordChange(e){this.createMonths()}onEventStoreLoad(e){this.calendarStore.getCount()>0&&this.createMonths()}onEventStoreRecordChange(e){this.createMonths()}onNavButtonClick(e){let t=this.currentDate;t.setFullYear(t.getFullYear()+(e.path[0].cls.includes("neo-next-button")?1:-1)),this.currentDate=t}onWheel(e){if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){let t=this,n=t.currentDate;n.setFullYear(n.getFullYear()+(e.deltaY>0?1:-1)),t.currentDate=n}}triggerVdomUpdate(e=!1){if(!e){let e=this;e.isUpdating=!0,e.promiseUpdate(e.vdom).then((()=>{e.isUpdating=!1}))}}updateDayNamesRows(e,t,n=!1){let o=this;if(o.intlFormat_day=new Intl.DateTimeFormat(o.locale,{weekday:e}),void 0!==t){let e,t,a,r=o.currentDate,s=o.vdom,l=1;for(r.setDate(o.currentDate.getDate()-o.currentDate.getDay()+o.weekStartDay);l<8;l++){for(t=0;t<12;t++)e=r.getDay(),a=s.cn[0].cn[1].cn[t].cn[1].cn[l],a.html=o.intlFormat_day.format(r),o.showWeekends||0!==e&&6!==e?delete a.removeDom:a.removeDom=!0;r.setDate(r.getDate()+1)}o[n?"_vdom":"vdom"]=s}}updateHeaderYear(){this.vdom.cn[0].cn[0].cn[0].html=this.currentDate.getFullYear()}updateMonthNameFormat(e,t,n=!1){let o=this;if(o.intlFormat_month=new Intl.DateTimeFormat(o.locale,{month:e}),void 0!==t){let e=o.vdom,t=0,a=o.currentDate;for(;t<12;t++)a.setMonth(t),a.setDate(1),e.cn[0].cn[1].cn[t].cn[0].html=o.intlFormat_month.format(a);o[n?"_vdom":"vdom"]=e}}}Neo.setupClass(d);const m=d}}]);