"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[5803],{5803:(e,o,n)=>{n.r(o),n.d(o,{onStart:()=>r});var t=n(7763),a=n(744);class s extends a.A{static config={className:"Neo.examples.component.multiWindowCoronaGallery.ViewportController"};connectedApps=[];async createPopupWindow(){let e=this,{windowId:o}=e,{config:n,windowConfigs:t}=Neo,{environment:a}=n,s=parseInt(Object.keys(t)[0]),{basePath:l}=t[s],i=e.getReference("controls-panel"),c=await Neo.Main.getWindowData({windowId:o}),r=await e.component.getDomRect(i.id),{height:p,left:d,top:w,width:m}=r;"development"!==a&&(l=`${l+a}/`),p+=1,d+=m+c.screenLeft,w+=c.outerHeight-c.innerHeight+c.screenTop-63,e.component.up("live-preview")&&(p-=63,w+=63),await Neo.Main.windowOpen({url:l+"examples/component/multiWindowCoronaGallery/childapp/",windowFeatures:`height=${p},left=${d},top=${w},width=${m}`,windowId:s,windowName:"GalleryControls"})}async onAppConnect(e){let o=this,{appName:n}=e;if("GalleryControls"===n){let e=o.getReference("controls-panel"),{mainView:t}=Neo.apps[n];o.connectedApps.push(n),e.parent.remove(e,!1),this.getReference("header-toolbar").hidden=!0,t.add(e)}}async onAppDisconnect(e){let o=this,{appName:n,windowId:t}=e;if("GalleryControls"===n){let e=o.getReference("controls-panel");e.parent.remove(e,!1),o.getReference("header-toolbar").hidden=!1,o.component.add(e)}else"Neo.examples.component.multiWindowCoronaGallery"===n&&(console.log("close",o.connectedApps),Neo.Main.windowClose({names:o.connectedApps,windowId:t}))}onConstructed(){super.onConstructed();let e=this;Neo.currentWorker.on({connect:e.onAppConnect,disconnect:e.onAppDisconnect,scope:e})}async onMaximiseButtonClick(e){await this.createPopupWindow()}}const l=Neo.setupClass(s);class i extends t.A{static config={className:"Neo.examples.component.multiWindowCoronaGallery.Viewport",cls:["multi-window-helix-viewport"],controller:l};construct(e){super.construct(e),this.getItem("controls-panel").headers=[{dock:"top",reference:"header-toolbar",items:[{ntype:"label",cls:["neo-panel-header-text","neo-label"],text:"Gallery Controls"},"->",{handler:"onMaximiseButtonClick",iconCls:"far fa-window-maximize"}]}]}}const c=Neo.setupClass(i),r=()=>Neo.app({mainView:c,name:"Neo.examples.component.multiWindowCoronaGallery"})}}]);