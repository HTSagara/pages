"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[232],{232:(e,t,r)=>{r.d(t,{A:()=>m});var o=r(5608),a=r(1818),i=r(6270);class s extends a.A{static activeItemCls="neo-active-item";static inactiveItemCls="neo-inactive-item";static itemCls="neo-layout-card-item";static config={className:"Neo.layout.Card",ntype:"layout-card",activeIndex_:0,removeInactiveCards:!0};async afterSetActiveIndex(e,t){let r,o,a,s,n,l,d,p=this,c=p.containerId,u=Neo.getComponent(c)||Neo.get(c),m=p.constructor,y=!1,h=p.removeInactiveCards;if(Neo.isNumber(e)&&u){for(s=u.items,n=s.length,s[e]||Neo.error("Trying to activate a non existing card",e,s),r=0;r<n;r++)if(l=s[r].module,r===e&&"Function"===Neo.typeOf(l)){y=!0;break}for(r=0;r<n;r++)o=r===e,a=s[r],l=a.module,o&&"Function"===Neo.typeOf(l)&&(a=await p.loadModule(a,r)),a instanceof Neo.core.Base&&(d=a.wrapperCls,i.A.remove(d,o?m.inactiveItemCls:m.activeItemCls),i.A.add(d,o?m.activeItemCls:m.inactiveItemCls),h||y?(a.wrapperCls=d,o?(delete a.vdom.removeDom,a.activate?.()):h&&(a.mounted=!1,a.vdom.removeDom=!0)):a.wrapperCls=d);(h||y)&&u.update()}}applyChildAttributes(e,t,r=!1){let o=this,a=o.activeIndex===t,s=o.constructor,n=e.wrapperCls,l=e.vdom;i.A.add(n,s.itemCls),i.A.add(n,a?s.activeItemCls:s.inactiveItemCls),!r&&o.removeInactiveCards?(e.wrapperCls=n,l.removeDom=!a,e.update()):e.wrapperCls=n}applyRenderAttributes(){let e=Neo.getComponent(this.containerId),t=e?.wrapperCls||[];e||Neo.logError("layout.Card: applyRenderAttributes -> container not yet created",this.containerId),i.A.add(t,"neo-layout-card"),e.wrapperCls=t}async loadModule(e,t){let r,o,a=this,i=a.containerId,s=Neo.getComponent(i)||Neo.get(i),n=s.items,l=a.constructor,d=s.vdom,p=e.module;return Neo.isNumber(t)||(t=n.indexOf(e)),e.isLoading=!0,p=await p(),p=p.default,r=p.prototype,o=e.wrapperCls||r.constructor.config.wrapperCls||[],e.className=r.className,e.wrapperCls=[...o,l.itemCls],e.module=p,delete e.isLoading,delete e.vdom,n[t]=e=Neo.create(e),a.removeInactiveCards&&(e.vdom.removeDom=!0),s.fire("cardLoaded",{item:e}),d.cn[t]=e.vdom,e}removeRenderAttributes(){let e=Neo.getComponent(this.containerId),t=e?.wrapperCls||[];e||Neo.logError("layout.Card: removeRenderAttributes -> container not yet created",this.containerId),i.A.remove(t,"neo-layout-card"),e.wrapperCls=t}}Neo.setupClass(s);class n extends a.A{static config={className:"Neo.layout.Fit",ntype:"layout-fit"};applyChildAttributes(e,t){e.ignoreLayout||(e.wrapperCls=i.A.union(e.wrapperCls,"neo-layout-fit-item"))}applyRenderAttributes(){let e=Neo.getComponent(this.containerId),t=e?.wrapperCls||[];e||Neo.logError("layout.Fit: applyRenderAttributes -> container not yet created",this.containerId),i.A.add(t,"neo-layout-fit"),e.wrapperCls=t}removeRenderAttributes(){let e=Neo.getComponent(this.containerId),t=e?.wrapperCls||[];e||Neo.logError("layout.Fit: removeRenderAttributes -> container not yet created",this.containerId),i.A.remove(t,"neo-layout-fit"),e.wrapperCls=t}}Neo.setupClass(n);class l extends a.A{static config={className:"Neo.layout.Grid",ntype:"layout-grid"};applyRenderAttributes(){let e=Neo.getComponent(this.containerId),t=e?.wrapperCls||[];e||Neo.logError("layout.Grid: applyRenderAttributes -> container not yet created",this.containerId),i.A.add(t,"neo-layout-grid"),e.wrapperCls=t}}Neo.setupClass(l);class d extends a.A{static alignValues=["center","end","start","stretch",null];static directionValues=["column","column-reverse","row","row-reverse",null];static packValues=["center","end","start",null];static wrapValues=["nowrap","wrap","wrap-reverse"];static config={className:"Neo.layout.Flexbox",ntype:"layout-flexbox",align_:null,direction_:null,gap_:null,pack_:null,prefix:"neo-flex-",wrap_:"nowrap"};afterSetAlign(e,t){t&&this.updateInputValue(e,t,"align")}afterSetDirection(e,t){t&&this.updateInputValue(e,t,"direction")}afterSetGap(e,t){if(!e&&!t)return;let r=Neo.getComponent(this.containerId),o=r.wrapperStyle;o.gap=e,r.wrapperStyle=o}afterSetPack(e,t){t&&this.updateInputValue(e,t,"pack")}afterSetWrap(e,t){t&&this.updateInputValue(e,t,"wrap")}applyChildAttributes(e){let t=e.wrapperStyle,r=t.flex||e.flex||("stretch"===this.align?1:"0 1 auto");1===r&&(r="1 1 auto"),t.flex=r,e.wrapperStyle=t}applyRenderAttributes(){let e=this,t=Neo.getComponent(e.containerId),r=e.prefix,o=t?.wrapperCls||[];t||Neo.logError("layout.Flexbox: applyRenderAttributes -> container not yet created",e.containerId),i.A.add(o,r+"container"),e.align&&i.A.add(o,r+"align-"+e.align),e.direction&&i.A.add(o,r+"direction-"+e.direction),e.pack&&i.A.add(o,r+"pack-"+e.pack),e.wrap&&i.A.add(o,r+"wrap-"+e.wrap),t.wrapperCls=o}beforeSetAlign(e,t){return this.testInputValue(e,t,"alignValues","align")}beforeSetDirection(e,t){return this.testInputValue(e,t,"directionValues","direction")}beforeSetPack(e,t){return this.testInputValue(e,t,"packValues","pack")}beforeSetWrap(e,t){return this.testInputValue(e,t,"wrapValues","wrap")}removeChildAttributes(e){let t=e.wrapperStyle||{};t.flex=e.flex||null,e.wrapperStyle=t}removeRenderAttributes(){let e=this,t=Neo.getComponent(e.containerId),r=e.prefix,o=t?.wrapperCls||[];t||Neo.logError("layout.Flexbox: removeRenderAttributes -> container not yet created",e.containerId),i.A.remove(o,r+"container"),e.align&&i.A.remove(o,r+"align-"+e.align),e.direction&&i.A.remove(o,r+"direction-"+e.direction),e.pack&&i.A.remove(o,r+"pack-"+e.pack),e.wrap&&i.A.remove(o,r+"wrap-"+e.wrap),t.wrapperCls=o}testInputValue(e,t,r,o){const a=this.getStaticConfig(r);return i.A.hasItem(a,e)?e:(Neo.logError(this.containerId,'-> layout: supported values for "'+o+'" are',a),t)}updateInputValue(e,t,r){let o=Neo.getComponent(this.containerId),a=this.prefix,s=o?.wrapperCls;o?.rendered&&(i.A.remove(s,a+r+"-"+t),null!==e&&i.A.add(s,a+r+"-"+e),o.wrapperCls=s)}}Neo.setupClass(d);const p=d;Neo.setupClass(class extends p{static config={className:"Neo.layout.HBox",ntype:"layout-hbox",direction:"row"};applyChildAttributes(e){!e.width&&super.applyChildAttributes(e)}});Neo.setupClass(class extends p{static config={className:"Neo.layout.VBox",ntype:"layout-vbox",direction:"column"};applyChildAttributes(e){!e.height&&super.applyChildAttributes(e)}}),r(599);const c=({weight:e=0},{weight:t=0})=>e-t;class u extends o.A{static config={className:"Neo.container.Base",ntype:"container",baseCls:["neo-container"],itemDefaults_:null,items_:[],layout_:{ntype:"vbox",align:"stretch"},_vdom:{cn:[]}};add(e){let t=this;return t.insert(t.items?t.items.length:0,e)}afterSetAppName(e,t){let r=this;super.afterSetAppName(e,t),e&&r.items&&r.items.forEach((t=>{Neo.isObject(t)&&(t.appName=e)})),e&&r.layout&&(r.layout.appName=e)}afterSetLayout(e,t){this.rendered&&(t.removeRenderAttributes(),e.applyRenderAttributes(),this.items.forEach(((r,o)=>{t.removeChildAttributes(r,o),e.applyChildAttributes(r,o)})))}afterSetMounted(e,t){if(void 0!==t){super.afterSetMounted(e,t);for(let t=0,{items:r}=this,{length:o}=r;t<o;t++)r[t].vdom.removeDom||(r[t].mounted=e)}}afterSetNeedsVdomUpdate(e,t){e||this.items?.forEach((e=>{"string"!=typeof e&&(e._needsVdomUpdate=!1,e.afterSetNeedsVdomUpdate?.(!1,!0))}))}afterSetRendering(e,t){if(void 0!==t){let t=this.items,r=0,o=t.length;for(;r<o;r++)t[r].vdom.removeDom||(t[r].rendering=e)}}afterSetWindowId(e,t){let r=this;e&&r.items?.forEach((t=>{Neo.isObject(t)&&(t.windowId=e)})),e&&r.layout&&(r.layout.windowId=e)}beforeSetItems(e,t){if("Object"===Neo.typeOf(e)){const t=[];let r;for(const o in e){const a=e[o];a.reference=o,t.push(a),r||="weight"in a}r&&t.sort(c),e=t}return e}beforeSetLayout(e,t){return this.createLayout(e)}createItem(e,t){let r,a,i=this,s={appName:i.appName,parentId:i.id,parentIndex:t,windowId:i.windowId},n={...i.itemDefaults};switch(n&&(e.module&&delete n.ntype,e.ntype&&delete n.module),Neo.typeOf(e)){case"NeoClass":e=Neo.create({...n,module:e,...s});break;case"NeoInstance":e.set(s),e.getController()?.parseConfig(e),e.getModel()?.parseConfig(e);break;case"Object":n&&Neo.assignDefaults(e,n),e.module||e.ntype||e.className||(e.module=o.A),a=e.module,r=a&&!a.isClass&&Neo.isFunction(a),a&&!r&&(e.className=a.prototype.className),"this"===e.handlerScope&&(e.handlerScope=i,"String"===Neo.typeOf(e.handler)&&"Function"===Neo.typeOf(i[e.handler])&&(e.handler=i[e.handler])),Object.assign(e,s),r?e.vdom=Object.assign(e.vdom||{},{removeDom:!0}):e=Neo[e.className?"create":"ntype"](e);break;case"String":e=Neo.create({module:o.A,vdom:{innerHTML:e},...s})}return e}createItems(){let e=this,t=e._items,r=e.getVdomItemsRoot(),o=e.layout;r.cn=[],t.forEach(((a,i)=>{t[i]=a=e.createItem(a,i),a instanceof Neo.core.Base&&o.applyChildAttributes(a,i),r.cn.push(a.vdom)})),e.update()}createLayout(e){let t=this;return e&&(e instanceof a.A&&e.isLayout?(e.appName=t.appName,e.containerId=t.id,e.windowId=t.windowId):((e=t.parseLayoutClass(e)).appName=t.appName,e.containerId=t.id,e.windowId=t.windowId,e=Neo.ntype(e))),e}destroy(e=!1,t=!1){this.items?.forEach((e=>{e.destroy?.(!1,!0)})),super.destroy(e,t)}getVdomItemsRoot(){return this.getVdomRoot()}indexOf(e){let t=this,r=0,o=t.items?.length||0;for(Neo.isString(e)||(e=e.id);r<o;r++)if(t.items[r].id===e)return r;return-1}insert(e,t,r=!1){let o,a,i,s=this,n=s.items;if(Array.isArray(t)){for(o=0,a=t.length,i=[];o<a;o++)i.unshift(s.insert(e,t[a-1-o],!0));t=i}else t=s.createItem(t,e),s.layout.applyChildAttributes(t,e,!0),n.splice(e,0,t),s.items=n,s.getVdomItemsRoot().cn.splice(e,0,t.vdom);return r||s.promiseUpdate().then((()=>{s.fire("insert",{index:e,item:t})})),t}mergeConfig(...e){let t=this,r=super.mergeConfig(...e);return r.itemDefaults&&(t._itemDefaults=Neo.clone(r.itemDefaults,!0,!0),delete r.itemDefaults),r.items&&("Object"===Neo.typeOf(r.items)?t.items=Neo.merge(Neo.clone(t.constructor.config.items),r.items):t._items=Neo.clone(r.items,!0,!0),delete r.items),r}moveTo(e,t){let r=this.items[e];return e!==t&&this.switchItems(t,e),r}onConstructed(){let e=this;e._layout=e.createLayout(e.layout),e._layout.applyRenderAttributes(),super.onConstructed(),e.parseItemConfigs(e.items),e.createItems()}parseLayoutClass(e){return Neo.isObject(e)?e.ntype.indexOf("layout-")<0&&(e.ntype="layout-"+e.ntype):e=e.indexOf("layout-")<0?{ntype:"layout-"+e}:{ntype:e},e}remove(e,t=!0,r=!1){let o=[...this.items],a=0,i=o.length;for(;a<i;a++)o[a].id===e.id&&this.removeAt(a,t,r)}removeAll(e=!0,t=!1){let r=this;r.items.forEach((t=>{e?t.destroy(!0,!0):t.mounted=!1})),r.items=[],r.getVdomItemsRoot().cn=[],t&&!e||r.update()}removeAt(e,t=!0,r=!1){let o,a=this,i=a.items,s=a.vdom;if(!(e>=i.length))return o=i[e],i.splice(e,1),a.getVdomItemsRoot().cn.splice(e,1),a[r||t?"_vdom":"vdom"]=s,t?(o.destroy(!0,r),null):(o.mounted=!1,o);Neo.warn("Container.removeAt: index >= items.length. "+a.id)}removeLast(e=!0,t=!1){this.removeAt(this.items.length-1,e,t)}replaceAt(e,t,r=!0,o=!1){this.removeAt(e,r,!0),this.insert(e,t,o)}switchItems(e,t){let r=this,o=Neo.isNumber(e)?e:r.indexOf(e),a=Neo.isNumber(t)?t:r.indexOf(t);i.A.move(r.items,a,o),i.A.move(r.getVdomItemsRoot().cn,a,o),r.update()}}Neo.setupClass(u);const m=u},1818:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(2583);class a extends o.A{static config={className:"Neo.layout.Base",ntype:"layout-base",appName_:null,containerId:null,isLayout:!0,windowId:null};get container(){return Neo.getComponent(this.containerId)}afterSetAppName(e,t){e&&Neo.currentWorker.insertThemeFiles(e,this.container.windowId,this.__proto__)}applyChildAttributes(e){}applyRenderAttributes(){}destroy(){let e=this;e.bind&&e.container.getModel()?.removeBindings(e.id),super.destroy()}getModel(e){return this.container.getModel()}initConfig(e,t){super.initConfig(e,t);let r=this;r.bind&&r.container.getModel()?.parseConfig(r)}removeChildAttributes(e){}removeRenderAttributes(){}}Neo.setupClass(a);const i=a}}]);