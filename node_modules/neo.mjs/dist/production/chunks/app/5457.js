"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[5457],{8596:(e,t,d)=>{d.d(t,{A:()=>o});var n=d(2583);class i extends n.A{static charEntityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;",$:"&dollar;","\\":"&bsol;","/":"&sol;"};static charPattern=/[&<>"'$\\]/g;static entityPattern=/(&amp;)|(&lt;)|(&gt;)|(&quot;)|(&apos;)|(&dollar;)|(&bsol;)|(&sol;)/g;static config={className:"Neo.util.String"};static escapeHtml(e){let t=this;return Neo.isString(e)?e.replace(t.charPattern,t.getEntityFromChar.bind(t)):e}static getCharFromEntity(e){return Object.keys(this.charEntityMap).find((t=>this.charEntityMap[t]===e))||e}static getEntityFromChar(e){return this.charEntityMap[e]||e}static unescapeHtml(e){let t=this;return Neo.isString(e)?e.replace(t.entityPattern,t.getCharFromEntity.bind(t)):e}static uncapitalize(e){return e&&e[0].toLowerCase()+e.substring(1)}}Neo.setupClass(i);const o=i},1842:(e,t,d)=>{d.d(t,{A:()=>o});var n=d(2583);class i extends n.A{static config={className:"Neo.util.Style"};static compareStyles(e,t){let d={};return Neo.isString(e)&&(e=Neo.createStyleObject(e)),Neo.isString(t)&&(t=Neo.createStyleObject(t)),e||t?t?e?(Object.keys(e).forEach((n=>{t.hasOwnProperty(n)&&t[n]===e[n]||(d[n]=e[n])})),Object.keys(t).forEach((t=>{e.hasOwnProperty(t)||(d[t]=null)})),Object.keys(d).length>0?d:null):void Object.keys(t).forEach((function(e){d[e]=null})):Neo.clone(e):null}}Neo.setupClass(i);const o=i},5457:(e,t,d)=>{d.r(t),d.d(t,{default:()=>p});var n=d(2583),i=d(6270),o=d(8596),a=d(1842);class r{constructor(e){Object.assign(this,{attributes:e.attributes||[],childNodes:e.childNodes||[],className:e.className||[],id:e.id||Neo.getId("vnode"),innerHTML:e.innerHTML,nodeName:e.nodeName,style:e.style,vtype:e.vtype||"vnode"})}}Neo.ns("Neo.vdom",!0).VNode=r;const s=r;var l=d(4483);class c extends n.A{static config={className:"Neo.vdom.Helper",remote:{app:["create","update"]},singleton:!0};returnChildNodeOuterHtml=!1;voidAttributes=["checked","required"];voidElements=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];create(e){let t,d=!0===e.autoMount,{appName:n,parentId:i,parentIndex:o,windowId:a}=e;return delete e.appName,delete e.autoMount,delete e.parentId,delete e.parentIndex,delete e.windowId,t=this.parseHelper(e),t.outerHTML=this.createStringFromVnode(t),d&&Object.assign(t,{appName:n,autoMount:!0,parentId:i,parentIndex:o,windowId:a}),Neo.config.useVdomWorker?t:Promise.resolve(t)}createCloseTag(e){return this.voidElements.indexOf(e.nodeName)>-1?"":"</"+e.nodeName+">"}createDeltas(e){let t,d,n,o,r,s,c,p,h,u,N,m,f,y,g,{deltas:v=[],index:b,newVnode:V,oldVnode:x,parentId:I}=e,O=this,k=e.newVnodeRoot||V,w=e.oldVnodeRoot||x;if(V&&!x)w&&(h=O.findVnode(w,V.id,x)),h||v.push({action:"insertNode",id:V.id,index:b,outerHTML:O.createStringFromVnode(V),parentId:I});else if(!V&&x)if(k&&(p=O.findVnode(k,x.id,V)),p)v.push({action:"moveNode",id:x.id,index:p.index,parentId:p.parentNode.id}),h=O.findVnode(w,p.parentNode.id),O.createDeltas({deltas:v,newVnode:p.vnode,newVnodeRoot:k,oldVnode:x,oldVnodeRoot:w,parentId:p.parentNode.id}),h.vnode.childNodes.splice(p.index,0,p.vnode);else{if(d={action:"removeNode",id:x.id},"text"===x.vtype){let e=O.findVnode(w,x.id);d.parentId=e?.parentNode.id}v.push(d)}else{if(V&&x&&V.id!==x.id){if(p=O.findVnode(k,x.id,V),h=O.findVnode(w,V.id,x),!p&&!h)return v.push({action:"removeNode",id:x.id}),v.push({action:"insertNode",id:V.id,index:b,outerHTML:O.createStringFromVnode(V),parentId:I}),{indexDelta:0};if(p&&h&&p.parentNode.id===h.parentNode.id)v.push({action:"moveNode",id:h.vnode.id,index:b,parentId:I}),O.createDeltas({deltas:v,newVnode:V,newVnodeRoot:k,oldVnode:h.vnode,oldVnodeRoot:w,parentId:p.parentNode.id}),h.parentNode.childNodes.splice(b,0,h);else{if(!p&&h){if(V.id===h.vnode.id){if(r=0,l.A.findChildVnodeById(x,V.id))v.push({action:"replaceChild",fromId:x.id,parentId:I,toId:V.id});else{let e=l.A.findChildVnode(w,h.vnode.id),t=l.A.findChildVnode(w,x.id);if(r=1,e.parentNode.id===t.parentNode.id){let d=l.A.findChildVnode(k,V.id),n=b+1;for(o=b+1,y=t.parentNode.childNodes,c=e.index;o<c;o++)l.A.findChildVnode(d.parentNode,y[o].id)||n++;e.parentNode.childNodes.splice(e.index,1),e.index!==n&&v.push({action:"moveNode",id:h.vnode.id,index:b,parentId:I}),r=0}v.push({action:"removeNode",id:x.id,parentId:I})}return O.createDeltas({deltas:v,newVnode:V,newVnodeRoot:k,oldVnode:h.vnode,oldVnodeRoot:w,parentId:I}),{indexDelta:r}}return v.push({action:"removeNode",id:x.id}),{indexDelta:1}}if(!h)return g=p&&l.A.findChildVnodeById(V,x.id),g&&v.push({action:"removeNode",id:p.vnode.id}),v.push({action:"insertNode",id:V.id,index:b,outerHTML:O.createStringFromVnode(V),parentId:I}),{indexDelta:g?0:-1};if(p){r=0;let e=l.A.findChildVnode(k,V.id),t=e.parentNode.id===p.parentNode.id;return t&&e.index>p.index&&(r=e.index-p.index),t&&e.parentNode.childNodes[p.index].id===p.vnode.id||v.push({action:"moveNode",id:p.vnode.id,index:p.index,parentId:p.parentNode.id}),O.createDeltas({deltas:v,newVnode:p.vnode,newVnodeRoot:k,oldVnode:x,oldVnodeRoot:w,parentId:p.parentNode.id}),{indexDelta:0}}}}V&&x&&V.id===x.id&&("text"===V.vtype&&V.innerHTML!==x.innerHTML?v.push({action:"updateVtext",id:V.id,parentId:l.A.findChildVnode(k,V.id).parentNode.id,value:V.innerHTML}):(s=Object.keys(V),Object.keys(x).forEach((e=>{V.hasOwnProperty(e)?"attributes"===e&&Object.keys(x[e]).forEach((t=>{V[e].hasOwnProperty(t)||(V[e][t]=null)})):s.push(e)})),s.forEach((e=>{switch(d={},n=V[e],e){case"attributes":t={},Object.entries(n).forEach((([e,d])=>{x.attributes.hasOwnProperty(e)&&x.attributes[e]===d||null!==d&&!Neo.isString(d)&&Neo.isEmpty(d)||(t[e]=d)})),Object.keys(t).length>0&&(d.attributes=t,Object.entries(t).forEach((([e,t])=>{null!==t&&""!==t||delete V.attributes[e]})));break;case"childNodes":for(o=0,r=0,c=Math.max(n.length,x.childNodes.length);o<c;o++)f=O.createDeltas({deltas:v,index:o,newVnode:n[o],newVnodeRoot:k,oldVnode:x.childNodes[o+r],oldVnodeRoot:w,parentId:V.id}),f&&f.indexDelta&&(r+=f.indexDelta);if(r<0)for(o=n.length+r;o<x.childNodes.length;o++)v.push({action:"removeNode",id:x.childNodes[o].id});break;case"nodeName":case"innerHTML":n!==x[e]&&(d[e]=n);break;case"style":u=a.A.compareStyles(n,x.style),u&&(d.style=u);break;case"className":x.className?(N=i.A.difference(n,x.className),m=i.A.difference(x.className,n)):(N=n,m=[]),(N.length>0||m.length>0)&&(d.cls={add:N,remove:m})}Object.keys(d).length>0&&(d.id=V.id,v.push(d))}))))}return v}createOpenTag(e){let t,d="<"+e.nodeName,{attributes:n}=e,i=e.className;return e.style&&(t=Neo.createStyles(e.style),""!==t&&(d+=` style="${t}"`)),i&&(Array.isArray(i)&&(i=i.join(" ")),""!==i&&(d+=` class="${i}"`)),e.id&&(Neo.config.useDomIds?d+=` id="${e.id}"`:d+=` data-neo-id="${e.id}"`),Object.entries(n).forEach((([e,t])=>{this.voidAttributes.includes(e)?"true"===t&&(d+=` ${e}`):"removeDom"!==e&&("value"===e&&(t=o.A.escapeHtml(t)),d+=` ${e}="${t?.replaceAll?.('"',"&quot;")??t}"`)})),d+">"}createStringFromVnode(e){let t=this;switch(e.vtype){case"root":return t.createStringFromVnode(e.childNodes[0]);case"text":return void 0===e.innerHTML?"":String(e.innerHTML);case"vnode":return t.createOpenTag(e)+t.createTagContent(e)+t.createCloseTag(e);default:return""}}createTagContent(e){if(e.innerHTML)return e.innerHTML;let t,d,n="",i=e.childNodes?e.childNodes.length:0,o=0;for(;o<i;o++)t=e.childNodes[o],d=this.createStringFromVnode(t),t.innerHTML!==d&&this.returnChildNodeOuterHtml&&(t.outerHTML=d),n+=d;return n}findVnode(e,t,d,n){n||(n=0);let i,o,a,r,s=null;if(e.id===t)s={index:n,parentNode:d,vnode:e};else if("text"!==e.vtype)for(i=e.childNodes,a=0,r=i?.length||0;a<r;a++)if(o=this.findVnode(i[a],t,e,a),o&&o.vnode.id===t){s=o;break}return s&&"root"===s.parentId&&(s.index=null),s}parseHelper(e){if(!0===e.removeDom)return null;if("text"===e.vtype)return e.id||(e.id=Neo.getId("vtext")),e.innerHTML=`\x3c!-- ${e.id} --\x3e${e.html||""}\x3c!-- /neo-vtext --\x3e`,delete e.html,e;let t,d=this,n={attributes:{},childNodes:[],style:{}};return e.tag||(e.tag="div"),Object.entries(e).forEach((([e,i])=>{let o,a,r;if(null!=i&&"flag"!==e)switch(e){case"tag":case"nodeName":n.nodeName=i;break;case"html":case"innerHTML":n.innerHTML=i.toString();break;case"children":case"childNodes":case"cn":Array.isArray(i)||(i=[i]),a=[],i.forEach((e=>{!0!==e.removeDom&&(delete e.removeDom,t=d.parseHelper(e),t&&a.push(t))})),n.childNodes=a;break;case"cls":i&&!Array.isArray(i)?n.className=[i]:Array.isArray(i)&&i.length<1||(n.className=i);break;case"data":i&&"Object"===Neo.typeOf(i)&&Object.entries(i).forEach((([e,t])=>{n.attributes[`data-${Neo.decamel(e)}`]=t}));break;case"height":case"maxHeight":case"maxWidth":case"minHeight":case"minWidth":case"width":o=i!=parseInt(i),n.style[e]=i+(o?"":"px");break;case"id":n.id=i;break;case"style":r=n.style,Neo.isString(i)?n.style=Object.assign(r,Neo.core.Util.createStyleObject(i)):n.style=Object.assign(r,i);break;default:"removeDom"!==e&&(n.attributes[e]=i+"")}})),new s(n)}update(e){let t=this.parseHelper(e.vdom),d={deltas:this.createDeltas({newVnode:t,oldVnode:e.vnode}),updateVdom:!0,vnode:t};return Neo.config.useVdomWorker?d:Promise.resolve(d)}}const p=Neo.setupClass(c)}}]);