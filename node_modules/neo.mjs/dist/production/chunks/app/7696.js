"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[7696],{7696:(e,t,o)=>{o.r(t),o.d(t,{default:()=>M});var n=o(9119),a=o(4022);class s extends a.Z{static config={className:"LearnNeo.view.home.ContentView",baseCls:["learn-content"]};record=null;onClick(e){let t=this,o=t.record;e.altKey&&e.shiftKey&&!e.metaKey?t.fire("edit",{component:t,record:o}):!e.altKey&&e.shiftKey&&e.metaKey&&t.fire("refresh",{component:t,record:o})}onConstructed(){super.onConstructed();let e=this;e.addDomListeners({click:e.onClick,scope:e})}}Neo.applyClassConfig(s);const r=s;var i=o(2281);class c extends i.Z{static config={className:"LearnNeo.model.Content",fields:[{name:"className",type:"String"},{name:"collapsed",type:"Boolean"},{name:"id",type:"Integer"},{name:"isLeaf",type:"Boolean"},{name:"name",type:"String"},{name:"parentId",type:"Integer"},{name:"path",type:"String"}]}}Neo.applyClassConfig(c);const l=c;var h=o(5959);class d extends h.Z{static config={className:"LearnNeo.store.Content",model:l};xonConstructed(){super.onConstructed()}xload(){this.model=l,Neo.Main.getByPath({path:"location.search"}).then((e=>{const t=e?.substr(1)||"",o=t?JSON.parse(`{"${decodeURI(t.replace(/&/g,'","').replace(/=/g,'":"'))}"}`):{};this.deck=o.deck||"learnneo",this.url=`${this.contentPath}/tree.json`,super.load(),console.log(o)}))}get contentPath(){return`../../../resources/data/deck/${this.deck}`}doLoadStore(){const e=this;Neo.Xhr.promiseJson({url:`${this.contentPath}/tree.json`}).then((t=>{e.data=t.json.data}))}}Neo.applyClassConfig(d);const p=d;var u=o(5077),g=o(5542),m=o(312);class f extends n.Z{static config={className:"LearnNeo.view.LivePreview",value_:null,autoMount:!0,autoRender:!0,height:400,layout:"fit",items:[{module:g.Z,items:[{module:m.Z,hideLabel:!0,style:{height:"100%"},reference:"textArea",tabButtonConfig:{text:"Editor"}},{tabButtonConfig:{text:"Preview"},reference:"preview",ntype:"container"}]}],listeners:{activeIndexChange:()=>console.log("activeIndexChange")}};onConstructed(){console.log("constructed"),this.on("activeIndexChange",(()=>console.log("onConstructed"))),super.onConstructed()}afterSetValue(e,t){e&&(this.getItem("textArea").value=e)}doIt(e){let t=this.getReference("source").getValue();this.getReference("codePreview").src=t;const o=/import\s+([\w-]+)\s+from\s+['"]([^'"]+)['"]/,n=/export\s+(?:default\s+)?(?:const|let|var|class|function|async\s+function|generator\s+function|async\s+generator\s+function|(\{[\s\S]*?\}))/g,a=[],s=[],r=[];t.split("\n").forEach((e=>{let t=e.match(o);if(t){let e=t[1],o=t[2];r.push({moduleName:e,path:o}),s.push(e)}else e.match(n)||a.push(e)}));var i=[],c=[];const l=`\n            Promise.all([\n                ${r.map((e=>(i.push(`${e.moduleName}Module`),c.push(`const ${e.moduleName} = ${e.moduleName}Module.default`),`import("${e.path}")`))).join(",\n")}\n            ])\n            .then(([${i.join(", ")}]) => {\n                    ${c.join("\n")}\n                    ${a.join("\n")}\n                    container.add({module:Bar});\n                })\n            .catch(error=>container.add({ntype:'component',html:error.message}));\n        `,h=this.getReference("preview");h.removeAll();try{new Function("container",l)(h)}catch(e){h.add({ntype:"component",html:e.message})}}getItem(e,t=this.items){let o,n,a=0,s=t.length;for(;a<s;a++){if(o=t[a],o.reference===e)return o;if(o.items&&(n=this.getItem(e,o.items),n))return n}return null}}Neo.applyClassConfig(f);const C=f;class N extends u.Z{static config={className:"LearnNeo.view.home.ContentTreeList",cls:["topics-tree"],showCollapseExpandAllIcons:!1,store:p};get contentPath(){return`../../resources/data/deck/${this.deck}`}async doFetchContent(e){let t=this,o=`${t.contentPath}`;if(o+=e.path?`/pages/${e.path}`:`/p/${e.id}.md`,e.isLeaf&&o){const n=await fetch(o),a=await n.text();let s=await this.highlightPreContent(a),r={};s=this.extractNeoContent(s,r),await Neo.main.addon.Markdown.markdownToHtml(s).then((o=>t.fire("contentChange",{component:t,html:o,record:e,isLab:e.name?.startsWith("Lab:")})),(()=>t.fire("contentChange",{component:t}))),await this.timeout(50),Object.keys(r).forEach((e=>{let t=Neo.create(C,{value:r[e],parentId:e,appName:this.appName});console.log(t)}))}}extractNeoContent(e,t){let o=0;return e.replace(/<pre\s+data-neo\s*>([\s\S]*?)<\/pre>/g,((e,n)=>{const a=`pre-live-preview-${Neo.core.IdGenerator.getId()}-${o++}`;return t[a]=n,`<div id="${a}"/>`}))}async highlightPreContent(e){const t=[];let o=0;var n=e.replace(/<pre\s+data-javascript\s*>([\s\S]*?)<\/pre>/g,((e,n)=>{const a=`__NEO-PRE-TOKEN-${++o}__`;return t.push(this.getHighlightPromise(n,a,`pre-preview-${Neo.core.IdGenerator.getId()}`)),a}));return Promise.all(t).then((e=>(e.forEach((e=>n=n.replace(e.token,e.after))),n)))}getHighlightPromise(e,t,o){return Neo.main.addon.HighlightJS.highlightAuto(e).then((e=>({after:`<pre data-javascript id="${o}">${e.value}</pre>`,token:t})))}doLoadStore(){const e=this;Neo.Xhr.promiseJson({url:`${this.contentPath}/t.json`}).then((t=>{e.store.data=t.json.data,e.createItems(null,e.getListItemsRoot(),0),e.update()}))}onConstructed(){super.onConstructed();let e=this;Neo.main.addon.HighlightJS.loadLibrary({appName:e.appName,highlightJsPath:"../../docs/resources/highlight/highlight.pack.js",themePath:"../../docs/resources/highlightjs-custom-github-theme.css"}),Neo.Main.getByPath({path:"location.search"}).then((t=>{const o=t?.substr(1)||"",n=o?JSON.parse(`{"${decodeURI(o.replace(/&/g,'","').replace(/=/g,'":"'))}"}`):{};e.deck=n.deck||"learnneo",e.doLoadStore(),console.log(n)}))}onLeafItemClick(e){super.onLeafItemClick(e),this.doFetchContent(e)}}Neo.applyClassConfig(N);const y=N;var w=o(5031),v=o(5163);class x extends w.Z{static config={className:"LearnNeo.view.home.HeaderToolbar",cls:["learnneo-header-toolbar"],items:[{module:v.Z,cls:["logo"],text:"neo.mjs"},"->",{text:"Docs",ui:"tertiary"},{text:"Learn",ui:"tertiary"},{cls:["github-button"],iconCls:"fa-brands fa-github",ui:"tertiary",url:"https://github.com/neomjs/neo"},{iconCls:"fa-brands fa-slack",ui:"tertiary",url:"https://join.slack.com/t/neomjs/shared_invite/zt-6c50ueeu-3E1~M4T9xkNnb~M_prEEOA"}]}}Neo.applyClassConfig(x);const I=x;var b=o(3846);class k extends b.Z{static config={className:"LearnNeo.view.home.MainContainerController"};onConstructed(){super.onConstructed(),Neo.Main.getByPath({path:"location.search"}).then((e=>{const t=e?.substr(1)||"",o=t?JSON.parse(`{"${decodeURI(t.replace(/&/g,'","').replace(/=/g,'":"'))}"}`):{};this.getModel().setData("deck",o.deck||"learnneo")})),fetch("../../../../resources/data/deck/EditorConfig.json").then((e=>e.json().then((e=>this.getModel().setData("editorConfig",e)))))}async onContentChange(e){let t=this.getReference("content");t.toggleCls("lab",e.isLab),t.html=e.html,t.record=e.record}async onContentEdit(e){const t=this.getModel();console.log(e);const o=t.getData("editorConfig"),n=t.getData("deck");if(!o||!n)return;const a=`${o.root}/${n}/p/${e.record.id}.md`;await fetch("http://localhost:3000/openInEditor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:a,editor:o.editor})})}onContentRefresh(e){this.getReference("tree").doFetchContent(e.record)}}Neo.applyClassConfig(k);const S=k;var $=o(1758);class L extends $.Z{static config={className:"LearnNeo.view.home.MainContainerModel",data:{},stores:{tree:{module:p,responseRoot:"data"}}}}Neo.applyClassConfig(L);const j=L;var E=o(1722);class P extends n.Z{static config={className:"LearnNeo.view.home.MainContainer",controller:S,cls:["learnneo-maincontainer"],items:[{module:I},{module:n.Z,layout:{ntype:"hbox",align:"stretch"},items:[{module:n.Z,layout:"fit",minWidth:350,width:350,cls:"sidenav-container",items:[{module:y,reference:"tree",listeners:{contentChange:"onContentChange"}}]},{module:E.Z,cls:["main-content-splitter"],resizeTarget:"previous",size:4},{module:r,reference:"content",listeners:{edit:"onContentEdit",refresh:"onContentRefresh"}}]}],model:j}}Neo.applyClassConfig(P);const M=P},312:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(9208),a=o(2577);class s extends a.Z{static wrapValues=["hard","off","soft",null];static config={className:"Neo.form.field.TextArea",ntype:"textarea",autoGrow_:!1,baseCls:["neo-textarea","neo-textfield"],cols_:null,inputTag_:"textarea",inputType:null,resizable_:!1,rows_:3,wrap_:null};afterSetAutoGrow(e){e&&this.syncAutoGrowMonitor(),e||this.afterSetHeight(this._height)}afterSetCols(e,t){this.changeInputElKey("cols",e)}afterSetInputTag(e,t){this.changeInputElKey("tag",e)}afterSetMounted(e,t){super.afterSetMounted(e,t),this.syncAutoGrowMonitor()}afterSetResizable(e,t){this.getInputEl().style.resize=e?null:"none",this.update()}afterSetRows(e,t){this.changeInputElKey("rows",e)}afterSetValue(e,t){let o=this.getInputEl();o&&(o.html=n.Z.escapeHtml(e)),super.afterSetValue(e,t)}afterSetWrap(e,t){this.changeInputElKey("wrap",e)}beforeSetWrap(e,t){return this.beforeSetEnumValue(e,t,"wrap","wrapValues")}async syncAutoGrowMonitor(){this.mounted&&this.autoGrow&&Neo.main.DomAccess.monitorAutoGrow({appName:this.appName,id:this.getInputElId(),autoGrow:this.autoGrow})}}Neo.applyClassConfig(s);const r=s}}]);