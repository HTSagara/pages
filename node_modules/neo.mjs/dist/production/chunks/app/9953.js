"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[9953],{9953:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var o=n(9119),a=n(4022);class s extends a.Z{static config={className:"Portal.view.learn.ContentView",baseCls:["learn-content"]};record=null;onClick(e){let t=this,n=t.record;e.altKey&&e.shiftKey&&!e.metaKey?t.fire("edit",{component:t,record:n}):!e.altKey&&e.shiftKey&&e.metaKey&&t.fire("refresh",{component:t,record:n})}onConstructed(){super.onConstructed();let e=this;e.addDomListeners({click:e.onClick,scope:e})}}Neo.applyClassConfig(s);const r=s;var i=n(2281);class c extends i.Z{static config={className:"Portal.model.Content",fields:[{name:"className",type:"String"},{name:"collapsed",type:"Boolean"},{name:"id",type:"Integer"},{name:"isLeaf",type:"Boolean"},{name:"name",type:"String"},{name:"parentId",type:"Integer"},{name:"path",type:"String"}]}}Neo.applyClassConfig(c);const l=c;var h=n(5959);class d extends h.Z{static config={className:"LearnNeo.store.Content",model:l};xonConstructed(){super.onConstructed()}xload(){this.model=l,Neo.Main.getByPath({path:"location.search"}).then((e=>{const t=e?.substr(1)||"",n=t?JSON.parse(`{"${decodeURI(t.replace(/&/g,'","').replace(/=/g,'":"'))}"}`):{};this.deck=n.deck||"learnneo",this.url=`${this.contentPath}/tree.json`,super.load(),console.log(n)}))}get contentPath(){return`../../../resources/data/deck/${this.deck}`}doLoadStore(){const e=this;Neo.Xhr.promiseJson({url:`${this.contentPath}/tree.json`}).then((t=>{e.data=t.json.data}))}}Neo.applyClassConfig(d);const p=d;var u=n(5542),g=n(312);class m extends o.Z{static config={className:"Portal.view.learn.LivePreview",value_:null,autoMount:!0,autoRender:!0,height:400,layout:"fit",items:[{module:u.Z,reference:"tab-container",cls:"live-preview-container",items:[{module:g.Z,hideLabel:!0,style:{height:"100%"},reference:"textArea",tabButtonConfig:{text:"Editor"}},{tabButtonConfig:{text:"Preview"},reference:"preview",ntype:"container"}]}]};afterSetValue(e,t){e&&(this.getItem("textArea").value=e)}onConstructed(){super.onConstructed();let e=this;e.getReference("tab-container").on("activeIndexChange",e.onActiveIndexChange,e)}doIt(e){let t=this.getReference("source").getValue();this.getReference("codePreview").src=t;const n=/import\s+([\w-]+)\s+from\s+['"]([^'"]+)['"]/,o=/export\s+(?:default\s+)?(?:const|let|var|class|function|async\s+function|generator\s+function|async\s+generator\s+function|(\{[\s\S]*?\}))/g,a=[],s=[],r=[];t.split("\n").forEach((e=>{let t=e.match(n);if(t){let e=t[1],n=t[2];r.push({moduleName:e,path:n}),s.push(e)}else e.match(o)||a.push(e)}));var i=[],c=[];const l=`\n            Promise.all([\n                ${r.map((e=>(i.push(`${e.moduleName}Module`),c.push(`const ${e.moduleName} = ${e.moduleName}Module.default`),`import("${e.path}")`))).join(",\n")}\n            ])\n            .then(([${i.join(", ")}]) => {\n                    ${c.join("\n")}\n                    ${a.join("\n")}\n                    container.add({module:Bar});\n                })\n            .catch(error=>container.add({ntype:'component',html:error.message}));\n        `,h=this.getReference("preview");h.removeAll();try{new Function("container",l)(h)}catch(e){h.add({ntype:"component",html:e.message})}}getItem(e,t=this.items){let n,o,a=0,s=t.length;for(;a<s;a++){if(n=t[a],n.reference===e)return n;if(n.items&&(o=this.getItem(e,n.items),o))return o}return null}onActiveIndexChange(e){console.log("onActiveIndexChange",e)}}Neo.applyClassConfig(m);const f=m;var C=n(5077);class y extends C.Z{static config={className:"Portal.view.learn.ContentTreeList",cls:["topics-tree"],showCollapseExpandAllIcons:!1,store:p};get contentPath(){return`../../resources/data/deck/${this.deck}`}async doFetchContent(e){let t=this,n=`${t.contentPath}`;if(n+=e.path?`/pages/${e.path}`:`/p/${e.id}.md`,e.isLeaf&&n){const o=await fetch(n),a=await o.text();let s=await this.highlightPreContent(a),r={};s=this.extractNeoContent(s,r),await Neo.main.addon.Markdown.markdownToHtml(s).then((n=>t.fire("contentChange",{component:t,html:n,record:e,isLab:e.name?.startsWith("Lab:")})),(()=>t.fire("contentChange",{component:t}))),await this.timeout(50),Object.keys(r).forEach((e=>{let t=Neo.create(f,{value:r[e],parentId:e,appName:this.appName});console.log(t)}))}}extractNeoContent(e,t){let n=0;return e.replace(/<pre\s+data-neo\s*>([\s\S]*?)<\/pre>/g,((e,o)=>{const a=`pre-live-preview-${Neo.core.IdGenerator.getId()}-${n++}`;return t[a]=o,`<div id="${a}"/>`}))}async highlightPreContent(e){const t=[];let n=0;var o=e.replace(/<pre\s+data-javascript\s*>([\s\S]*?)<\/pre>/g,((e,o)=>{const a=`__NEO-PRE-TOKEN-${++n}__`;return t.push(this.getHighlightPromise(o,a,`pre-preview-${Neo.core.IdGenerator.getId()}`)),a}));return Promise.all(t).then((e=>(e.forEach((e=>o=o.replace(e.token,e.after))),o)))}getHighlightPromise(e,t,n){return Neo.main.addon.HighlightJS.highlightAuto(e).then((e=>({after:`<pre data-javascript id="${n}">${e.value}</pre>`,token:t})))}doLoadStore(){const e=this;Neo.Xhr.promiseJson({url:`${this.contentPath}/t.json`}).then((t=>{e.store.data=t.json.data,e.createItems(null,e.getListItemsRoot(),0),e.update()}))}onConstructed(){super.onConstructed();let e=this;Neo.main.addon.HighlightJS.loadLibrary({appName:e.appName,highlightJsPath:"../../docs/resources/highlight/highlight.pack.js",themePath:"../../docs/resources/highlightjs-custom-github-theme.css"}),Neo.Main.getByPath({path:"location.search"}).then((t=>{const n=t?.substr(1)||"",o=n?JSON.parse(`{"${decodeURI(n.replace(/&/g,'","').replace(/=/g,'":"'))}"}`):{};e.deck=o.deck||"learnneo",e.doLoadStore(),console.log(o)}))}onLeafItemClick(e){super.onLeafItemClick(e),this.doFetchContent(e)}}Neo.applyClassConfig(y);const N=y;var w=n(3846);class v extends w.Z{static config={className:"Portal.view.learn.MainContainerController"};onConstructed(){super.onConstructed(),Neo.Main.getByPath({path:"location.search"}).then((e=>{const t=e?.substr(1)||"",n=t?JSON.parse(`{"${decodeURI(t.replace(/&/g,'","').replace(/=/g,'":"'))}"}`):{};this.getModel().setData("deck",n.deck||"learnneo")})),fetch("../../../../resources/data/deck/EditorConfig.json").then((e=>e.json().then((e=>this.getModel().setData("editorConfig",e)))))}async onContentChange(e){let t=this.getReference("content");t.toggleCls("lab",e.isLab),t.html=e.html,t.record=e.record}async onContentEdit(e){const t=this.getModel();console.log(e);const n=t.getData("editorConfig"),o=t.getData("deck");if(!n||!o)return;const a=`${n.root}/${o}/p/${e.record.id}.md`;await fetch("http://localhost:3000/openInEditor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:a,editor:n.editor})})}onContentRefresh(e){this.getReference("tree").doFetchContent(e.record)}}Neo.applyClassConfig(v);const I=v;var x=n(1758);class S extends x.Z{static config={className:"Portal.view.learn.MainContainerModel",data:{},stores:{tree:{module:p,responseRoot:"data"}}}}Neo.applyClassConfig(S);const P=S;var $=n(1722);class k extends o.Z{static config={className:"Portal.view.learn.MainContainer",controller:I,cls:["learnneo-maincontainer"],items:[{module:o.Z,layout:"fit",minWidth:350,width:350,cls:"sidenav-container",items:[{module:N,reference:"tree",listeners:{contentChange:"onContentChange"}}]},{module:$.Z,cls:["main-content-splitter"],resizeTarget:"previous",size:4},{module:r,reference:"content",listeners:{edit:"onContentEdit",refresh:"onContentRefresh"}}],layout:{ntype:"hbox",align:"stretch"},model:P}}Neo.applyClassConfig(k);const b=k},312:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(9208),a=n(2577);class s extends a.Z{static wrapValues=["hard","off","soft",null];static config={className:"Neo.form.field.TextArea",ntype:"textarea",autoGrow_:!1,baseCls:["neo-textarea","neo-textfield"],clearable:!1,cols_:null,inputTag_:"textarea",inputType:null,resizable_:!1,rows_:3,wrap_:null};afterSetAutoGrow(e){e&&this.syncAutoGrowMonitor(),e||this.afterSetHeight(this._height)}afterSetCols(e,t){this.changeInputElKey("cols",e)}afterSetInputTag(e,t){this.changeInputElKey("tag",e)}afterSetMounted(e,t){super.afterSetMounted(e,t),this.syncAutoGrowMonitor()}afterSetResizable(e,t){this.getInputEl().style.resize=e?null:"none",this.update()}afterSetRows(e,t){this.changeInputElKey("rows",e)}afterSetValue(e,t){let n=this.getInputEl();n&&(n.html=o.Z.escapeHtml(e)),super.afterSetValue(e,t)}afterSetWrap(e,t){this.changeInputElKey("wrap",e)}beforeSetWrap(e,t){return this.beforeSetEnumValue(e,t,"wrap","wrapValues")}async syncAutoGrowMonitor(){this.mounted&&this.autoGrow&&Neo.main.DomAccess.monitorAutoGrow({appName:this.appName,id:this.getInputElId(),autoGrow:this.autoGrow})}}Neo.applyClassConfig(s);const r=s}}]);