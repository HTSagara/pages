"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[2971],{2971:(e,t,a)=>{a.d(t,{A:()=>c});var i=a(6270),o=a(5078),n=a(3627);class s extends n.A{static config={className:"Neo.dialog.header.Toolbar",actionMap:{close:()=>({action:"close",iconCls:"far fa-window-close"}),maximize:()=>({action:"maximize",iconCls:"far fa-window-maximize"})},actions:["maximize","close"],title_:null};afterSetTitle(e,t){this.down({flag:"title-label"})?.set({hidden:!e,text:e})}createItems(){let e=this,t=e.fireAction.bind(e),a=e.items||[];a.push({ntype:"label",cls:["neo-panel-header-text","neo-label"],flag:"title-label",hidden:!e.title,text:e.title}),e.actions&&(a.push("->"),e.actions.forEach((i=>{"Object"!==Neo.typeOf(i)&&(i=e.actionMap[i]()),a.push({handler:t,...i})}))),e.items=a,super.createItems()}fireAction(e){let t=e.component;this.fire("headerAction",{action:t.action,component:t,scope:this})}}Neo.setupClass(s);const r=s;var d=a(825);let l;class h extends o.A{static closeActions=["close","hide"];static config={className:"Neo.dialog.Base",ntype:"dialog",animateOnDragEnd:!1,animateTargetId_:null,autoMount:!0,autoRender:!0,autoShow:!0,baseCls:["neo-dialog","neo-panel","neo-container"],boundaryContainerId:"document.body",closeAction:"close",draggable_:!0,dragListenersAdded:!1,dragZone:null,dragZoneConfig:null,floating:!0,headerConfig:null,headerToolbar:null,isDragging:!1,keys:{Escape:"onKeyDownEscape"},maximizeCls:"far fa-window-maximize",maximized_:!1,minimizeCls:"far fa-window-minimize",modal_:!1,resizable_:!0,resizablePluginConfig:null,title_:null,trapFocus_:!1,centered_:!1};construct(e){super.construct(e);let t=this,a=t.style;t.createHeader(),t.animateTargetId||t.centered||(Neo.assignDefaults(a,{left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"50%"}),t.style=a)}afterSetAnimateTargetId(e,t){this.autoMount=!e,this.autoRender=!e}afterSetAppName(e,t){let a=this,i=a.getPlugin({flag:"resizable"});a.dragZone&&(a.dragZone.appName=e),i&&(i.appName=e),super.afterSetAppName(e,t)}afterSetCentered(e,t){i.A.toggle(this.vdom.cls,"neo-centered",e),this.update()}afterSetDraggable(e,t){let o,n=this;void 0!==t&&n.headerToolbar&&(o=n.headerToolbar.cls,i.A[e?"add":"remove"](o,"neo-draggable"),n.headerToolbar.cls=o),e&&a.e(8352).then(a.bind(a,8352)).then((e=>{if(l=e.default,!n.dragListenersAdded){const e=[{"drag:end":n.onDragEnd,scope:n,delegate:".neo-header-toolbar"},{"drag:start":n.onDragStart,scope:n,delegate:".neo-header-toolbar"}];n.dragZoneConfig?.alwaysFireDragMove&&e.push({"drag:move":n.onDragMove,scope:n,delegate:".neo-header-toolbar"}),n.domListeners=[...n.domListeners,...e],n.dragListenersAdded=!0}}))}afterSetMaximized(e,t){let a=this.vdom.cls;i.A.toggle(a,"neo-maximized",e),this.update()}afterSetModal(e,t){let a=this;i.A.toggle(a.vdom.cls,"neo-modal",e),a.update(),a.rendered&&a.syncModalMask()}afterSetMounted(e,t){super.afterSetMounted(e,t),this.syncTrapFocus()}afterSetResizable(e,t){e&&a.e(9811).then(a.bind(a,9811)).then((e=>{let t=this,a=t.plugins||[];t.getPlugin({flag:"resizable"})||(a.push({module:e.default,appName:t.appName,delegationCls:"neo-dialog",flag:"resizable",...t.resizablePluginConfig}),t.plugins=a)}))}afterSetTitle(e,t){this.headerToolbar&&(this.headerToolbar.title=e)}afterSetTrapFocus(e,t){this.syncTrapFocus()}async animateHide(){let e=this,t=e.appName,{id:a}=e,i=await e.getDomRect([a,e.animateTargetId]);await Neo.applyDeltas(t,{id:a,style:{height:`${i[0].height}px`,left:`${i[0].left}px`,top:`${i[0].top}px`,transform:"none",width:`${i[0].width}px`}}),await e.timeout(30),await Neo.applyDeltas(t,{id:a,cls:{add:["animated-hiding-showing"]},style:{height:`${i[1].height}px`,left:`${i[1].left}px`,top:`${i[1].top}px`,width:`${i[1].width}px`}}),await e.timeout(250),e.closeOrHide(!1),"hide"===e.closeAction&&await Neo.applyDeltas(t,{id:a,action:"removeNode"})}async animateShow(){let e=this,t=e.appName,{id:a,style:i}=e,o=await e.getDomRect(e.animateTargetId);await e.render(!0),await Neo.applyDeltas(t,{id:a,style:{height:`${o.height}px`,left:`${o.left}px`,top:`${o.top}px`,width:`${o.width}px`}}),await e.timeout(50),await Neo.applyDeltas(t,{id:a,cls:{add:["animated-hiding-showing"]},style:{height:i?.height||null,left:i?.left||"50%",top:i?.top||"50%",transform:i?.transform||"translate(-50%, -50%)",width:i?.width||"50%"}}),await e.timeout(200),await Neo.applyDeltas(t,{id:a,cls:{remove:["animated-hiding-showing"]}}),e.show(!1)}beforeSetCloseAction(e,t){return this.beforeSetEnumValue(e,t,"closeAction")}close(e=!!this.animateTargetId){let t=this;t.revertFocus(),e?t.animateHide():(t.fire("close"),t.destroy(!0))}async closeOrHide(e=!!this.animateTargetId){let t=this;t[t.closeAction](e),await t.timeout(30),t.syncModalMask(t.id)}closeOrHideAction(e){this.closeOrHide()}createHeader(){let e=this,t=["neo-header-toolbar","neo-toolbar"],a=e.headers||[];e.draggable&&t.push("neo-draggable"),e.headerToolbar=Neo.create({module:r,appName:e.appName,cls:t,dock:"top",flex:"none",id:e.getHeaderToolbarId(),listeners:{headerAction:e.executeHeaderAction,scope:e},title:e.title,...e.headerConfig}),a.unshift(e.headerToolbar),e.headers=a}executeHeaderAction(e){let t=this,a={close:t.closeOrHideAction,maximize:t.maximize};a[e.action]?.call(t,e),t.fire("headerAction",{dialog:t,...e})}getAnimateTargetId(){return this.id+"-animate"}getHeaderToolbarId(){return this.id+"-header-toolbar"}getProxyVdom(){return d.A.clone(this.vdom)}async hide(e=!!this.animateTargetId){let t=this;e?t.animateHide():(t.unmount(),t.fire("hide")),await t.timeout(30),t.syncModalMask()}init(){super.init();let e=this;e.animateTargetId?e.autoShow&&e.show():e.timeout(100).then((()=>{e.syncModalMask()}))}maximize(e){let t=this;e.component.iconCls=t.maximized?t.maximizeCls:t.minimizeCls,t.maximized=!t.maximized}onConstructed(){super.onConstructed();let e=this;e.headerToolbar=e.down({id:e.getHeaderToolbarId()})}onDragEnd(e){let t,a,i=this;i.maximized||i.getDomRect(i.dragZone.dragProxy.id).then((o=>{a=i.style,Object.assign(a,{height:`${o.height}px`,left:`${o.left}px`,opacity:1,top:`${o.top}px`,transform:"none",width:`${o.width}px`}),i.animateOnDragEnd||(t=a.transitionProperty||null,a.transitionProperty="none",setTimeout((()=>{a=i.style,a.transitionProperty=t,i.style=a}),50)),i.style=a,i.dragZone.dragEnd(e),i.dragZone.boundaryContainerId=null,i.isDragging=!1}))}onDragMove(e){this.dragZone.dragMove(e)}onDragStart(e){let t=this,a=t.style||{};t.maximized||(t.isDragging=!0,t.getPlugin({flag:"resizable"})?.removeAllNodes(),t.dragZone?t.dragZone.boundaryContainerId=t.boundaryContainerId:(t.dragZone=Neo.create({module:l,appName:t.appName,bodyCursorStyle:"move !important",boundaryContainerId:t.boundaryContainerId,dragElement:t.vdom,dragProxyConfig:{vdom:t.getProxyVdom()},owner:t,useProxyWrapper:!1,...t.dragZoneConfig}),t.fire("dragZoneCreated",{dragZone:t.dragZone,id:t.id})),t.dragZone.dragStart(e),a.opacity=.7,t.style=a)}onKeyDownEscape(){this.hidden=!0}show(e=!!this.animateTargetId){let t=this;e?t.animateShow():(t.rendered||t.render(!0),t.fire("show")),t.syncModalMask()}syncModalMask(e=this.id){Neo.main.DomAccess.syncModalMask({id:e,modal:this.modal})}syncTrapFocus(){this.mounted&&Neo.main.DomAccess.trapFocus({id:this.id,trap:this.trapFocus})}}Neo.setupClass(h);const c=h}}]);