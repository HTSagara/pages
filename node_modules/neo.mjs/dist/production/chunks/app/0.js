"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[0],{0:(e,t,o)=>{o.r(t),o.d(t,{default:()=>v});var n=o(9119),s=o(4022);class a extends s.Z{static config={className:"LearnNeo.view.home.ContentView",baseCls:["learn-content"]};record=null;onClick(e){let t=this,o=t.record;e.altKey&&e.shiftKey&&!e.metaKey?t.fire("edit",{component:t,record:o}):!e.altKey&&e.shiftKey&&e.metaKey&&t.fire("refresh",{component:t,record:o})}onConstructed(){super.onConstructed();let e=this;e.addDomListeners({click:e.onClick,scope:e})}}Neo.applyClassConfig(a);const l=a;var i=o(2281);class r extends i.Z{static config={className:"LearnNeo.model.Content",fields:[{name:"className",type:"String"},{name:"collapsed",type:"Boolean"},{name:"id",type:"Integer"},{name:"isLeaf",type:"Boolean"},{name:"name",type:"String"},{name:"parentId",type:"Integer"},{name:"path",type:"String"}]}}Neo.applyClassConfig(r);const c=r;var d=o(5959);class h extends d.Z{static config={className:"LearnNeo.store.Content",model:c};xonConstructed(){super.onConstructed()}xload(){this.model=c,Neo.Main.getByPath({path:"location.search"}).then((e=>{const t=e?.substr(1)||"",o=t?JSON.parse(`{"${decodeURI(t.replace(/&/g,'","').replace(/=/g,'":"'))}"}`):{};this.deck=o.deck||"learnneo",this.url=`${this.contentPath}/tree.json`,super.load(),console.log(o)}))}get contentPath(){return`../../../resources/data/deck/${this.deck}`}doLoadStore(){const e=this;Neo.Xhr.promiseJson({url:`${this.contentPath}/tree.json`}).then((t=>{e.data=t.json.data}))}}Neo.applyClassConfig(h);const p=h;var m=o(5077);class g extends m.Z{static config={className:"LearnNeo.view.home.ContentTreeList",cls:["topics-tree"],store:p};get contentPath(){return`../../../resources/data/deck/${this.deck}`}async doFetchContent(e){let t=this,o=`${t.contentPath}`;if(o+=e.path?`/pages/${e.path}`:`/p/${e.id}.md`,e.isLeaf&&o){const n=await fetch(o),s=await n.text();await Neo.main.addon.Markdown.markdownToHtml(s).then((o=>t.fire("contentChange",{component:t,html:o,record:e,isLab:e.name?.startsWith("Lab:")})),(()=>t.fire("contentChange",{component:t})))}}doLoadStore(){const e=this;Neo.Xhr.promiseJson({url:`${this.contentPath}/t.json`}).then((t=>{e.store.data=t.json.data,e.createItems(null,e.getListItemsRoot(),0),e.update()}))}onConstructed(){super.onConstructed();let e=this;Neo.Main.getByPath({path:"location.search"}).then((t=>{const o=t?.substr(1)||"",n=o?JSON.parse(`{"${decodeURI(o.replace(/&/g,'","').replace(/=/g,'":"'))}"}`):{};e.deck=n.deck||"learnneo",e.doLoadStore(),console.log(n)}))}onLeafItemClick(e){super.onLeafItemClick(e),this.doFetchContent(e)}}Neo.applyClassConfig(g);const u=g;var f=o(3846);class C extends f.Z{static config={className:"LearnNeo.view.home.MainContainerController"};onConstructed(){super.onConstructed(),Neo.Main.getByPath({path:"location.search"}).then((e=>{const t=e?.substr(1)||"",o=t?JSON.parse(`{"${decodeURI(t.replace(/&/g,'","').replace(/=/g,'":"'))}"}`):{};this.getModel().setData("deck",o.deck||"learnneo")})),fetch("../../../../resources/data/deck/EditorConfig.json").then((e=>e.json().then((e=>this.getModel().setData("editorConfig",e)))))}async onContentChange(e){let t=this,o=t.getReference("content");o.toggleCls("lab",e.isLab),o.html=e.html,o.record=e.record,await t.timeout(200),await Neo.main.addon.HighlightJS.loadLibrary({appName:t.appName,highlightJsPath:"../../docs/resources/highlight/highlight.pack.js",themePath:"../../docs/resources/highlightjs-custom-github-theme.css"}),await t.timeout(200),Neo.main.addon.HighlightJS.syntaxHighlightInit({appName:t.appName,vnodeId:o.id})}async onContentEdit(e){const t=this.getModel();console.log(e);const o=t.getData("editorConfig"),n=t.getData("deck");if(!o||!n)return;const s=`${o.root}/${n}/p/${e.record.id}.md`;await fetch("http://localhost:3000/openInEditor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:s,editor:o.editor})})}onContentRefresh(e){this.getReference("tree").doFetchContent(e.record)}}Neo.applyClassConfig(C);const N=C;var y=o(1758);class I extends y.Z{static config={className:"LearnNeo.view.home.MainContainerModel",data:{},stores:{tree:{module:d.Z,responseRoot:"data"}}}}Neo.applyClassConfig(I);const b=I;var L=o(1722);class k extends n.Z{static config={className:"LearnNeo.view.home.MainContainer",controller:N,items:[{module:n.Z,layout:"fit",minWidth:350,width:350,items:[{module:u,reference:"tree",listeners:{contentChange:"onContentChange"}}]},{module:L.Z,resizeTarget:"previous",size:5},{module:l,reference:"content",listeners:{edit:"onContentEdit",refresh:"onContentRefresh"}}],layout:{ntype:"hbox",align:"stretch"},model:b}}Neo.applyClassConfig(k);const v=k},4327:(e,t,o)=>{o.d(t,{Z:()=>a});var n=o(4356);class s extends n.Z{static config={className:"Neo.selection.TreeModel",ntype:"selection-treemodel"};onKeyDownEnter(e){Neo.log("onKeyDownEnter",e)}onNavKey(e,t){Neo.log("onNavKey",e,t)}}Neo.applyClassConfig(s);const a=s},5077:(e,t,o)=>{o.d(t,{Z:()=>c});var n=o(9585),s=o(395),a=o(6351),l=o(5328),i=o(4327);class r extends n.Z{static config={className:"Neo.tree.List",ntype:"treelist",baseCls:["neo-tree-list"],disableSelection:!1,dragZone:null,folderCls:"neo-list-folder",showCollapseExpandAllIcons:!0,sortable_:!1,sortZone:null,sortZoneConfig:null,wrapperCls:[],_vdom:{cn:[{tag:"ul",cls:["neo-list-container","neo-list"],tabIndex:-1,cn:[]}]}};afterSetDraggable(e,t){let n=this;e&&(n.sortable?console.error("tree.List can be either draggable or sortable, not both.",n.id):n.dragZone||o.e(2123).then(o.bind(o,2123)).then((e=>{n.dragZone=Neo.create({module:e.default,appName:n.appName,owner:n,...n.dragZoneConfig})})))}afterSetSortable(e,t){let n=this;e&&(n.draggable?console.error("tree.List can be either draggable or sortable, not both.",n.id):n.sortZone||o.e(6308).then(o.bind(o,669)).then((e=>{n.sortZone=Neo.create({module:e.default,appName:n.appName,boundaryContainerId:n.id,owner:n,...n.sortZoneConfig})})))}beforeSetSelectionModel(e,t){return t?.destroy(),s.Z.beforeSetInstance(e,i.Z)}beforeSetStore(e,t){return e||(e=Neo.create(a.Z,{keyProperty:"id"})),super.beforeSetStore(e,t)}collapseAll(e=!1){let t,o=this,n=o.vdom,s=!1;o.store.items.forEach((e=>{e.isLeaf||(t=o.getVdomChild(o.getItemId(e.id),n),t.cls.includes("neo-folder-open")&&(l.Z.remove(t.cls,"neo-folder-open"),s=!0))})),s&&(o[e?"_vdom":"vdom"]=n)}createItems(e,t,o){let n,s,a=this,l=a.store.find("parentId",e),i=a.itemCls,r=a.folderCls;return l.length>0&&(t.cn||(t.cn=[]),null!==e?(t.cn.push({tag:"ul",cls:["neo-list"],cn:[],style:{paddingLeft:"15px"}}),s=t.cn[t.cn.length-1]):s=t,l.forEach((e=>{n=[i],e.isLeaf?n.push(i+(e.singleton?"-leaf-singleton":"-leaf")):(n.push(r),e.collapsed||n.push("neo-folder-open")),s.cn.push({tag:"li",cls:n,id:a.getItemId(e.id),cn:[{tag:"span",cls:[i+"-content",e.iconCls],innerHTML:e.name,style:{pointerEvents:"none"}}],style:{padding:"10px",position:e.isLeaf?null:"sticky",top:e.isLeaf?null:38*o+"px",zIndex:e.isLeaf?null:20/(o+1)}}),s=a.createItems(e.id,s,o+1)}))),t}expandAll(e=!1){let t,o=this,n=o.vdom,s=!1;o.store.items.forEach((e=>{e.isLeaf||(t=o.getVdomChild(o.getItemId(e.id),n),t.cls.includes("neo-folder-open")||(l.Z.add(t.cls,"neo-folder-open"),s=!0))})),s&&(o[e?"_vdom":"vdom"]=n)}filter(e,t,o,n=!1){let s,a,l,i=this,r=!0,c=new RegExp(t,"gi");return t||(t=""),i.store.items.forEach((d=>{d.parentId===o&&(a=!1,l=i.getVdomChild(i.getItemId(d.id),i.vdom),l.cn[0].innerHTML=d[e].replace(c,(e=>(a=!0,`<span class="neo-highlight-search">${e}</span>`))),s=!!d.isLeaf||i.filter(e,t,d.id,a||n),(a||n||!1===s||""===t)&&(r=!1),l.style.display=r?"none":"list-item")})),null===o&&(i.expandAll(!0),i.update()),r}getListItemsRoot(){return this.vdom.cn[this.showCollapseExpandAllIcons?2:0]}onClick(e){e.target.cls.includes("neo-treelist-menu-item")?this.onMenuItemClick(e.target.cls):super.onClick(e)}onConstructed(){super.onConstructed();let e=this;e.showCollapseExpandAllIcons&&(e.vdom.cn.unshift({cls:["neo-treelist-menu-item","neo-treelist-collapse-all-icon"],cn:[{tag:"span",cls:["neo-treelist-menu-item-content"]}]},{cls:["neo-treelist-menu-item","neo-treelist-expand-all-icon"],cn:[{tag:"span",cls:["neo-treelist-menu-item-content"]}]}),e.update())}onItemClick(e,t){let o,n,s,a,i=this,r=i.store.items,c=0,d=r.length,h=t.path.map((e=>e.id));for(;c<d;c++)if(s=r[c],a=i.getItemId(s.id),h.includes(a)){n=s,o=i.getVdomChild(a);break}o&&(o.cls?.includes(i.folderCls)?(l.Z.toggle(o.cls,"neo-folder-open"),i.update()):(i.onLeafItemClick(n),i.fire("leafItemClick",n)),super.onItemClick(e,t))}onLeafItemClick(e){}onMenuItemClick(e){e.includes("neo-treelist-collapse-all-icon")?this.collapseAll():this.expandAll()}}Neo.applyClassConfig(r);const c=r}}]);